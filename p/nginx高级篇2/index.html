<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="åŸºäºipåœ°å€çš„è®¿é—®é™åˆ¶ å®˜ç½‘ï¼šModule ngx_http_access_module (nginx.org) 1 2 3 4 5 6 7 8 9 å¥æ³•: allow address | CRID | unix:| all é»˜è®¤ï¼š - è¯­å¢ƒ: http,server,location,limit_except å…è®¸è®¿é—®æŒ‡å®šçš„ç½‘ç»œæˆ–åœ°å€,å¦‚æœæŒ‡å®šäº†ç‰¹æ®Šå€¼">
<title>Nginxé«˜çº§ç¯‡2</title>

<link rel='canonical' href='https://ZackMoel.github.io/xiaoshi/p/nginx%E9%AB%98%E7%BA%A7%E7%AF%872/'>

<link rel="stylesheet" href="/xiaoshi/scss/style.min.0304c6baf04e01a8fe70693791cb744d56a3578a3120a8796cefc66825aa39c7.css"><meta property='og:title' content="Nginxé«˜çº§ç¯‡2">
<meta property='og:description' content="åŸºäºipåœ°å€çš„è®¿é—®é™åˆ¶ å®˜ç½‘ï¼šModule ngx_http_access_module (nginx.org) 1 2 3 4 5 6 7 8 9 å¥æ³•: allow address | CRID | unix:| all é»˜è®¤ï¼š - è¯­å¢ƒ: http,server,location,limit_except å…è®¸è®¿é—®æŒ‡å®šçš„ç½‘ç»œæˆ–åœ°å€,å¦‚æœæŒ‡å®šäº†ç‰¹æ®Šå€¼">
<meta property='og:url' content='https://ZackMoel.github.io/xiaoshi/p/nginx%E9%AB%98%E7%BA%A7%E7%AF%872/'>
<meta property='og:site_name' content='å°è¯—çš„åšå®¢'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-04-14T16:53:41&#43;08:00'/><meta property='article:modified_time' content='2025-04-14T16:53:41&#43;08:00'/>
<meta name="twitter:title" content="Nginxé«˜çº§ç¯‡2">
<meta name="twitter:description" content="åŸºäºipåœ°å€çš„è®¿é—®é™åˆ¶ å®˜ç½‘ï¼šModule ngx_http_access_module (nginx.org) 1 2 3 4 5 6 7 8 9 å¥æ³•: allow address | CRID | unix:| all é»˜è®¤ï¼š - è¯­å¢ƒ: http,server,location,limit_except å…è®¸è®¿é—®æŒ‡å®šçš„ç½‘ç»œæˆ–åœ°å€,å¦‚æœæŒ‡å®šäº†ç‰¹æ®Šå€¼">
  


    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/xiaoshi/">
                
                    
                    
                    
                        
                        <img src="/xiaoshi/img/avatar_hu8920112365793990935.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ¥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/xiaoshi">å°è¯—çš„åšå®¢</a></h1>
            <h2 class="site-description">æ¬¢è¿æ¥åˆ°å°è¯—çš„åšå®¢</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/1055981889?spm_id_from=333.1007.0.0'
                        target="_blank"
                        title="bilibili"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-bilibili"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" /><path d="M8 3l2 3" /><path d="M16 3l-2 3" /><path d="M9 13v-2" /><path d="M15 11v2" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/ZackMoel/xiaoshi.github.io'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/xiaoshi/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>å‹æƒ…é“¾æ¥</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#ç¬¬ä¸€é¢˜">ç¬¬ä¸€é¢˜</a></li>
    <li><a href="#ç¬¬äºŒé¢˜">ç¬¬äºŒé¢˜</a></li>
    <li><a href="#ç¬¬ä¸‰é¢˜">ç¬¬ä¸‰é¢˜</a></li>
    <li><a href="#ç¬¬å››é¢˜">ç¬¬å››é¢˜</a></li>
    <li><a href="#ç¬¬äº”é¢˜">ç¬¬äº”é¢˜</a></li>
  </ol>

  <ol>
    <li><a href="#è¯­æ³•">è¯­æ³•</a></li>
  </ol>

  <ol>
    <li>
      <ol>
        <li><a href="#å…·ä½“nginxé™æµçš„é…ç½®">å…·ä½“nginxé™æµçš„é…ç½®</a></li>
        <li><a href="#nodelayå‚æ•°ä½œç”¨">nodelayå‚æ•°ä½œç”¨</a></li>
      </ol>
    </li>
  </ol>

  <ol>
    <li><a href="#ç¼–è¯‘å®‰è£…nginxæ·»åŠ ç¬¬ä¸‰æ–¹æ¨¡å—">ç¼–è¯‘å®‰è£…nginxï¼Œæ·»åŠ ç¬¬ä¸‰æ–¹æ¨¡å—</a></li>
    <li><a href="#ä½¿ç”¨è¯¥echoæ¨¡å—å¯ä»¥æ‰“å°è°ƒè¯•nginxçš„å˜é‡ç­‰ä¿¡æ¯">ä½¿ç”¨è¯¥echoæ¨¡å—ï¼Œå¯ä»¥æ‰“å°ï¼Œè°ƒè¯•nginxçš„å˜é‡ç­‰ä¿¡æ¯</a></li>
  </ol>

  <ol>
    <li><a href="#2locationè¯­æ³•ä¼˜å…ˆçº§">2.locationè¯­æ³•ä¼˜å…ˆçº§</a></li>
    <li><a href="#ç”Ÿæˆå…·ä½“locationçš„åŒ¹é…è§„åˆ™">ç”Ÿæˆå…·ä½“locationçš„åŒ¹é…è§„åˆ™</a></li>
    <li><a href="#è¿›è¡Œurlçš„è®¾ç½®è®¿é—®æŸ¥çœ‹ç»“æœ">è¿›è¡Œurlçš„è®¾ç½®è®¿é—®ï¼ŒæŸ¥çœ‹ç»“æœ</a></li>
    <li><a href="#å®é™…å·¥ä½œåº”ç”¨">å®é™…å·¥ä½œåº”ç”¨</a></li>
  </ol>

  <ol>
    <li>
      <ol>
        <li><a href="#ä¸æ­£ç¡®çš„å†™æ³•1">ä¸æ­£ç¡®çš„å†™æ³•1,</a></li>
        <li><a href="#æ­£ç¡®å†™æ³•rootå‚æ•°">æ­£ç¡®å†™æ³•ï¼ˆrootå‚æ•°ï¼‰</a></li>
      </ol>
    </li>
    <li><a href="#aliaså‚æ•°ç”¨æ³•">aliaså‚æ•°ç”¨æ³•</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/xiaoshi/p/nginx%E9%AB%98%E7%BA%A7%E7%AF%872/">Nginxé«˜çº§ç¯‡2</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-04-14</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="åŸºäºipåœ°å€çš„è®¿é—®é™åˆ¶">åŸºäºipåœ°å€çš„è®¿é—®é™åˆ¶
</h1><p>å®˜ç½‘ï¼š<a class="link" href="https://nginx.org/en/docs/http/ngx_http_access_module.html"  target="_blank" rel="noopener"
    >Module ngx_http_access_module (nginx.org)</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">å¥æ³•: allow address | CRID | unix:| all
</span></span><span class="line"><span class="cl">é»˜è®¤ï¼š -
</span></span><span class="line"><span class="cl">è¯­å¢ƒ: http,server,location,limit_except
</span></span><span class="line"><span class="cl">å…è®¸è®¿é—®æŒ‡å®šçš„ç½‘ç»œæˆ–åœ°å€,å¦‚æœæŒ‡å®šäº†ç‰¹æ®Šå€¼unix:(1.5.1),åˆ™å…è®¸è®¿é—®æ‰€æœ‰unixåŸŸå¥—æ¥å­—
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">å¥æ³•:deny address | CRID | unix:| all
</span></span><span class="line"><span class="cl">é»˜è®¤ï¼š -
</span></span><span class="line"><span class="cl">è¯­å¢ƒ: http,server,location,limit_except
</span></span><span class="line"><span class="cl">æ‹’ç»è®¿é—®æŒ‡å®šçš„ç½‘ç»œæˆ–åœ°å€,å¦‚æœæŒ‡å®šäº†ç‰¹æ®Šå€¼unix:(1.5.1),åˆ™æ‹’ç»è®¿é—®æ‰€æœ‰unixåŸŸå¥—æ¥å­—
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/assets/image-20220524094559035.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524094559035"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">allowå’Œçš„æ”¾ç½®é¡ºåº:
</span></span><span class="line"><span class="cl">allow xxxxx;
</span></span><span class="line"><span class="cl">deny   xxxx;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç¬¬ä¸€é¢˜">ç¬¬ä¸€é¢˜
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ç¬¬ä¸€é¢˜
</span></span><span class="line"><span class="cl">é™åˆ¶åªå…è®¸10.0.0.0~10.0.0.255èŒƒå›´çš„IPè®¿é—®ï¼ˆç¦æ­¢å…¶ä»–ç½‘æ®µçš„è®¿é—®ï¼‰
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">åˆ›å»ºè™šæ‹Ÿä¸»æœºï¼Œå®Œæˆè¯¥åŠŸèƒ½
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#cat deny-allow.conf 
</span></span><span class="line"><span class="cl">server {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">listen 22334;
</span></span><span class="line"><span class="cl">server_name _;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location /  {
</span></span><span class="line"><span class="cl">    allow 10.0.0.0/24;
</span></span><span class="line"><span class="cl">    deny all;
</span></span><span class="line"><span class="cl">	root  /www/deny-allow;
</span></span><span class="line"><span class="cl">	index index.html;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">åˆ›å»ºæµ‹è¯•æ•°æ®ï¼ŒæŸ¥çœ‹è®¿é—®æƒ…å†µ
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#mkdir -p /www/deny-allow
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#echo &#39;I am web-8  , test  deny  and  allow !!!!!!!!&#39;  &gt; /www/deny-allow/index.html
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#systemctl restart nginx
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#netstat -tunlp|grep 22334
</span></span><span class="line"><span class="cl">tcp        0      0 0.0.0.0:22334           0.0.0.0:*               LISTEN      7402/nginx: master  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">1. ç”¨winå»è®¿é—®ï¼Œå¯ä»¥å—ï¼Ÿ  å¯ä»¥çš„
</span></span><span class="line"><span class="cl">http://10.0.0.8:22334/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2. ç”¨61æœºå™¨å»è®¿é—®ï¼Œ
</span></span><span class="line"><span class="cl"># ç½‘å¡çš„æµé‡ï¼Œç½‘æ®µæ˜¯å¯¹åº”èµ·æ¥çš„ 
</span></span><span class="line"><span class="cl">eth0   10.0.0.61
</span></span><span class="line"><span class="cl">eth1    172.16.1.61
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">curl 10.0.0.8:22334        # ä»61æœºå™¨çš„10.0.0.61å‘å‡º
</span></span><span class="line"><span class="cl">curl 172.16.1.8:22334	  # ä»61æœºå™¨çš„172.16.1.61å‘å‡º
</span></span></code></pre></td></tr></table>
</div>
</div><p>æç¤º</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">åªå†™ä¸€ä¸ªallowçš„è¯ï¼Œç­‰äºæ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå¿…é¡»åšå¥½denyé™åˆ¶ï¼Œæ‰æœ‰å®é™…æ„ä¹‰ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç¬¬äºŒé¢˜">ç¬¬äºŒé¢˜
</h2><p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/assets/image-20220524102822670.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524102822670"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">- é™åˆ¶åªå…è®¸172.16.1.0 ~ 172.16.1.255 èŒƒå›´çš„IPè®¿é—®ï¼Œç¦æ­¢å…¶ä»–ä»»æ„çš„åœ°å€è®¿é—®ã€‚
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#cat deny-allow.conf 
</span></span><span class="line"><span class="cl">server {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">listen 22334;
</span></span><span class="line"><span class="cl">server_name _;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location /  {
</span></span><span class="line"><span class="cl">        #allow 10.0.0.0/24;
</span></span><span class="line"><span class="cl">        allow 172.16.1.0/24;
</span></span><span class="line"><span class="cl">		deny  all;  # æ‹’ç»å®¢æˆ·ç«¯è®¿é—®è¯¥ç½‘é¡µæ ¹ç›®å½•ä¸‹çš„èµ„æºï¼Œè¿”å›403æƒé™ä¸è¶³
</span></span><span class="line"><span class="cl">	root  /www/deny-allow;
</span></span><span class="line"><span class="cl">	index index.html;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">ä½ å‘ç°ï¼Œå¤„äºåŒä¸€ä¸ªå†…ç½‘ç¯å¢ƒä¸‹çš„ ï¼Œæœ‰172ç½‘æ®µçš„æœºå™¨æ˜¯é€šçš„ï¼Œ
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç¬¬ä¸‰é¢˜">ç¬¬ä¸‰é¢˜
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">- é™åˆ¶åªå…è®¸windowsè®¿é—®ï¼ˆç¦æ­¢å…¶ä»–æœºå™¨è®¿é—®ï¼Œæ¯”å¦‚ä»»æ„çš„ 10.0.0.61  ä»»æ„çš„172.16.1.52ï¼‰
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#cat deny-allow.conf 
</span></span><span class="line"><span class="cl">server {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">listen 22334;
</span></span><span class="line"><span class="cl">server_name _;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location /  {
</span></span><span class="line"><span class="cl">        # allow 10.0.0.0/24;
</span></span><span class="line"><span class="cl">        # allow 172.16.1.0/24;
</span></span><span class="line"><span class="cl">        allow 10.0.0.1;
</span></span><span class="line"><span class="cl">		deny  all;  # æ‹’ç»å®¢æˆ·ç«¯è®¿é—®è¯¥ç½‘é¡µæ ¹ç›®å½•ä¸‹çš„èµ„æºï¼Œè¿”å›403æƒé™ä¸è¶³
</span></span><span class="line"><span class="cl">	root  /www/deny-allow;
</span></span><span class="line"><span class="cl">	index index.html;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># å¾…ä¼šè¯•è¯•ï¼Œç”¨ä¸åŒç½‘æ®µçš„å®¢æˆ·ç«¯ipï¼Œè®¿é—®ï¼ŒæŸ¥çœ‹æƒé™
</span></span><span class="line"><span class="cl"># æµ‹è¯•å‡ ä¸ªå®¢æˆ·ç«¯
</span></span><span class="line"><span class="cl">10.0.0.1 é€š ï¼Œåªæœ‰è¿™ä¸€ä¸ªipåœ°å€æ˜¯é€šçš„.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">10.0.0.61  ä¸é€š
</span></span><span class="line"><span class="cl">172.16.1.52 ä¸é€š
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç¬¬å››é¢˜">ç¬¬å››é¢˜
</h2><p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/assets/image-20220524104247996.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524104247996"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">- é™åˆ¶æ‹’ç»10.0.0.0~10.0.0.255èŒƒå›´çš„IPè®¿é—®ï¼ˆå¾—å…è®¸å…¶ä»–ç½‘æ®µè®¿é—®ï¼‰
</span></span><span class="line"><span class="cl">(è¿™ä¸ªipé™åˆ¶è§„åˆ™ï¼Œè‡ªä¸Šè€Œä¸‹çš„åŒ¹é…ï¼ŒåŒ¹é…åˆ°è§„åˆ™åï¼Œå°±ä¸ä¼šç»§ç»­å‘ååŒ¹é…äº†)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">æ­¤æ—¶åªèƒ½é€šè¿‡å†…ç½‘çš„172ç½‘å¡å»è®¿é—®è¿™ä¸ªæœºå™¨äº†
</span></span><span class="line"><span class="cl"># é…ç½®å¦‚ä¸‹
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#cat deny-allow.conf 
</span></span><span class="line"><span class="cl">server {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">listen 22334;
</span></span><span class="line"><span class="cl">server_name _;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location /  {
</span></span><span class="line"><span class="cl">    deny 10.0.0.0/24;
</span></span><span class="line"><span class="cl">	root  /www/deny-allow;
</span></span><span class="line"><span class="cl">	index index.html;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># é€šè¿‡å¦‚ä¸‹è¿™å‡ ä¸ªå®¢æˆ·ç«¯è¯•è¯•ï¼Œå…ˆç”¨10ç½‘æ®µçš„è¯•è¯•
</span></span><span class="line"><span class="cl">å‘ç°10ç½‘æ®µå…¨éƒ¨è¢«æ‹’ç»
</span></span><span class="line"><span class="cl">å‘ç°172ç½‘æ®µæ˜¯å…è®¸è¢«è®¿é—®çš„
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç¬¬äº”é¢˜">ç¬¬äº”é¢˜
</h2><p>åŸºäºipï¼Œåˆ¤æ–­å‡ºç›®æ ‡æœºå™¨æ˜¯windowså—ï¼Ÿ</p>
<p>é€šè¿‡ç›®æ ‡æœºå™¨çš„user-agentå»åˆ¤æ–­ï¼Œåˆ¤æ–­çš„æµè§ˆå™¨å®¢æˆ·ç«¯ï¼Œæ˜¯windowsç­‰æƒ…å†µï¼Œæ‹’ç»</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">é™åˆ¶åªæ‹’ç»windowsè®¿é—®ã€‚å…¶ä»–äººéƒ½å…è®¸è®¿é—®
</span></span><span class="line"><span class="cl">[root@web-8 /etc/nginx/conf.d]#cat deny-allow.conf 
</span></span><span class="line"><span class="cl">server {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">listen 22334;
</span></span><span class="line"><span class="cl">server_name _;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location /  {
</span></span><span class="line"><span class="cl">        deny 10.0.0.1;
</span></span><span class="line"><span class="cl">	root  /www/deny-allow;
</span></span><span class="line"><span class="cl">	index index.html;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">10.0.0.1 åªæœ‰å®ƒä¸èƒ½è®¿é—®
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">æµ‹è¯•
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/pic/image-20220524104443299.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524104443299"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">windowè®¿é—® 172.16.1.8:22334 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">windows(vmnet8  10.0.0.1ï¼Œ)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">172ç½‘æ®µï¼ˆvmwareæä¾›çš„LANç½‘æ®µï¼Œçº¯å±€åŸŸç½‘ï¼Œï¼‰
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="åŸºäºç”¨æˆ·è®¤è¯çš„è®¿é—®é™åˆ¶">åŸºäºç”¨æˆ·è®¤è¯çš„è®¿é—®é™åˆ¶
</h1><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€äº›ç«™ç‚¹å†…å®¹æƒ³è¦è¿›è¡ŒæˆæƒæŸ¥çœ‹ï¼Œåªèƒ½è¾“å…¥è´¦å·å¯†ç ä¹‹åæ‰èƒ½è®¿é—®ï¼Œä¾‹å¦‚ä¸€äº›é‡è¦çš„å†…ç½‘å¹³å°ï¼ŒCRM,CMDB,ä¼ä¸šå†…éƒ¨WIKç­‰ç­‰ã€‚</p>
<h2 id="è¯­æ³•">è¯­æ³•
</h2><p><a class="link" href="https://nginx.org/en/docs/http/ngx_http_auth_basic_module.html"  target="_blank" rel="noopener"
    >https://nginx.org/en/docs/http/ngx_http_auth_basic_module.html</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">å¥æ³•ï¼šauth_basie string I off;
</span></span><span class="line"><span class="cl">é»˜è®¤
</span></span><span class="line"><span class="cl">auth_basie å…³é—­;
</span></span><span class="line"><span class="cl">è¯­å¢ƒï¼šhttp,server,location,1imit_except
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">å¯ç”¨ä½¿ç”¨â€œHTTPåŸºæœ¬èº«ä»½éªŒè¯â€åè®®éªŒè¯ç”¨æˆ·åå’Œå¯†ç ã€‚
</span></span><span class="line"><span class="cl">æŒ‡å®šçš„å‚æ•°ç”¨ä½œrealm.å¤šæ•°å€¼å¯ä»¥åŒ…å«å˜é‡(1.3.10,1.2.7)ã€‚
</span></span><span class="line"><span class="cl">ç‰¹æ®Šå€¼offå–æ¶ˆäº†auth_basicä»å…ˆå‰é…ç½®çº§åˆ«ç»§æ‰¿çš„æŒ‡ä»¤çš„æ•ˆæœã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">å¥æ³•ï¼šauth_basic_user_file file;
</span></span><span class="line"><span class="cl">é»˜è®¤ï¼š -
</span></span><span class="line"><span class="cl">è¯­å¢ƒï¼šhttp,server,location,limit_except
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="err">ç»™è™šæ‹Ÿä¸»æœºï¼ŒåŠ ä¸Šå¯†ç éªŒè¯</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mf">1.</span> <span class="err">åˆ›å»ºå¯†ç ï¼Œå¯†ç ä¸æ˜¯ä¸€ä¸ªç®€å•çš„çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œå¾—åŸºäºå¯†ç æ•°æ®åº“çš„å­˜å‚¨</span>
</span></span><span class="line"><span class="cl"><span class="err">æœ‰å·¥å…·å¸®ä½ å®Œæˆ</span><span class="n">htpasswdè¿™ä¸ªå·¥å…·å»åˆ›å»ºå¯†ç æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">httpd</span><span class="o">-</span><span class="n">tools</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">åˆ›å»ºå¯†ç æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -b å…äº¤äº’ï¼Œè¾“å…¥è´¦å·å¯†ç å³å¯</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -c è®¾ç½®å¯†ç å†™å…¥åˆ°ä»€ä¹ˆæ–‡ä»¶</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">htpasswd</span> <span class="o">-</span><span class="n">b</span> <span class="o">-</span><span class="n">c</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">auth_passwd</span> <span class="n">lijin01</span> <span class="n">lijin666</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#cat /etc/nginx/auth_passwd </span>
</span></span><span class="line"><span class="cl"><span class="n">lijin01</span><span class="p">:</span><span class="o">$</span><span class="n">apr1</span><span class="o">$.</span><span class="n">D27Ssim</span><span class="o">$</span><span class="n">P9KebeNNrgXWUIbo1fZs40</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mf">2.</span> <span class="err">è®©</span><span class="n">nginx</span> <span class="err">çš„è™šæ‹Ÿä¸»æœºï¼Œæ”¯æŒè¯¥åŠŸèƒ½ï¼Œå¹¶ä¸”ç”±äºæ˜¯å†…ç½‘æ–‡æ¡£ï¼Œè®©ä»–åªåœ¨å†…ç½‘ä¸‹å¯è®¿é—®</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#nginx -t</span>
</span></span><span class="line"><span class="cl"><span class="n">nginx</span><span class="p">:</span> <span class="n">the</span> <span class="n">configuration</span> <span class="n">file</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">conf</span> <span class="n">syntax</span> <span class="n">is</span> <span class="n">ok</span>
</span></span><span class="line"><span class="cl"><span class="n">nginx</span><span class="p">:</span> <span class="n">configuration</span> <span class="n">file</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">conf</span> <span class="n">test</span> <span class="n">is</span> <span class="n">successful</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#cat auth_basic.conf </span>
</span></span><span class="line"><span class="cl"><span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">listen</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">1.8</span><span class="p">:</span><span class="mi">33334</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">charset</span> <span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">server_name</span> <span class="n">_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		    	<span class="n">auth_basic</span> <span class="s2">&#34;please input your account password&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">auth_basic_user_file</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">auth_passwd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">root</span> <span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">auth</span><span class="o">-</span><span class="n">html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">index</span> <span class="n">index</span><span class="o">.</span><span class="n">html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mf">3.</span><span class="err">åˆ›å»ºæµ‹è¯•æ•°æ®</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#mkdir -p /www/auth-html</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#echo &#39;æˆ‘æ˜¯ç”¨äºéªŒè¯è´¦æˆ·å¯†ç çš„ï¼Œä½ ä¸è¾“å…¥å¯†ç ï¼Œåˆ«æƒ³çœ‹åˆ°æˆ‘ï¼ï¼ï¼&#39; &gt; /www/auth-html/index.html</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mf">4.</span><span class="err">å¯åŠ¨æµ‹è¯•è®¿é—®</span>
</span></span><span class="line"><span class="cl"><span class="err">ç”¨</span><span class="n">winå»æµ‹è¯•</span>
</span></span><span class="line"><span class="cl"><span class="mf">10.0</span><span class="o">.</span><span class="mf">0.8</span><span class="p">:</span><span class="mi">33334</span>  <span class="err">ï¼Œè¿™ä¸€æ¬¡éƒ½ä¸æ˜¯æƒé™ä¹‹ç±»çš„é—®é¢˜ï¼Œè€Œæ˜¯</span><span class="n">tcp</span><span class="o">/</span><span class="n">ipéƒ½æ²¡æœ‰å»ºç«‹</span><span class="err">ã€‚ç›´æ¥æç¤ºç½‘ç»œè¿æ¥å¤±è´¥</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">è¿™é‡Œç”±äºæˆ‘ä»¬æ˜¯å­¦ä¹ ç¯å¢ƒï¼Œ</span><span class="n">linuxè™šæ‹Ÿæœºçš„ç½‘æ®µ</span><span class="err">ï¼Œéƒ½æ˜¯</span><span class="n">vmwareæä¾›çš„çº¯å±€åŸŸç½‘</span>
</span></span><span class="line"><span class="cl"><span class="err">åœ¨ä¼ä¸šé‡Œï¼Œä¹Ÿä¼šæœ‰å†…ç½‘ç¯å¢ƒï¼Œä½†æ˜¯æœ‰ç½‘å·¥ç»™ä½ é…ç½®å¥½äº†æ‰€æœ‰çš„ç¯å¢ƒ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">ä½ çš„åŠå…¬ç”µè„‘ï¼Œä¼šæœ‰è¯¥å†…ç½‘çš„</span><span class="n">ip</span><span class="err">ï¼Œå¯ä»¥è®¿é—®åˆ°è¯¥å†…ç½‘ä¸‹çš„èµ„æ–™ï¼ˆéœ€è¦è¿›è¡Œä¸€ç³»åˆ—çš„ç½‘ç»œè½¬å‘è®¾ç½®ï¼‰</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">åªèƒ½åœ¨å†…ç½‘ç¯å¢ƒä¸‹ï¼Œå»è®¿é—®äº†</span>
</span></span><span class="line"><span class="cl"><span class="mi">172</span><span class="err">ï¼Œåªèƒ½æ˜¯</span><span class="n">linuxä¸‹çš„è®¿é—®</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å’±ä»¬ä¸´æ—¶æµ‹è¯•ï¼Œè¿˜æ˜¯å…ˆç”¨windowså»è®¿é—®è¯¥ç«™ç‚¹</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ç†è§£äº†nginxè™šæ‹Ÿä¸»æœºï¼Œç»‘å®šç½‘æ®µå³å¯ï¼Œ</span>
</span></span><span class="line"><span class="cl"><span class="c1"># è¿˜æ˜¯æ”¹ä¸ºï¼Œå…è®¸è®©windowsä¹Ÿå¯ä»¥è®¿é—®ï¼Œä¿®æ”¹ç›‘å¬çš„åœ°å€ï¼Œæ”¾ç½®åˆ°10ç½‘æ®µ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#netstat -tunlp|grep 33334</span>
</span></span><span class="line"><span class="cl"><span class="n">tcp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.8</span><span class="p">:</span><span class="mi">33334</span>          <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="o">*</span>               <span class="n">LISTEN</span>      <span class="mi">7765</span><span class="o">/</span><span class="n">nginx</span><span class="p">:</span> <span class="n">master</span>  
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#cat auth_basic.conf </span>
</span></span><span class="line"><span class="cl"><span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">#listen 172.16.1.8:33334;</span>
</span></span><span class="line"><span class="cl">	<span class="n">listen</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.8</span><span class="p">:</span><span class="mi">33334</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">charset</span> <span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">server_name</span> <span class="n">_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		    	<span class="n">auth_basic</span> <span class="s2">&#34;please input your account password&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">auth_basic_user_file</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">auth_passwd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">root</span> <span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">auth</span><span class="o">-</span><span class="n">html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="n">index</span> <span class="n">index</span><span class="o">.</span><span class="n">html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#netstat -tunlp|grep 33334</span>
</span></span><span class="line"><span class="cl"><span class="n">tcp</span>        <span class="mi">0</span>      <span class="mi">0</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.8</span><span class="p">:</span><span class="mi">33334</span>          <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="o">*</span>               <span class="n">LISTEN</span>      <span class="mi">7765</span><span class="o">/</span><span class="n">nginx</span><span class="p">:</span> <span class="n">master</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ­¤æ—¶ä½ å°±å¯ä»¥åŸºäº10ç½‘æ®µå»è®¿é—®äº†</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/pic/image-20220524111520313.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524111520313"
	
	
></p>
<hr>
<p>åŸºäºieæµè§ˆå™¨å¯ä»¥çœ‹åˆ°ä½ çš„æç¤ºä¿¡æ¯ï¼Œçœ‹ä¸åˆ°ä¹Ÿæ— æ‰€è°“</p>
<p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/pic/image-20220524111553761.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524111553761"
	
	
></p>
<h1 id="nginxé™æµæ¨¡å—">nginxé™æµæ¨¡å—
</h1><blockquote>
<p>1.çŸ¥é“ç”¨æ³•å³å¯ï¼Œç”Ÿäº§ä¸‹çš„é™æµï¼Œæ›´å¤šçš„æ˜¯åç«¯æ¡†æ¶ä¸­é™åˆ¶ï¼Œnginxè¿™é‡Œä¸€èˆ¬ä¸åšï¼Œå¯èƒ½å¯¼è‡´è¯·æ±‚å‡ºé”™ã€‚çŸ¥é“ç”¨æ³•ï¼Œä»¥åçœ‹åˆ°ä¼ä¸šé‡Œåœ¨ç”¨ï¼Œä¼šç»´æŠ¤å³å¯ã€‚</p>
<p>2.ä»¥åŠç†è§£é™æµçš„æ¦‚å¿µã€‚</p>
</blockquote>
<p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/assets/image-20220524114035312.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524114035312"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">è®¡ç®—æœºç¨‹åºï¼Œä¼šç»™ç½‘ç«™å¸¦æ¥æå¤§çš„æ¶æ„æµé‡ï¼Œå¯¼è‡´æœåŠ¡å™¨å‹åŠ›å¤šå¤§ï¼Œä»¥åŠç½‘ç«™æ‰€æœ‰çš„è´Ÿè½½éƒ½ä¼šå¾ˆå¤§
</span></span><span class="line"><span class="cl">ä¾‹å¦‚ï¼š
</span></span><span class="line"><span class="cl">www.taobao.com  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">æœåŠ¡ç«¯
</span></span><span class="line"><span class="cl">nginx è§£æè¿™ç”¨æˆ·çš„è¯·æ±‚
</span></span><span class="line"><span class="cl">tcp/ipè¿æ¥
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">å¤§é‡çš„å®¢æˆ·ç«¯ï¼Œå¤§é‡çš„ipï¼Œå»è®¿é—®æœåŠ¡å™¨ï¼Œå¯¼è‡´æœåŠ¡å™¨å»ºç«‹çš„å¤§é‡çš„tcpè¿æ¥
</span></span><span class="line"><span class="cl">(è¿™äº›å¤§é‡çš„ipéƒ½æ˜¯æ¶æ„ipï¼Œè‚‰é¸¡ä¸€ç±»çš„æœºå™¨ï¼Œè€Œéæ­£å¸¸ç”¨æˆ·çš„ip)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å¯å»ºç«‹çš„è¿æ¥æ—¶65535ä¸ªtcpè¿æ¥
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å…·ä½“nginxé™æµçš„é…ç½®">å…·ä½“nginxé™æµçš„é…ç½®
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">é’ˆå¯¹å®¢æˆ·ç«¯ipåˆ¤æ–­çš„ï¼Œä»¥åŠé’ˆå¯¹è¯·æ±‚è®¿é—®é€Ÿç‡çš„é™åˆ¶æ¨¡å—
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1.å®šä¹‰ä¸€ä¸ªé™è¿°è§„åˆ™
</span></span><span class="line"><span class="cl">å®šä¹‰é™é€ŸåŒºåŸŸï¼Œä¿æŒåœ¨10å­—èŠ‚çš„åŒºåŸŸoneã€‚è¯¥åŒºåŸŸçš„å¹³å‡å¤„ç†è¯·æ±‚æ¯ç§’ä¸èƒ½è¶…è¿‡1ä¸ªã€‚
</span></span><span class="line"><span class="cl">$binary_remote_addrå˜é‡çš„å¤§å°å§‹ç»ˆä¸º4ä¸ªå­—èŠ‚ï¼Œåœ¨64ä½æœºå™¨ä¸Šå§‹ç»ˆå ç”¨64å­—èŠ‚
</span></span><span class="line"><span class="cl">limit_req_zone $binary_remote_addr zone=one:10m rate=1r/s;
</span></span><span class="line"><span class="cl">limit_req_zone $binary_remote_addr zone=two:10m rate=1r/s;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">å‚æ•°è§£é‡Š
</span></span><span class="line"><span class="cl">limit_req_zone      å¸¸ç”¨é™é€Ÿæ¨¡å—
</span></span><span class="line"><span class="cl">binary_remote_addr  åˆ¤å®šæ¡ä»¶ï¼Œè¿œç¨‹çš„å®¢æˆ·ç«¯Ip
</span></span><span class="line"><span class="cl">zone                å®šä¹‰é™é“åŒºåŸŸåç§°ï¼Œå†…å­˜å¤§å°Â·
</span></span><span class="line"><span class="cl">rate                é™é€Ÿè§„åˆ™ï¼Œ1ç§’åªèƒ½1ä¸ªè¯·æ±‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.å¼•ç”¨é™é€Ÿè§„åˆ™
</span></span><span class="line"><span class="cl">limit_reg zone=two burst=5;
</span></span><span class="line"><span class="cl">limit_reg  #ç”¨å“ªä¸€ä¸ªé™é€ŸåŒºåŸŸ
</span></span><span class="line"><span class="cl">burst=5    #ä»¤ç‰Œæ¡¶ï¼Œå¹³å‡æ¯ç§’ä¸è¶…è¿‡1ä¸ªè¯·æ±‚ã€‚å¹¶ä¸”çªå‘ä¸è¶…è¿‡5ä¸ªè¯·æ±‚ã€‚
</span></span><span class="line"><span class="cl">nodelay    #å¦‚æœä¸å¸Œæœ›æ’é˜Ÿå †ç§¯çš„è¯·æ±‚è¿‡å¤šï¼Œå¯ä»¥ç”¨è¿™ä¸ªå‚æ•°ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®é™…é…ç½®</p>
<ul>
<li>
<p>é™é€Ÿè§„åˆ™æ˜¯1ç§’ä¸€ä¸ªè¯·æ±‚</p>
</li>
<li>
<p>æä¾›3ä¸ªVIPç‰¹æ®Šè¯·æ±‚</p>
</li>
<li>
<p>nodelayå‚æ•°ä½œç”¨</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1"># å®šåˆ¶è™šæ‹Ÿä¸»æœºæ–‡ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#cat limit_req.conf </span>
</span></span><span class="line"><span class="cl"><span class="n">limit_req_zone</span> <span class="o">$</span><span class="n">binary_remote_addr</span> <span class="n">zone</span><span class="o">=</span><span class="n">one</span><span class="p">:</span><span class="mi">10</span><span class="n">m</span> <span class="n">rate</span><span class="o">=</span><span class="mi">1</span><span class="n">r</span><span class="o">/</span><span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">listen</span>       <span class="mi">33555</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">server_name</span>  <span class="n">_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">charset</span> <span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">access_log</span> <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">limit_req</span><span class="o">.</span><span class="n">log</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">limit_req</span> <span class="n">zone</span><span class="o">=</span><span class="n">one</span> <span class="n">burst</span><span class="o">=</span><span class="mi">3</span> <span class="n">nodelay</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">root</span>   <span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">limit</span><span class="o">-</span><span class="n">req</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="n">index</span>  <span class="n">index</span><span class="o">.</span><span class="n">html</span> <span class="n">index</span><span class="o">.</span><span class="n">htm</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºæµ‹è¯•æ•°æ®ç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#mkdir -p /www/limit-req</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#echo &#39;æˆ‘æ˜¯é™é€Ÿæ¨¡å—ï¼Œä½ åˆ«å¤ªå¿«ï¼Œå¤ªå¿«ä¸å¥½&#39; &gt; /www/limit-req/index.html</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#nginx -t</span>
</span></span><span class="line"><span class="cl"><span class="n">nginx</span><span class="p">:</span> <span class="n">the</span> <span class="n">configuration</span> <span class="n">file</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">conf</span> <span class="n">syntax</span> <span class="n">is</span> <span class="n">ok</span>
</span></span><span class="line"><span class="cl"><span class="n">nginx</span><span class="p">:</span> <span class="n">configuration</span> <span class="n">file</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">conf</span> <span class="n">test</span> <span class="n">is</span> <span class="n">successful</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#systemctl restart nginx</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/pic/image-20220524115001361.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524115001361"
	
	
></p>
<p>æŸ¥çœ‹é™é€Ÿï¼Œä»¥åŠ3ä¸ªVIPåçš„ä½œç”¨</p>
<p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/pic/image-20220524115310000.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524115310000"
	
	
></p>
<hr>
<p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/assets/image-20220524120154631.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524120154631"
	
	
></p>
<h3 id="nodelayå‚æ•°ä½œç”¨">nodelayå‚æ•°ä½œç”¨
</h3><p>ç”¨æ³•1ï¼Œä¸åŠ nodelayå‚æ•°</p>
<p>è¿™ä¸ªnginxçš„æ„æ€æ˜¯ï¼Œè¯¥è™šæ‹Ÿä¸»æœºï¼Œé™åˆ¶å®¢æˆ·ç«¯ 1ç§’å†…åªèƒ½æœ‰5ä¸ªè¯·æ±‚ï¼Œå…¶ä»–è¯·æ±‚å…¨éƒ¨å»¶è¿Ÿæ’é˜Ÿã€‚è¿™ä¸ªå‚æ•°æœ‰éº»çƒ¦ï¼Œåˆ«ç”¨ï¼Œå¯èƒ½å¯¼è‡´å‡ºç°å¤§é—®é¢˜ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#cat  /etc/nginx/conf.d/limit_req.conf </span>
</span></span><span class="line"><span class="cl"><span class="n">limit_req_zone</span> <span class="o">$</span><span class="n">binary_remote_addr</span> <span class="n">zone</span><span class="o">=</span><span class="n">one</span><span class="p">:</span><span class="mi">10</span><span class="n">m</span> <span class="n">rate</span><span class="o">=</span><span class="mi">5</span><span class="n">r</span><span class="o">/</span><span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">listen</span>       <span class="mi">33555</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">server_name</span>  <span class="n">_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">charset</span> <span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">access_log</span> <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">limit_req</span><span class="o">.</span><span class="n">log</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">limit_req</span> <span class="n">zone</span><span class="o">=</span><span class="n">one</span> <span class="n">burst</span><span class="o">=</span><span class="mi">3</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">root</span>   <span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">limit</span><span class="o">-</span><span class="n">req</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl">        <span class="n">index</span>  <span class="n">index</span><span class="o">.</span><span class="n">html</span> <span class="n">index</span><span class="o">.</span><span class="n">htm</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”¨æ³•2ï¼Œæ·»åŠ nodelayå‚æ•°</p>
<p>è¯·æ±‚ä¸æ’é˜Ÿï¼Œé™é€Ÿæ˜¯å‡ ä¸ªå°±å‡ ä¸ªï¼Œè¶…è¿‡å°±ç›´æ¥503æ‹’ç»ï¼Œä»¥åŠè®¾ç½®äº†burstç‰¹æ®Šè¯·æ±‚ã€‚</p>
<h1 id="å†…ç½®å˜é‡">å†…ç½®å˜é‡
</h1><p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/pic/image-20220524143328502.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524143328502"
	
	
></p>
<p>å®˜æ–¹ç½‘å€ï¼š<a class="link" href="https://nginx.org/en/docs/varindex.html"  target="_blank" rel="noopener"
    >Alphabetical index of variables (nginx.org)</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">master</span><span class="o">-</span><span class="mi">61</span> <span class="o">~</span><span class="p">]</span><span class="c1">#cat vars.txt </span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">args</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">query_string</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">arg_NAME</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">is_args</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">uri</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">document_uri</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">document_root</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">host</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">hostname</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">https</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">binary_remote_addr</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">body_bytes_sent</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">bytes_sent</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">connection</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">connection_requests</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">content_length</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">content_type</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">cookie_name</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">limit_rate</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">msec</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">nginx_version</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">pid</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">pipe</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">proxy_protocol_addr</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">realpath_root</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">remote_addr</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">remote_port</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">remote_user</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">request</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">request_body</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">request_body_file</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">request_completion</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">request_filename</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">request_length</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">request_method</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">request_time</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">request_uri</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">scheme</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">server_addr</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">server_name</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">server_port</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">server_protocol</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">status</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">time_iso8601</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">time_local</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">cookie_NAME</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">http_NAME</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">http_cookie</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">http_post</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">http_referer</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">http_user_agent</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">http_x_forwarded_for</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">sent_http_NAME</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">sent_http_cache_control</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">sent_http_connection</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">sent_http_content_type</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">sent_http_keep_alive</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">sent_http_last_modified</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">sent_http_location</span>
</span></span><span class="line"><span class="cl"><span class="n">echo</span> <span class="o">$</span><span class="n">sent_http_transfer_encoding</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="nginxå¼€å¯ç¬¬ä¸‰æ–¹æ¨¡å—">nginxå¼€å¯ç¬¬ä¸‰æ–¹æ¨¡å—
</h1><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1.nginxè£…å¥½ä¹‹åï¼Œæƒ³æ·»åŠ é¢å¤–çš„æ¨¡å—ï¼Œåªèƒ½é‡æ–°ç¼–è¯‘ï¼Œæ·»åŠ è¿™ä¸ªæ¨¡å—ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2. nginxçš„ç¬¬ä¸‰æ–¹æ¨¡å— echoæ¨¡å—ï¼Œç”¨äºæ‰“å°nginxä¸­æ‰€æœ‰å˜é‡çš„ä¿¡æ¯ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">å…ˆçœ‹çœ‹ä¸€ä¸ªä¸æ”¯æŒechoæ¨¡å—çš„ï¼Œä½¿ç”¨è¯¥è¯­æ³•ä»€ä¹ˆæ ·
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç¼–è¯‘å®‰è£…nginxæ·»åŠ ç¬¬ä¸‰æ–¹æ¨¡å—">ç¼–è¯‘å®‰è£…nginxï¼Œæ·»åŠ ç¬¬ä¸‰æ–¹æ¨¡å—
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1"># 1.é‡æ–°ä¸‹è½½å®‰è£…nginxï¼Œè®¾ç½®æ–°çš„ nginxå‘½ä»¤</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">gcc</span><span class="o">-</span><span class="n">c</span><span class="o">++</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">pcre</span> <span class="n">pcre</span><span class="o">-</span><span class="n">devel</span>
</span></span><span class="line"><span class="cl"><span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">zlib</span> <span class="n">zlib</span><span class="o">-</span><span class="n">devel</span>
</span></span><span class="line"><span class="cl"><span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">openssl</span> <span class="n">openssl</span><span class="o">-</span><span class="n">devel</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 3.å‡†å¤‡å¥½nginxç¼–è¯‘ç¯å¢ƒ</span>
</span></span><span class="line"><span class="cl"><span class="n">yum</span> <span class="n">install</span> <span class="n">pcre</span> <span class="n">pcre</span><span class="o">-</span><span class="n">devel</span> <span class="n">openssl</span> <span class="n">openssl</span><span class="o">-</span><span class="n">devel</span>  <span class="n">zlib</span> <span class="n">zlib</span><span class="o">-</span><span class="n">devel</span> <span class="n">gzip</span>  <span class="n">gcc</span> <span class="n">gcc</span><span class="o">-</span><span class="n">c</span><span class="o">++</span> <span class="n">make</span> <span class="n">wget</span> <span class="n">httpd</span><span class="o">-</span><span class="n">tools</span> <span class="n">vim</span> <span class="o">-</span><span class="n">y</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># é™ä½nginxè¿è¡Œæ—¶çš„æƒé™ï¼Œä½†æ˜¯ä¹Ÿè¦æ³¨æ„ï¼Œä½ çš„ç½‘é¡µæ ¹ç›®å½•ï¼Œæ˜¯å¦ç»™è¯¥ç”¨æˆ·è®¾ç½®äº†è¯»å†™æƒé™ã€‚</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">groupadd</span> <span class="n">www</span> <span class="o">-</span><span class="n">g</span> <span class="mi">666</span>
</span></span><span class="line"><span class="cl"><span class="n">useradd</span> <span class="n">www</span> <span class="o">-</span><span class="n">u</span> <span class="mi">666</span> <span class="o">-</span><span class="n">g</span> <span class="mi">666</span> <span class="o">-</span><span class="n">M</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">nologin</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 4.å¼€å§‹ä¸‹è½½echoæ¨¡å—æºç ï¼Œç„¶åç¼–è¯‘ä¸”å®‰è£…ï¼Œæ·»åŠ ç»™nginx</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä¸‹è½½æºç nginxï¼Œè¿›è¡Œç¼–è¯‘ï¼Œæ·»åŠ ç¬¬ä¸‰æ–¹æ¨¡å—çš„ä»£ç å³å¯</span>
</span></span><span class="line"><span class="cl"><span class="n">cd</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span>
</span></span><span class="line"><span class="cl"><span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">nginx</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">download</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mf">1.19</span><span class="o">.</span><span class="mf">0.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</span></span><span class="line"><span class="cl"><span class="n">tar</span> <span class="o">-</span><span class="n">zxf</span> <span class="n">nginx</span><span class="o">-</span><span class="mf">1.19</span><span class="o">.</span><span class="mf">0.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="p">]</span><span class="c1">#cd nginx-1.19.0/</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mf">1.19</span><span class="o">.</span><span class="mi">0</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mf">1.19</span><span class="o">.</span><span class="mi">0</span><span class="p">]</span><span class="c1">#ls</span>
</span></span><span class="line"><span class="cl"><span class="n">auto</span>  <span class="n">CHANGES</span>  <span class="n">CHANGES</span><span class="o">.</span><span class="n">ru</span>  <span class="n">conf</span>  <span class="n">configure</span>  <span class="n">contrib</span>  <span class="n">html</span>  <span class="n">LICENSE</span>  <span class="n">man</span>  <span class="n">README</span>  <span class="n">src</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 5.æ­¤æ—¶å¯ä»¥ç¼–è¯‘å®‰è£…è¿™ä¸ªnginxäº†ï¼Œé‡ç‚¹å°±åœ¨è¿™</span>
</span></span><span class="line"><span class="cl"><span class="c1">#é€šè¿‡ç¼–è¯‘å‚æ•° --add-moduleæ·»åŠ ç¬¬ä¸‰æ–¹çš„æ¨¡å—ï¼Œç»™nginx</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="p">]</span><span class="c1">#cd /opt/nginx-1.19.0/</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mf">1.19</span><span class="o">.</span><span class="mi">0</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mf">1.19</span><span class="o">.</span><span class="mi">0</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ç¼–è¯‘ä¸‰éƒ¨æ›²ï¼Œç¬¬ä¸€æ›²ï¼Œè®¾ç½®ç¼–è¯‘å‚æ•°</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mf">1.19</span><span class="o">.</span><span class="mi">0</span><span class="p">]</span><span class="c1">#ls</span>
</span></span><span class="line"><span class="cl"><span class="n">auto</span>  <span class="n">CHANGES</span>  <span class="n">CHANGES</span><span class="o">.</span><span class="n">ru</span>  <span class="n">conf</span>  <span class="n">configure</span>  <span class="n">contrib</span>  <span class="n">html</span>  <span class="n">LICENSE</span>  <span class="n">man</span>  <span class="n">README</span>  <span class="n">src</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mf">1.19</span><span class="o">.</span><span class="mi">0</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">./</span><span class="n">configure</span> \
</span></span><span class="line"><span class="cl"><span class="o">--</span><span class="n">user</span><span class="o">=</span><span class="n">www</span> \
</span></span><span class="line"><span class="cl"><span class="o">--</span><span class="n">group</span><span class="o">=</span><span class="n">www</span> \
</span></span><span class="line"><span class="cl"><span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">19</span><span class="o">-</span><span class="mi">0</span> \
</span></span><span class="line"><span class="cl"><span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_stub_status_module</span> \
</span></span><span class="line"><span class="cl"><span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_ssl_module</span> \
</span></span><span class="line"><span class="cl"><span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">pcre</span> \
</span></span><span class="line"><span class="cl"><span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">echo</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ç¬¬äºŒæ›²ï¼Œç¬¬ä¸‰æ›²</span>
</span></span><span class="line"><span class="cl"><span class="n">make</span> <span class="o">&amp;&amp;</span> <span class="n">make</span> <span class="n">install</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä½ å¿…é¡»å§ä¸Šé¢çš„linuxåŸºç¡€ç¼–è¯‘ä¾èµ–ç¯å¢ƒç»™è£…å¥½ï¼Œå¦åˆ™è¿™é‡Œå¯èƒ½ä¼šå‡ºé”™ã€‚ã€‚</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ç¼–è¯‘ç»“æŸåï¼ŒæŸ¥çœ‹ç”Ÿæˆçš„äºŒè¿›åˆ¶å‘½ä»¤ï¼Œæ˜¯å¦æ”¯æŒäº†echoæ¨¡å—</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ç¼–è¯‘ç»“æŸåï¼Œnginxçš„æºç ç›®å½•å°±å¯ä»¥åˆ é™¤äº†ã€‚ </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æŸ¥çœ‹æœ€ç»ˆçš„nginxå®‰è£…ç›®å½•</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">19</span><span class="o">-</span><span class="mi">0</span><span class="p">]</span><span class="c1">#./sbin/nginx -v</span>
</span></span><span class="line"><span class="cl"><span class="n">nginx</span> <span class="n">version</span><span class="p">:</span> <span class="n">nginx</span><span class="o">/</span><span class="mf">1.19</span><span class="o">.</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">19</span><span class="o">-</span><span class="mi">0</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">19</span><span class="o">-</span><span class="mi">0</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">19</span><span class="o">-</span><span class="mi">0</span><span class="p">]</span><span class="c1">#./sbin/nginx -V</span>
</span></span><span class="line"><span class="cl"><span class="n">nginx</span> <span class="n">version</span><span class="p">:</span> <span class="n">nginx</span><span class="o">/</span><span class="mf">1.19</span><span class="o">.</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">built</span> <span class="n">by</span> <span class="n">gcc</span> <span class="mf">4.8</span><span class="o">.</span><span class="mi">5</span> <span class="mi">20150623</span> <span class="p">(</span><span class="n">Red</span> <span class="n">Hat</span> <span class="mf">4.8</span><span class="o">.</span><span class="mi">5</span><span class="o">-</span><span class="mi">44</span><span class="p">)</span> <span class="p">(</span><span class="n">GCC</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="n">built</span> <span class="n">with</span> <span class="n">OpenSSL</span> <span class="mf">1.0</span><span class="o">.</span><span class="mi">2</span><span class="n">k</span><span class="o">-</span><span class="n">fips</span>  <span class="mi">26</span> <span class="n">Jan</span> <span class="mi">2017</span>
</span></span><span class="line"><span class="cl"><span class="n">TLS</span> <span class="n">SNI</span> <span class="n">support</span> <span class="n">enabled</span>
</span></span><span class="line"><span class="cl"><span class="n">configure</span> <span class="n">arguments</span><span class="p">:</span> <span class="o">--</span><span class="n">user</span><span class="o">=</span><span class="n">www</span> <span class="o">--</span><span class="n">group</span><span class="o">=</span><span class="n">www</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">19</span><span class="o">-</span><span class="mi">0</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_stub_status_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_ssl_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">pcre</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">echo</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å‘ç°è¯¥nginxæ˜¯æ”¯æŒechoæ¨¡å—çš„</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä¸‹è½½echoæ¨¡å—çš„æºä»£ç </span>
</span></span><span class="line"><span class="cl"><span class="c1"># é€šè¿‡ä¸ªgitå‘½ä»¤ï¼Œå»ä¸‹è½½githubä»£ç ä»“åº“ä¸­çš„æºç ç›®å½•</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">yum</span> <span class="n">install</span> <span class="n">git</span> <span class="o">-</span><span class="n">y</span> <span class="c1"># </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">cd</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ç”±äºæŸäº›ä¸å¯æè¿°çš„å› ç´ ï¼Œä»£ç å¯èƒ½ä¸‹è½½ä¸äº†ã€‚ã€‚</span>
</span></span><span class="line"><span class="cl"><span class="c1"># å»windowsä¸­ä¸‹å¥½äº†ï¼Œå‘ç»™linux</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">openresty</span><span class="o">/</span><span class="n">echo</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span><span class="o">.</span><span class="n">git</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">ä¸‹è½½å®Œæ¯•</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="p">]</span><span class="c1">#git clone https://github.com/openresty/echo-nginx-module.git</span>
</span></span><span class="line"><span class="cl"><span class="n">Cloning</span> <span class="n">into</span> <span class="s1">&#39;echo-nginx-module&#39;</span><span class="o">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">remote</span><span class="p">:</span> <span class="n">Enumerating</span> <span class="n">objects</span><span class="p">:</span> <span class="mi">3039</span><span class="p">,</span> <span class="n">done</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">remote</span><span class="p">:</span> <span class="n">Counting</span> <span class="n">objects</span><span class="p">:</span> <span class="mi">100</span><span class="o">%</span> <span class="p">(</span><span class="mi">21</span><span class="o">/</span><span class="mi">21</span><span class="p">),</span> <span class="n">done</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">remote</span><span class="p">:</span> <span class="n">Compressing</span> <span class="n">objects</span><span class="p">:</span> <span class="mi">100</span><span class="o">%</span> <span class="p">(</span><span class="mi">16</span><span class="o">/</span><span class="mi">16</span><span class="p">),</span> <span class="n">done</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">remote</span><span class="p">:</span> <span class="n">Total</span> <span class="mi">3039</span> <span class="p">(</span><span class="n">delta</span> <span class="mi">7</span><span class="p">),</span> <span class="n">reused</span> <span class="mi">15</span> <span class="p">(</span><span class="n">delta</span> <span class="mi">5</span><span class="p">),</span> <span class="n">pack</span><span class="o">-</span><span class="n">reused</span> <span class="mi">3018</span>
</span></span><span class="line"><span class="cl"><span class="n">Receiving</span> <span class="n">objects</span><span class="p">:</span> <span class="mi">100</span><span class="o">%</span> <span class="p">(</span><span class="mi">3039</span><span class="o">/</span><span class="mi">3039</span><span class="p">),</span> <span class="mf">1.17</span> <span class="n">MiB</span> <span class="o">|</span> <span class="mf">1.44</span> <span class="n">MiB</span><span class="o">/</span><span class="n">s</span><span class="p">,</span> <span class="n">done</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">Resolving</span> <span class="n">deltas</span><span class="p">:</span> <span class="mi">100</span><span class="o">%</span> <span class="p">(</span><span class="mi">1631</span><span class="o">/</span><span class="mi">1631</span><span class="p">),</span> <span class="n">done</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">æŸ¥çœ‹</span><span class="n">echoæ¨¡å—çš„æºä»£ç å†…å®¹</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">opt</span><span class="p">]</span><span class="c1">#ls /opt/echo-nginx-module/</span>
</span></span><span class="line"><span class="cl"><span class="n">config</span>  <span class="n">LICENSE</span>  <span class="n">README</span><span class="o">.</span><span class="n">markdown</span>  <span class="n">src</span>  <span class="n">t</span>  <span class="n">util</span>  <span class="n">valgrind</span><span class="o">.</span><span class="n">suppress</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ä½¿ç”¨è¯¥echoæ¨¡å—å¯ä»¥æ‰“å°è°ƒè¯•nginxçš„å˜é‡ç­‰ä¿¡æ¯">ä½¿ç”¨è¯¥echoæ¨¡å—ï¼Œå¯ä»¥æ‰“å°ï¼Œè°ƒè¯•nginxçš„å˜é‡ç­‰ä¿¡æ¯
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">åˆ›å»ºè™šæ‹Ÿä¸»æœºäº†ï¼Œç»™ä½ ç¼–è¯‘çš„nginxåˆ›å»ºé…ç½®æ–‡ä»¶äº†
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ä¼˜åŒ–é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼Œå»é™¤æ— ç”¨çš„å†…å®¹
</span></span><span class="line"><span class="cl">åˆ©ç”¨includeè¯­æ³•ï¼Œå¯¼å…¥è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf]#cat nginx.conf
</span></span><span class="line"><span class="cl">worker_processes  1;
</span></span><span class="line"><span class="cl">events {
</span></span><span class="line"><span class="cl">    worker_connections  1024;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">http {
</span></span><span class="line"><span class="cl">    include       mime.types;
</span></span><span class="line"><span class="cl">    default_type  application/octet-stream;
</span></span><span class="line"><span class="cl">    sendfile        on;
</span></span><span class="line"><span class="cl">    keepalive_timeout  65;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    # è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä¼˜åŒ–
</span></span><span class="line"><span class="cl">    include /opt/nginx-1-19-0/conf/extra/*.conf;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># åˆ›å»ºå­é…ç½®æ–‡ä»¶
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf]#mkdir extra
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf]#
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf]#cd extra/
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#vim test-echo.conf
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#cat test-echo.conf 
</span></span><span class="line"><span class="cl">server {
</span></span><span class="line"><span class="cl">    listen       11444;
</span></span><span class="line"><span class="cl">    server_name  localhost;
</span></span><span class="line"><span class="cl">    charset utf-8;
</span></span><span class="line"><span class="cl">    location / {
</span></span><span class="line"><span class="cl">       echo &#34;lijinit.cn welcome you!&#34;;
</span></span><span class="line"><span class="cl">       echo $uri;
</span></span><span class="line"><span class="cl">       echo $document_uri;
</span></span><span class="line"><span class="cl">       echo $remote_addr;
</span></span><span class="line"><span class="cl">       echo $remote_port;
</span></span><span class="line"><span class="cl">       echo $http_user_agent;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œå¯åŠ¨nginx
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#/opt/nginx-1-19-0/sbin/nginx -t
</span></span><span class="line"><span class="cl">nginx: the configuration file /opt/nginx-1-19-0/conf/nginx.conf syntax is ok
</span></span><span class="line"><span class="cl">nginx: configuration file /opt/nginx-1-19-0/conf/nginx.conf test is successful
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#/opt/nginx-1-19-0/sbin/nginx 
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#netstat -tunlp|grep 11444
</span></span><span class="line"><span class="cl">tcp        0      0 0.0.0.0:11444           0.0.0.0:*               LISTEN      11945/nginx: master 
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#
</span></span></code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•è®¿é—®ï¼Œè¯¥echoæ¨¡å—æ˜¯å¦æ­£ç¡®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ä½ å¦‚æœç”¨æµè§ˆå™¨å»è®¿é—®ï¼Œnginxé»˜è®¤ä¸ä¼šè§£æè¿™ä¸ªechoæ‰“å°çš„å†…å®¹ï¼Œä¼šæä¾›ä¸‹è½½åŠŸèƒ½ï¼Œè®©ä½ æŸ¥çœ‹è¿™äº›å­—ç¬¦ä¸²
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">åœ¨linuxå®¢æˆ·ç«¯ä¸­ï¼ŒæŸ¥çœ‹è¿™ä¸ªechoæ‰“å°çš„å†…ç½®å˜é‡çš„ä¿¡æ¯
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">è‡³æ­¤ä¹Ÿè¯æ˜äº†ï¼Œæˆ‘ä»¬ç¼–è¯‘ç°çŠ¶çš„nginxï¼Œæ”¯æŒechoæ¨¡å—ã€‚äº†ã€‚ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="location-å®æˆ˜">location å®æˆ˜
</h1><p>locationæ˜¯nginxçš„æ ¸å¿ƒé‡è¦åŠŸèƒ½,å¯ä»¥è®¾ç½®ç½‘ç«™çš„è®¿é—®è·¯å¾„,ä¸€ä¸ªweb serverä¼šæœ‰å¤šä¸ªè·¯å¾„,é‚£ä¹ˆlocationå°±å¾—è®¾ç½®å¤šä¸ªã€‚</p>
<p>Nginxçš„locaitonä½œç”¨æ˜¯æ ¹æ®ç”¨æˆ·è¯·æ±‚çš„URlä¸åŒ,æ¥æ‰§è¡Œä¸åŒçš„åº”ç”¨ã€‚</p>
<p>é’ˆå¯¹ç”¨æˆ·è¯·æ±‚çš„ç½‘ç«™URLè¿›è¡ŒåŒ¹é…,åŒ¹é…æˆåŠŸåè¿›è¡Œå¯¹åº”çš„æ“ä½œã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£
<a class="link" href="https://nginx.org/en/docs/http/ngx_http_core_module.html#loeation"  target="_blank" rel="noopener"
    >Module ngx_http_core_module (nginx.org)</a></p>
<p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/pic/image-20220524145055085.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524145055085"
	
	
>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1. å…ˆå­¦æ‡‚è¯­æ³•ï¼Œæ¸…æ™°locaitonçš„åŒ¹é…è§„åˆ™
</span></span><span class="line"><span class="cl">Syntax:	location [ = | ~ | ~* | ^~ ] uri { ... }
</span></span><span class="line"><span class="cl">location @name { ... }
</span></span><span class="line"><span class="cl">Default:	â€”
</span></span><span class="line"><span class="cl">Context:	server, location
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Syntax:    location [ = | ~ | ~* | ^~ ] uri { ... }
</span></span><span class="line"><span class="cl">location @name { ... }
</span></span><span class="line"><span class="cl">Default:    â€”
</span></span><span class="line"><span class="cl">Context:    server, location
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">å®˜ç½‘ç”¨æ³•
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location = / {
</span></span><span class="line"><span class="cl">    [ configuration A ]
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location / {
</span></span><span class="line"><span class="cl">    [ configuration B ]
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location /documents/ {
</span></span><span class="line"><span class="cl">    [ configuration C ]
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location ^~ /images/ {
</span></span><span class="line"><span class="cl">    [ configuration D ]
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">location ~* \.(gif|jpg|jpeg)$ {
</span></span><span class="line"><span class="cl">    [ configuration E ]
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">æµ‹è¯•ç”¨æ³•ï¼Œå¦‚æœå®šä¹‰äº†å¦‚ä¸Šçš„5ä¸ªlocationï¼Œåˆ™
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">http://lijinit.cn/                                                     åŒ¹é…A
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">http://lijinit.cn/hello                                          åŒ¹é…B
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">http://lijinit.cn/documents/hello                        åŒ¹é…C
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">http://lijinit.cn/images/è‘«èŠ¦å¨ƒ.gif                    åŒ¹é…D
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">http://lijinit.cn/documents/å¾·ç›è¥¿äºš.gif           åŒ¹é…E
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2. åœ¨åç»­çš„phpç½‘ç«™éƒ¨ç½²ï¼Œpythonç½‘ç«™ï¼Œjavaç½‘ç«™éƒ¨ç½²å®è·µé…ç½®ä¸­ï¼Œåå¤ç”¨åˆ°locationè¯­æ³•ï¼Œå³å¯åŠ æ·±ç†è§£ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/assets/image-20220524155053571.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524155053571"
	
	
></p>
<h2 id="2locationè¯­æ³•ä¼˜å…ˆçº§">2.locationè¯­æ³•ä¼˜å…ˆçº§
</h2><p>ä¼˜å…ˆçº§ä»é«˜åˆ°ä½</p>
<blockquote>
<p>æœ‰ç¬¦å·çš„ï¼Œæ‰æœ‰ä¼˜å…ˆçº§ï¼Œ</p>
<p>å¦åˆ™éƒ½å¾€åæ’</p>
</blockquote>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>åŒ¹é…ç¬¦</th>
<th>åŒ¹é…è§„åˆ™</th>
<th>ä¼˜å…ˆçº§</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>å®šä¹‰ URI å’Œä½ç½®çš„ç²¾ç¡®åŒ¹é…ã€‚</td>
<td>1</td>
</tr>
<tr>
<td>^~</td>
<td>ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å¤´ï¼Œä¸æ£€æŸ¥æ­£åˆ™(ï¼ŒåŒºåˆ†å¤§å°å†™)</td>
<td>2</td>
</tr>
<tr>
<td>~</td>
<td>åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é… ï¼ˆè®¤è¯†æ­£åˆ™ï¼ŒåŒºåˆ†urlå¤§å°å†™ï¼‰</td>
<td>3</td>
</tr>
<tr>
<td>~*</td>
<td>ä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…ï¼ˆè®¤è¯†æ­£åˆ™ï¼Œä¸åŒºåˆ†urlå¤§å°å†™ï¼‰</td>
<td>4</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table></div>
<p>å››ä¸ªè§„åˆ™</p>
<h2 id="ç”Ÿæˆå…·ä½“locationçš„åŒ¹é…è§„åˆ™">ç”Ÿæˆå…·ä½“locationçš„åŒ¹é…è§„åˆ™
</h2><p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/assets/image-20220524155648916.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524155648916"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># é…ç½®æ–‡ä»¶å¦‚ä¸‹
</span></span><span class="line"><span class="cl">server {
</span></span><span class="line"><span class="cl">    listen 22333;
</span></span><span class="line"><span class="cl">    server_name _;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    # æœ€ä½çº§åŒ¹é…ï¼Œä¸ç¬¦åˆå…¶ä»–locaitonå°±æ¥è¿™
</span></span><span class="line"><span class="cl">    # å±äºé€šç”¨urlè§„åˆ™
</span></span><span class="line"><span class="cl">    location / {
</span></span><span class="line"><span class="cl">        return 200 &#34;location /  \n&#34;;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    # ä¼˜å…ˆçº§æœ€é«˜ï¼Œç­‰äºå·åé¢å¯ä»¥æŒ‡å®šurl
</span></span><span class="line"><span class="cl">    location = / {
</span></span><span class="line"><span class="cl">        return 200 &#34;location = /  \n&#34;;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    #ä»¥/documents/å¼€å¤´çš„urlï¼Œæ¥è¿™é‡Œï¼Œå¦‚ç¬¦åˆå…¶ä»–locaitonï¼Œåˆ™ä»¥å…¶ä»–ä¼˜å…ˆ
</span></span><span class="line"><span class="cl">    location /documents/ {
</span></span><span class="line"><span class="cl">        return 200 &#34;location /documents/ \n&#34;;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    #åŒ¹é…ä»»ä½•ä»¥/images/å¼€å¤´çš„è¯·æ±‚ï¼Œä¸åŒ¹é…æ­£åˆ™
</span></span><span class="line"><span class="cl">    location ^~ /images/ {
</span></span><span class="line"><span class="cl">        return 200 &#34;location ^~ /images/  \n&#34;;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    #åŒ¹é…ä»»ä½•ä»¥.gifç»“å°¾çš„è¯·æ±‚ï¼Œæ”¯æŒæ­£åˆ™
</span></span><span class="line"><span class="cl">    location ~* \.(gif|jpg|jpeg)$ {
</span></span><span class="line"><span class="cl">        return 200  &#34;location ~* \.(gif|jpg|jpeg) \n&#34;;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    access_log off;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="è¿›è¡Œurlçš„è®¾ç½®è®¿é—®æŸ¥çœ‹ç»“æœ">è¿›è¡Œurlçš„è®¾ç½®è®¿é—®ï¼ŒæŸ¥çœ‹ç»“æœ
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[root@master-61 ~]## ç²¾ç¡®åŒ¹é…
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333
</span></span><span class="line"><span class="cl">location = /  
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/
</span></span><span class="line"><span class="cl">location = /  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[root@master-61 ~]## æœ€ä½çº§åŒ¹é…ï¼Œæ²¡æœ‰locationåŒ¹é…ä¸Šï¼Œå°±æ‰¾é»˜è®¤çš„ location / {}
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/xixixixixixi
</span></span><span class="line"><span class="cl">location /  
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/hehehehehe
</span></span><span class="line"><span class="cl">location /  
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/jinitaimei
</span></span><span class="line"><span class="cl">location /  
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/å¾‹å¸ˆå‡½æˆ‘æ˜¯è·‘ä¸æ‰äº†
</span></span><span class="line"><span class="cl">location /  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[root@master-61 ~]## æŒ‡å®šurlçš„åŒ¹é…
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]## æŒ‡å®šurlçš„åŒ¹é…ï¼ŒæŒ‡å®šä»¥/documents/å¼€å¤´çš„url
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]## å¾—ä½ å®¢æˆ·ç«¯urlï¼Œä»¥/documnets/å¼€å¤´æ‰è¡Œ
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/documents
</span></span><span class="line"><span class="cl">location /  
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]## ä½ å†™çš„è¿™ä¸ªurlï¼Œæ‹¿åˆ°çš„æ˜¯  $url   /documents   
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]## ä½ å†™çš„è¿™ä¸ªurlï¼Œæ‹¿åˆ°çš„æ˜¯  $url   /documents   å¿…é¡»æ˜¯ /documents/æ‰è¡Œï¼Œ
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/documents/
</span></span><span class="line"><span class="cl">location /documents/ 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/documents/xixixixi
</span></span><span class="line"><span class="cl">location /documents/ 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/documents/xixixihahahahahah
</span></span><span class="line"><span class="cl">location /documents/ 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/documents/xixixihahahahahahåŸºå°¼å¤ªç¾
</span></span><span class="line"><span class="cl">location /documents/ 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># åŒ¹é…ï¼Œç¬¬äºŒä¼˜å…ˆçº§çš„ location  ^~ åŒ¹é…æŒ‡å®šçš„urlæ˜¯ /images/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[root@master-61 ~]## ç»§ç»­æŒ‡å®šurlï¼Œä¹Ÿç­‰äºç²¾ç¡®åŒ¹é…å­—ç¬¦ä¸² ï¼Œå¿…é¡»æ˜¯ä»¥ /images/
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/images/
</span></span><span class="line"><span class="cl">location ^~ /images/  
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/IMAGES/
</span></span><span class="line"><span class="cl">location /  
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/images/
</span></span><span class="line"><span class="cl">location ^~ /images/  
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/images/xixixix
</span></span><span class="line"><span class="cl">location ^~ /images/  
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/images/xixixixhahahaha
</span></span><span class="line"><span class="cl">location ^~ /images/  
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/image/xixixixhahahaha
</span></span><span class="line"><span class="cl">location /  
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]## å¦‚ä½•è¯æ˜å®ƒçš„é«˜ä¼˜å…ˆçº§ï¼Œæ’ç¬¬äºŒ
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/images/ä¸¤å¹´åŠç»ƒä¹ ç”Ÿ.jpg
</span></span><span class="line"><span class="cl">location ^~ /images/  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/asdasdasdasdasdasd/asdasdasd/caixukun.jpg
</span></span><span class="line"><span class="cl">location ~* \.(gif|jpg|jpeg) 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]##   $url  /asdasdasdasdasdasd/asdasdasd/caixukun.jpg
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/asdasdasdasdasdasd/asdasdasd/caixukun.jpg
</span></span><span class="line"><span class="cl">location ~* \.(gif|jpg|jpeg) 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]## æµ‹è¯•ä¸åŒºåˆ†å¤§å°å†™
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/asdasdasdasdasdasd/asdasdasd/caixukun.JPG
</span></span><span class="line"><span class="cl">location ~* \.(gif|jpg|jpeg) 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/asdasdasdasdasdasd/asdasdasd/caixukun.gif
</span></span><span class="line"><span class="cl">location ~* \.(gif|jpg|jpeg) 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/asdasdasdasdasdasd/asdasdasd/caixukun.GIf
</span></span><span class="line"><span class="cl">location ~* \.(gif|jpg|jpeg) 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/asdasdasdasdasdasd/asdasdasd/caixukun.jpeg
</span></span><span class="line"><span class="cl">location ~* \.(gif|jpg|jpeg) 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/asdasdasdasdasdasd/asdasdasd/caixukun.jpeG
</span></span><span class="line"><span class="cl">location ~* \.(gif|jpg|jpeg) 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/asdasdasdasdasdasd/asdasdasd/caixukun.jpEG
</span></span><span class="line"><span class="cl">location ~* \.(gif|jpg|jpeg) 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#curl 10.0.0.8:22333/asxixixixixix/asdasd/caixukun.jpEG
</span></span><span class="line"><span class="cl">location ~* \.(gif|jpg|jpeg) 
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]#
</span></span><span class="line"><span class="cl">[root@master-61 ~]## çœ‹åˆ°è¿™ï¼Œç†è§£ ä¸åŒºåˆ†å¤§å°å†™ï¼Œä»¥jpg,gif,jpegç»“å°¾çš„url
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#  ~* æ’åœ¨è€å››ï¼Œä¼˜å…ˆçº§ç®—ä½ï¼Œ
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">]## 1. =   2.  ^~ ä¸æ£€æŸ¥æ­£åˆ™ï¼Œä¸”åŒºåˆ†å¤§å°å†™çš„urlåŒ¹é…
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]## 3.  ~ åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]## 4. ~*  ä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…
</span></span><span class="line"><span class="cl">[root@web-8 /opt/nginx-1-19-0/conf/extra]#
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å®é™…å·¥ä½œåº”ç”¨">å®é™…å·¥ä½œåº”ç”¨
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">å®é™…å·¥ä½œä¸­ï¼Œä¼šæœ‰è‡³å°‘3ä¸ªåŒ¹é…è§„åˆ™å¦‚ä¸‹ï¼Œéœ€è¦åŒå­¦ä»¬å­¦ä¹ äº†nginxè´Ÿè½½å‡è¡¡å³å¯ç†è§£ã€‚ä»¥åŠå…·ä½“çš„ç½‘ç«™éƒ¨ç½²å®è·µã€‚
</span></span><span class="line"><span class="cl">1.å¿…é€‰è§„åˆ™ï¼Œè®¾ç½®åå‘ä»£ç†ï¼Œå®˜ç½‘ä¹Ÿæ¨èè¯¥ç”¨æ³•ï¼Œå¯ä»¥åŠ é€Ÿå¤„ç†ï¼Œå› ä¸ºé¦–é¡µä¼šé¢‘ç¹è¢«è®¿é—®
</span></span><span class="line"><span class="cl">locationä¸€èˆ¬ç›´æ¥è®¾ç½®åå‘ä»£ç†ï¼Œè½¬å‘ç»™åç«¯åº”ç”¨æœåŠ¡å™¨ï¼Œæˆ–è€…æ˜¯é™æ€é¡µï¼š
</span></span><span class="line"><span class="cl">locatlon =/ {
</span></span><span class="line"><span class="cl">	proxy_pass http://lijinit.cn;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.é™æ€æ–‡ä»¶å¤„ç†ã€‚nginxå¼ºé¡¹
</span></span><span class="line"><span class="cl">ä¸¤ä¸ªæ¨¡å¼ã€‚äºŒé€‰ä¸€å³å¯
</span></span><span class="line"><span class="cl">è¿™ä¸ªè¡¨ç¤ºå½“ç”¨æˆ·è¯·æ±‚æ˜¯http://lijinit.cn/static/hello.cssè¿™æ ·çš„è¯·æ±‚æ—¶
</span></span><span class="line"><span class="cl">è¿›å…¥/ewæ—¥å½•ä¸‹ï¼Œå¯»æˆ‘itatieæ–‡ä»¶å¤¹ã€‚ä¹Ÿå°±æ˜¯/www/static/hello.cssæ–‡ä»¶
</span></span><span class="line"><span class="cl">location ^~ /static/(
</span></span><span class="line"><span class="cl">  root /www/;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#è¿™ä¸ªè¡¨ç¤ºè¯·æ±‚æ˜¯ä»¥å¦‚ä¸‹é™å¿—èµ„æºç»“å°¾çš„ã€‚è¿›å…¥åˆ°/www/ä¸‹å¯»æ‰¾è¯¥æ–‡ä»¶
</span></span><span class="line"><span class="cl">åŒ¹é…ä»»ä½•ä»¥.gifç»“å°¾çš„è¯·æ±‚ã€‚æ”¯æŒæ­£åˆ™
</span></span><span class="line"><span class="cl">location ~* \.(gif|jpg|jpeg|png|css|js|ico)$ {
</span></span><span class="line"><span class="cl">	root /www/;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3.è¿˜æœ‰å°±æ˜¯é€šç”¨è§„åˆ™ï¼Œç”¨å­å¤„ç†æœªå®šä¹‰çš„url.é»˜è®¤å››é…
</span></span><span class="line"><span class="cl">ä¸€èˆ¬ç½‘ç«™é™¤äº†é™æ€æ–‡ä»¶çš„è¯·æ±‚ã€‚é»˜è®¤å°±æ˜¯åŠ¨æ€è¯·æ±‚ã€‚å› æ­¤ç›´æ¥è½¬å‘ç»™åç«¯
</span></span><span class="line"><span class="cl">location / {
</span></span><span class="line"><span class="cl">	proxy_pass http://my_tomcat:8080/;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="locationä¸­çš„rootå’Œaliaså®æˆ˜">locationä¸­çš„rootå’Œaliaså®æˆ˜
</h1><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1.æ˜ç¡®äº†locationæ˜¯æ ¹æ®ç”¨æˆ·è®¿é—®çš„å…·ä½“urlæ¥å†³å®šåšä»€ä¹ˆäº‹ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2. è¦åšçš„äº‹æ˜¯ è¿”å›ä¸€äº›é™æ€æ•°æ®ç»™ç”¨æˆ·çœ‹
</span></span><span class="line"><span class="cl">ï¼ˆé—®é¢˜åœ¨äºï¼Œä½ é€šè¿‡ä»€ä¹ˆè¯­å¥ï¼ŒæŠŠnginxæœºå™¨ä¸Šçš„æ•°æ®ï¼Œè¿”å›ç»™ç”¨æˆ·ï¼‰
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">å·²çŸ¥çš„è¯­æ³•æ˜¯
</span></span><span class="line"><span class="cl">server {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	listen 33555;
</span></span><span class="line"><span class="cl">	server_name _;
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	# ä½ ç°åœ¨éœ€è¦è®¾ç½®
</span></span><span class="line"><span class="cl">	# éœ€è¦è®¿é—® 10.0.0.8:33555/static/caixukun.jpg
</span></span><span class="line"><span class="cl">	#  ä½ æœ‰ä»€ä¹ˆå†™æ³•ï¼Œå¯ä»¥è¿”å›è¿™ä¸ªæ•°æ®ï¼Œç»™ç”¨æˆ·çœ‹åˆ°å‘¢ï¼Ÿ
</span></span><span class="line"><span class="cl">	# å½“å‰æœ‰ä¸€ä¸ªä»£ç ç›®å½•ï¼Œå«åš /huya/ è¦æ±‚é™æ€æ•°æ®æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹
</span></span><span class="line"><span class="cl">	# å·²çŸ¥æœ‰ä¸€ä¸ªé™æ€å›¾ç‰‡ï¼Œæ”¾åœ¨å¦‚ä¸‹çš„ç›®å½•ä¸­ /huya/static/caixukun.jpg 
</span></span><span class="line"><span class="cl">	# è¦æ±‚ï¼Œè¦è¿›è¡Œé™æ€è¯·æ±‚åŒ¹é…ï¼ŒåŒ¹é…/static/ urlå¼€å¤´
</span></span><span class="line"><span class="cl">	# ç­‰äºåŒ¹é…ç”¨æˆ·è®¿é—®çš„urlå½¢å¼æ˜¯  10.0.0.8:33555/static/caixukun.jpg
</span></span><span class="line"><span class="cl">	location ^~ /static/ {
</span></span><span class="line"><span class="cl">		# ä¸¤ç§å†™æ³•ç¬¬ä¸€ä¸ªï¼Œå†™rootï¼Œrootç‰¹ç‚¹æ˜¯ä¼šå°†è¯¥url(/static)å¡«å……åˆ°ç½‘é¡µæ ¹ç›®å½•ä¸‹ï¼Œè®¤ä¸ºå®ƒä¹Ÿæ˜¯ä¸€ä¸ªç›®å½•
</span></span><span class="line"><span class="cl">		# æµ‹ä¸€æµ‹æ˜¯å¦èƒ½è®©ä½ è®¿é—®åˆ° caixukun.jpg
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		root  /huya/static/;
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		# ç¬¬äºŒç§å†™æ³•ï¼Œaliasåˆ«åç”¨æ³•
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä¸æ­£ç¡®çš„å†™æ³•1">ä¸æ­£ç¡®çš„å†™æ³•1,
</h3><p>ä¸ºäº†è®©ä½ ç†è§£rootçš„å‚æ•°å«ä¹‰</p>
<p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/assets/image-20220524172649114.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524172649114"
	
	
></p>
<p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/assets/image-20220524172927557.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524172927557"
	
	
></p>
<h3 id="æ­£ç¡®å†™æ³•rootå‚æ•°">æ­£ç¡®å†™æ³•ï¼ˆrootå‚æ•°ï¼‰
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1.ä½ è¿˜æ˜¯å¿…é¡»è¦æ˜ç¡®ï¼Œç”¨æˆ·è¦è®¿é—®çš„urlï¼Œæ˜¯å¦‚ä¸‹
</span></span><span class="line"><span class="cl">http://10.0.0.8:33555/static/caixukun.jpg
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2. æ­£ç¡®çš„é…ç½®æ–‡ä»¶åº”è¯¥æ˜¯å¦‚ä¸‹
</span></span><span class="line"><span class="cl">[root@web-8 /huya/static]#cat /opt/nginx-1-19-0/conf/extra/test-root-alias.conf 
</span></span><span class="line"><span class="cl">server {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	listen 33555;
</span></span><span class="line"><span class="cl">	server_name _;
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	# ä½ ç°åœ¨éœ€è¦è®¾ç½®
</span></span><span class="line"><span class="cl">	# éœ€è¦è®¿é—® 10.0.0.8:33555/static/caixukun.jpg
</span></span><span class="line"><span class="cl">	#  ä½ æœ‰ä»€ä¹ˆå†™æ³•ï¼Œå¯ä»¥è¿”å›è¿™ä¸ªæ•°æ®ï¼Œç»™ç”¨æˆ·çœ‹åˆ°å‘¢ï¼Ÿ
</span></span><span class="line"><span class="cl">	# å½“å‰æœ‰ä¸€ä¸ªä»£ç ç›®å½•ï¼Œå«åš /huya/ è¦æ±‚é™æ€æ•°æ®æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹
</span></span><span class="line"><span class="cl">	# å·²çŸ¥æœ‰ä¸€ä¸ªé™æ€å›¾ç‰‡ï¼Œæ”¾åœ¨å¦‚ä¸‹çš„ç›®å½•ä¸­ /huya/static/caixukun.jpg 
</span></span><span class="line"><span class="cl">	# è¦æ±‚ï¼Œè¦è¿›è¡Œé™æ€è¯·æ±‚åŒ¹é…ï¼ŒåŒ¹é…/static/ urlå¼€å¤´
</span></span><span class="line"><span class="cl">	# ç­‰äºåŒ¹é…ç”¨æˆ·è®¿é—®çš„urlå½¢å¼æ˜¯  10.0.0.8:33555/static/caixukun.jpg
</span></span><span class="line"><span class="cl">	location ^~ /static/ {
</span></span><span class="line"><span class="cl">		# ä¸¤ç§å†™æ³•ç¬¬ä¸€ä¸ªï¼Œå†™rootï¼Œrootç‰¹ç‚¹æ˜¯ä¼šå°†è¯¥url(/static)å¡«å……åˆ°ç½‘é¡µæ ¹ç›®å½•ä¸‹ï¼Œè®¤ä¸ºå®ƒä¹Ÿæ˜¯ä¸€ä¸ªç›®å½•
</span></span><span class="line"><span class="cl">                # åº”è¯¥æ­£ç¡®å†™æ³•å¦‚ä¸‹
</span></span><span class="line"><span class="cl">		root  /huya/;
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">		# ç¬¬äºŒç§å†™æ³•ï¼Œaliasåˆ«åç”¨æ³•
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">é‡å¯æœåŠ¡
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3.æŒ‰ç…§è¿™ä¸ªå†™æ³•çš„è¯ï¼Œè¯¥èµ„æºæ–‡ä»¶åº”è¯¥æ˜¯é˜²æ­¢åœ¨ä»€ä¹ˆä½ç½®ï¼Ÿ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ï¼ˆè¿™é‡Œçš„è·¯å¾„ï¼Œæ„è¯†æ˜¯ï¼Œè¯¥caixukun.jpgèµ„æºæ”¾åœ¨æœåŠ¡å™¨ä¸Šçš„ä»€ä¹ˆè·¯å¾„ä¸‹ï¼ï¼ï¼‰
</span></span><span class="line"><span class="cl">æ‰èƒ½æ­£ç¡®çš„è®¿é—®
</span></span><span class="line"><span class="cl">http://10.0.0.8:33555/static/caixukun.jpg
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/assets/image-20220524173551468.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524173551468"
	
	
></p>
<p>æ‰€ä»¥è¯´ï¼Œä½ è¦ç¡®ä¿ï¼Œè¿™ä¸ªé™æ€èµ„æºå­˜æ”¾çš„ç»å¯¹è·¯å¾„æ˜¯å¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/huya/static/caixukun.jpg  
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="aliaså‚æ•°ç”¨æ³•">aliaså‚æ•°ç”¨æ³•
</h2><p>#aliasçš„ä½œç”¨æ˜¯ï¼Œåˆ«åï¼Œå°†è¯¥locationåŒ¹é…çš„url($uriå˜é‡æå–çš„å­—ç¬¦ä¸²ä¿¡æ¯)æ›¿æ¢ä¸ºå¦‚ä¸‹aliasè®¾ç½®çš„ç›®å½•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1.è¿˜æ‹¿è¿™ä¸ªurlæ¥åšå®éªŒï¼Œç”¨æˆ·éœ€è¦è®¿é—®çš„urlä¾ç„¶æ˜¯
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">http://10.0.0.8:33555/static/caixukun.jpg
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2. ä¿®æ”¹nginxçš„é…ç½®æ–‡ä»¶
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/nginx%e9%ab%98%e7%ba%a7%e7%af%871/assets/image-20220524174806214.png"
	
	
	
	loading="lazy"
	
		alt="image-20220524174806214"
	
	
></p>
<p>nginx locationçš„rootå‚æ•°ï¼Œå’Œaliaså‚æ•°å¦‚ä¸Šè§£é‡Šï¼Œè‡ªå·±æ ¹æ®locationçš„åŒ¹é…è§„åˆ™ï¼Œç»“åˆrootï¼Œaliaså‚æ•°ï¼Œå»æ‰¾é™æ€æ–‡ä»¶è¯•è¯•ã€‚</p>

</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 å°è¯—
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/xiaoshi/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
