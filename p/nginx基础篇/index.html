<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="webæœåŠ¡å™¨ä»‹ç» WebæœåŠ¡å™¨å¸¸æŒ‡çš„æ˜¯(world wide web,www)æœåŠ¡å™¨ã€ä¹Ÿæ˜¯HTTPæœåŠ¡å™¨ï¼Œä¸»è¦ç”¨äºæä¾›ç½‘ä¸Šä¿¡æ¯æµ‹è§ˆã€‚æˆ‘ä»¬å¤§éƒ¨åˆ†äººæ¥è§¦äº’è”">
<title>NginxåŸºç¡€ç¯‡</title>

<link rel='canonical' href='https://ZackMoel.github.io/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/'>

<link rel="stylesheet" href="/xiaoshi/scss/style.min.0304c6baf04e01a8fe70693791cb744d56a3578a3120a8796cefc66825aa39c7.css"><meta property='og:title' content="NginxåŸºç¡€ç¯‡">
<meta property='og:description' content="webæœåŠ¡å™¨ä»‹ç» WebæœåŠ¡å™¨å¸¸æŒ‡çš„æ˜¯(world wide web,www)æœåŠ¡å™¨ã€ä¹Ÿæ˜¯HTTPæœåŠ¡å™¨ï¼Œä¸»è¦ç”¨äºæä¾›ç½‘ä¸Šä¿¡æ¯æµ‹è§ˆã€‚æˆ‘ä»¬å¤§éƒ¨åˆ†äººæ¥è§¦äº’è”">
<meta property='og:url' content='https://ZackMoel.github.io/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/'>
<meta property='og:site_name' content='å°è¯—'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-04-14T16:48:49&#43;08:00'/><meta property='article:modified_time' content='2025-04-14T16:48:49&#43;08:00'/>
<meta name="twitter:title" content="NginxåŸºç¡€ç¯‡">
<meta name="twitter:description" content="webæœåŠ¡å™¨ä»‹ç» WebæœåŠ¡å™¨å¸¸æŒ‡çš„æ˜¯(world wide web,www)æœåŠ¡å™¨ã€ä¹Ÿæ˜¯HTTPæœåŠ¡å™¨ï¼Œä¸»è¦ç”¨äºæä¾›ç½‘ä¸Šä¿¡æ¯æµ‹è§ˆã€‚æˆ‘ä»¬å¤§éƒ¨åˆ†äººæ¥è§¦äº’è”">
  


    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/xiaoshi/">
                
                    
                    
                    
                        
                        <img src="/xiaoshi/img/avatar_hu8920112365793990935.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ¥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/xiaoshi">å°è¯—</a></h1>
            <h2 class="site-description">ä¸–ç•Œå’Œå¹³</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/1055981889?spm_id_from=333.1007.0.0'
                        target="_blank"
                        title="bilibili"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-bilibili"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" /><path d="M8 3l2 3" /><path d="M16 3l-2 3" /><path d="M9 13v-2" /><path d="M15 11v2" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/ZackMoel/xiaoshi.github.io'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/xiaoshi/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>å‹æƒ…é“¾æ¥</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆnginxé…ç½®æ–‡ä»¶">åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆnginxé…ç½®æ–‡ä»¶</a></li>
  </ol>

  <ol>
    <li><a href="#yumå®‰è£…">yumå®‰è£…</a></li>
    <li><a href="#nginxç®¡ç†å‘½ä»¤">nginxç®¡ç†å‘½ä»¤</a></li>
  </ol>

  <ol>
    <li><a href="#é€šè¿‡å®˜ç½‘yumä»“åº“é»˜è®¤å®‰è£…çš„nginxconf">é€šè¿‡å®˜ç½‘yumä»“åº“é»˜è®¤å®‰è£…çš„nginx.conf</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/">NginxåŸºç¡€ç¯‡</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-04-14</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="webæœåŠ¡å™¨ä»‹ç»">webæœåŠ¡å™¨ä»‹ç»
</h1><p>WebæœåŠ¡å™¨å¸¸æŒ‡çš„æ˜¯(world wide web,www)æœåŠ¡å™¨ã€ä¹Ÿæ˜¯HTTPæœåŠ¡å™¨ï¼Œä¸»è¦ç”¨äºæä¾›ç½‘ä¸Šä¿¡æ¯æµ‹è§ˆã€‚æˆ‘ä»¬å¤§éƒ¨åˆ†äººæ¥è§¦äº’è”ç½‘ï¼Œéƒ½åŸºæœ¬ä¸Šæ˜¯é€šè¿‡æµè§ˆå™¨è®¿é—®äº’è”ç½‘ä¸­å„ç§èµ„æºã€‚</p>
<p>Webç½‘ç»œæœåŠ¡æ˜¯ä¸€ç§è¢«åŠ¨è®¿é—®çš„æœåŠ¡ç¨‹åºï¼Œå³åªæœ‰æ¥æ”¶åˆ°äº’è”ç½‘ä¸­å…¶ä»–ä¸»æœºå‘å‡ºçš„è¯·æ±‚åæ‰ä¼šå“åº”ï¼Œæœ€ç»ˆç”¨äºæä¾›æœåŠ¡ç¨‹åºçš„WebæœåŠ¡å™¨ä¼šé€šè¿‡HTTP(è¶…æ–‡æœ¬ä¼ è¾“åè®®)æˆ–HTTPS(å®‰å…¨è¶…æ–‡æœ¬ä¼ è¾“åè®®)æŠŠè¯·æ±‚çš„å†…å®¹ä¼ é€ç»™ç”¨æˆ·</p>
<p>Unixå’ŒLinuxå¹³å°ä¸‹çš„å¸¸ç”¨WebæœåŠ¡å™¨å¸¸è§æœ‰ï¼š</p>
<ul>
<li>Apache</li>
<li>Nginx</li>
<li>Lighttpd</li>
<li>Tomcat</li>
<li>IBM WebSphere</li>
</ul>
<p>å…¶ä¸­æœ€ä¸ºå¹¿æ³›çš„æ˜¯Nginx,åœ¨Windowså¹³å°ä¸Šæœ€å¸¸ç”¨çš„æ˜¯å¾®è½¯çš„IS(Internet Information Server,äº’è”ç½‘ä¿¡æ¯æœåŠ¡)æ˜¯Windowsç³»ç»Ÿä¸­é»˜è®¤çš„WebæœåŠ¡ç¨‹åºã€‚</p>
<h1 id="nginx-ä»‹ç»">nginx ä»‹ç»
</h1><p><img src="/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/clipImg-1727311113331-1.png"
	width="520"
	height="228"
	srcset="/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/clipImg-1727311113331-1_hu806225405724685984.png 480w, /xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/clipImg-1727311113331-1_hu14807144037024601102.png 1024w"
	loading="lazy"
	
		alt="clipImg"
	
	
		class="gallery-image" 
		data-flex-grow="228"
		data-flex-basis="547px"
	
></p>
<p>Nginxæ˜¯ä¿„ç½—æ–¯äººlgor Sysoev(ä¼Šæˆˆå°”Â·å¡ç´¢è€¶å¤«)å¼€å‘çš„ä¸€æ¬¾é«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†æœåŠ¡å™¨ã€‚</p>
<p>Nginxä»¥é«˜æ•ˆçš„epoll,kqueue,eventportä½œä¸ºç½‘ç»œIOæ¨¡å‹ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼ŒNginxèƒ½å¤Ÿè½»æ¾æ”¯æŒ5wå¹¶å‘è¿æ¥æ•°çš„å“åº”ï¼Œå¹¶ä¸”æ¶ˆè€—çš„æœåŠ¡å™¨å†…å­˜ã€CPUç­‰ç³»ç»Ÿèµ„æºæ¶ˆè€—å´å¾ˆä½ï¼Œè¿è¡Œéå¸¸ç¨³å®šã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">å½“å‰æƒ³è®©nginxæ”¯æŒ5ä¸‡å¹¶å‘ï¼Œç”šè‡³ç™¾ä¸‡çº§çš„å¹¶å‘ï¼Œéƒ½æ˜¯å¯ä»¥çš„ï¼Œä½†éœ€è¦åšå¾ˆå¤šçš„ä¼˜åŒ–å·¥ä½œï¼Œå¦‚
</span></span><span class="line"><span class="cl">æƒ³è‡³å°‘æ”¯æŒ5ä¸‡å¹¶å‘çš„åŸºæœ¬è°ƒä¼˜
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">1.æœåŠ¡å™¨å†…å­˜ã€CPUç¡¬ä»¶æ”¯æŒï¼Œå¦‚8æ ¸16çº¿ç¨‹ã€32Gå†…å­˜çš„æœåŠ¡å™¨
</span></span><span class="line"><span class="cl">2.ç£ç›˜ä½¿ç”¨SSDã€æˆ–è€…è´­ä¹°è‡³å°‘15000è½¬çš„SASä¼ä¸šçº§ç¡¬ç›˜ï¼ŒåšæˆRAID 0
</span></span><span class="line"><span class="cl">3.å®‰è£…å…‰çº¤ç½‘å£
</span></span><span class="line"><span class="cl">4.ä½¿ç”¨Linuxç³»ç»•ï¼Œå¦‚centos7,ä¼˜åŒ–å†…æ ¸å‚æ•°ï¼Œå¯¹TCPè¿æ¥çš„è®¾ç½®
</span></span><span class="line"><span class="cl">5.ä¼˜åŒ–nginx.confä¸­äº•å‘ç›¸å…³çš„å‚æ•°ï¼Œå¦‚ï¼š
</span></span><span class="line"><span class="cl">worker_processes 16
</span></span><span class="line"><span class="cl">worker_connections 50000;
</span></span><span class="line"><span class="cl">6. ......
</span></span></code></pre></td></tr></table>
</div>
</div><p>å›½å†…è‘—åç«™ç‚¹ï¼Œæ–°æµªåšå®¢ã€ç½‘æ˜“ã€æ·˜å®ã€è±†ç“£ã€è¿…é›·ç­‰å¤§å‹ç½‘ç«™éƒ½åœ¨ä½¿ç”¨Nginxä½œä¸ºWebæœåŠ¡å™¨æˆ–æ˜¯åå‘ä»£ç†æœåŠ¡å™¨</p>
<h2 id="åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆnginxé…ç½®æ–‡ä»¶">åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆnginxé…ç½®æ–‡ä»¶
</h2><p><a class="link" href="https://www.digitalocean.com/community/tools/nginx?global.app.lang=zhCN"  target="_blank" rel="noopener"
    >https://www.digitalocean.com/community/tools/nginx?global.app.lang=zhCN</a></p>
<p>å¯ä»¥è‡ªç”±é€‰æ‹©æ‰€éœ€çš„åº”ç”¨ï¼Œç”Ÿæˆnginxé…ç½®ä½œä¸ºå‚è€ƒã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">æ ¹æ®ä½ çš„ä¸šåŠ¡éœ€æ±‚ï¼Œè‡ªåŠ¨ç”Ÿæˆå¤æ‚çš„nginxé…ç½®æ–‡ä»¶ï¼Œæä¾›ä½ ä½œä¸ºå‚è€ƒï¼Œéå¸¸å¥½ç”¨
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="nginxä¼ä¸šç”¨å®ƒå¹²å•¥">nginxä¼ä¸šç”¨å®ƒå¹²å•¥
</h1><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1.æä¾›é™æ€é¡µé¢å±•ç¤ºï¼Œç½‘é¡µæœåŠ¡  
</span></span><span class="line"><span class="cl">2.æä¾›å¤šä¸ªç½‘ç«™ã€å¤šä¸ªåŸŸåçš„ç½‘é¡µæœåŠ¡
</span></span><span class="line"><span class="cl">3.æä¾›åå‘ä»£ç†æœåŠ¡ï¼ˆç»“åˆåŠ¨æ€åº”ç”¨ç¨‹åºï¼‰
</span></span><span class="line"><span class="cl">4.æä¾›ç®€å•èµ„æºä¸‹è½½æœåŠ¡ï¼ˆå¯†ç è®¤è¯ï¼‰ ftpæœåŠ¡
</span></span><span class="line"><span class="cl">5.ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆæ—¥å¿—åŠŸèƒ½ï¼‰
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="nginxçš„è¿è¡Œæ¶æ„">nginxçš„è¿è¡Œæ¶æ„
</h1><p>nginxæ˜¯å¤šè¿›ç¨‹æ¶æ„ï¼Œå½“å¯åŠ¨nginxä¼šä½¿ç”¨rootåˆ›å»ºmasterè¿›ç¨‹ï¼Œç”±masterè¿›ç¨‹åˆ›å»ºå¤šä¸ªWorkerè¿›ç¨‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">nginxè¿è¡Œåï¼Œæ˜¯å¤šè¿›ç¨‹ï¼Œè°ƒç”¨å¤šä¸ªcpuå»è§£æç”¨æˆ·çš„è¯·æ±‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">åœ¨linuxä¸­è¿›è¡Œå¤šè¿›ç¨‹å¼€å‘ï¼Œå¼€è¾Ÿå¤šä¸ªè¿›ç¨‹ï¼Œè°ƒç”¨å¤šä¸ªcpuï¼Œå½“ç„¶ä¹Ÿä¼šæ¶ˆè€—æ›´å¤šçš„æœºå™¨èµ„æºï¼Œå†…å­˜ï¼Œcpuèµ„æºï¼Œç»™æœåŠ¡å™¨å¸¦æ¥æ›´å¤§çš„å‹åŠ›
</span></span><span class="line"><span class="cl">- ä¸æ˜¯è¯´è¿›ç¨‹è¶Šå¤šï¼Œå¹²æ´»è¶Šå¿«ï¼Œåˆç†çš„åˆ†é…ï¼Œæ‰èƒ½è¾¾åˆ°æœ€é«˜æ•ˆçš„å¤„ç†æ•ˆç‡
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">=====
</span></span><span class="line"><span class="cl">æœ‰ä¸€ä¸ªå±‹å­è¦è£…ä¿®ï¼Œè¯·1ä¸ªå·¥äººå¹²æ´»ï¼Œè¿˜æ˜¯è¯·5ä¸ªå·¥äººå¹²æ´»ï¼Œè¯·500ä¸ªå·¥äººå¹²æ´»
</span></span><span class="line"><span class="cl">å“ªä¸€ä¸ªæ•ˆç‡æ˜¯æœ€é«˜çš„å‘¢ï¼Ÿ æœ€åˆé€‚çš„ï¼Ÿ
</span></span><span class="line"><span class="cl">=====
</span></span><span class="line"><span class="cl">å…³äºnginxçš„ä¼˜åŒ–è®¾ç½®ï¼Œnginxé»˜è®¤åº”è¯¥å¯åŠ¨å¤šå°‘ä¸ªè¿›ç¨‹å»å·¥ä½œå‘¢ï¼Ÿ
</span></span><span class="line"><span class="cl">é»˜è®¤å°±æ˜¯æ ¹æ®cpuçš„æ ¸æ•°å»è®¾ç½®è¿›ç¨‹æ•°å³å¯ã€‚ 
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="masterè¿›ç¨‹">masterè¿›ç¨‹
</h1><p>åŒ…å·¥å¤´è¿›ç¨‹ï¼Œç®¡ç†nginxçš„æ•°æ®ï¼Œåˆ›å»ºworkerå·¥ä½œè¿›ç¨‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="mf">1.</span><span class="err">å¯åŠ¨æ—¶æ£€æŸ¥</span><span class="n">nginx</span><span class="o">.</span><span class="n">confæ˜¯å¦æ­£ç¡®</span><span class="err">ï¼Œè¯­æ³•é”™è¯¯ï¼›</span>
</span></span><span class="line"><span class="cl"><span class="mf">2.</span><span class="err">æ ¹æ®é…ç½®æ–‡ä»¶çš„å‚æ•°åˆ›å»ºã€ä¸”ç›‘æ§</span><span class="n">workerè¿›ç¨‹çš„æ•°é‡å’ŒçŠ¶æ€</span><span class="err">ï¼›</span>
</span></span><span class="line"><span class="cl"><span class="mf">3.</span><span class="err">ç›‘å¬</span><span class="n">socket</span><span class="err">ï¼Œæ¥æ”¶</span><span class="n">clientå‘èµ·çš„è¯·æ±‚</span><span class="err">ï¼Œç„¶å</span><span class="n">workerç«äº‰æŠ¢å¤ºé“¾æ¥</span><span class="err">ï¼Œè·èƒœçš„å¯ä»¥å¤„ç†ä¸”å“åº”è¯·æ±‚ã€‚</span>
</span></span><span class="line"><span class="cl"><span class="mf">4.</span><span class="err">æ¥æ”¶è¿ç»´äººå‘˜å‘é€çš„ç®¡ç†</span><span class="n">nginxè¿›ç¨‹çš„ä¿¡å·</span><span class="err">ï¼Œå¹¶ä¸”å°†ä¿¡å·é€šçŸ¥åˆ°</span><span class="n">workerè¿›ç¨‹</span><span class="err">ã€‚</span>
</span></span><span class="line"><span class="cl"><span class="mf">5.</span><span class="err">å¦‚æœè¿ç»´äººå‘˜å‘é€äº†</span><span class="n">reloadå‘½ä»¤</span><span class="err">ï¼Œåˆ™è¯»å–æ–°é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºæ–°çš„</span><span class="n">workerè¿›ç¨‹</span><span class="err">ï¼Œç»“æŸæ—§çš„</span><span class="n">workerè¿›ç¨‹</span><span class="err">ã€‚</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>ç®€å•æµ‹è¯•ï¼šreloadé‡æ–°åŠ è½½è¿›ç¨‹ï¼Œworker-pidä¼šå˜åŒ–å—</p>
</blockquote>
<h1 id="workerè¿›ç¨‹">workerè¿›ç¨‹
</h1><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1.å®é™…å¤„ç†clientç½‘ç»œè¯·æ±‚çš„æ˜¯worker
</span></span><span class="line"><span class="cl">2.masteræ ¹æ®nginx.confå†³å®šworkerçš„æ•°é‡
</span></span><span class="line"><span class="cl">3.æœ‰clientç”¨æˆ·è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œworkerä¹‹é—´è¿›ç¨‹ç«äº‰ã€‚è·èƒœè€…å’Œclientå»ºç«‹è¿æ¥ä¸”å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼š
</span></span><span class="line"><span class="cl">4.æ¥æ”¶ç”¨æˆ·è¯·æ±‚åï¼Œè‹¥éœ€è¦ä»£ç†è½¬å‘ç»™åç«¯ï¼Œåˆ™åç«¯å¤„ç†å®Œæ¯•åæ¥æ”¶å¤„ç†ç»“æœï¼Œå†å“åº”ç»™ç”¨æˆ·
</span></span><span class="line"><span class="cl">5.æ¥æ”¶å¹¶å¤„ç†masterå‘æ¥çš„è¿›ç¨‹ä¿¡å·ï¼Œå¦‚å¯åŠ¨ã€é‡å¯ã€é‡è½½ã€åœæ­¢
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="nginxè¿›ç¨‹é€šä¿¡">nginxè¿›ç¨‹é€šä¿¡
</h1><p>![å±å¹•æˆªå›¾ 2024-09-26 085527](assets/å±å¹•æˆªå›¾ 2024-09-26 085527.png)</p>
<h1 id="nginxå¤„ç†httpè¯·æ±‚æµç¨‹">nginxå¤„ç†httpè¯·æ±‚æµç¨‹
</h1><p><img src="/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/clipImg-1727312382132-4.png"
	width="204"
	height="483"
	srcset="/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/clipImg-1727312382132-4_hu2749999051526795967.png 480w, /xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/clipImg-1727312382132-4_hu5348534900334856227.png 1024w"
	loading="lazy"
	
		alt="clipImg"
	
	
		class="gallery-image" 
		data-flex-grow="42"
		data-flex-basis="101px"
	
></p>
<h1 id="nginxæ¨¡å—ä»‹ç»">nginxæ¨¡å—ä»‹ç»
</h1><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">åˆ©ç”¨nginx -V  å‘½ä»¤å¯ä»¥çœ‹åˆ°å½“å‰æ“ä½œçš„è¿™ä¸ªå‘½ä»¤äºŒè¿›åˆ¶å‘½ä»¤ï¼Œè¯¦ç»†çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ”¯æŒäº†å“ªäº›æ¨¡å—
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="nginxå®‰è£…å®è·µ">nginxå®‰è£…å®è·µ
</h1><h1 id="nginxçš„å®‰è£…å½¢å¼">nginxçš„å®‰è£…å½¢å¼
</h1><ul>
<li>
<p>æºä»£ç ç¼–è¯‘å®‰è£…ï¼Œä¼˜ç‚¹</p>
<ul>
<li><a class="link" href="https://nginx.org/en/docs/configure.html"  target="_blank" rel="noopener"
    >Building nginx from Sources</a></li>
<li>ç‰ˆæœ¬ï¼Œå¯ä»¥è·å–å®˜ç½‘æœ€æ–°çš„è½¯ä»¶åŒ…ï¼Œç”šè‡³æœ€æ–°æµ‹è¯•ç‰ˆï¼Œéƒ½å¯ä»¥ç›´æ¥ç¼–è¯‘å®‰è£…</li>
<li>è¿˜æœ‰ç¨³å®šç‰ˆæœ¬</li>
<li>è‡ªç”±å®šä¹‰ï¼Œå®‰è£…è·¯å¾„è‡ªç”±å®šä¹‰ï¼Œ</li>
<li>è‡ªç”±å®šä¹‰ç¬¬ä¸‰æ–¹æ’ä»¶</li>
<li>ç¼ºç‚¹ï¼Œå®‰è£…æ­¥éª¤ç¹çï¼Œè€—æ—¶å¤ªé•¿ï¼Œçœ‹ä½ è¦è£…å¤šå°‘ä¸ªæ¨¡å—ï¼Œç¼–è¯‘æ·»åŠ çš„æ¨¡å—å¤šï¼Œå®‰è£…çš„å°±æ›´ä¹…</li>
</ul>
</li>
<li>
<p>rpmå®‰è£…</p>
<ul>
<li>å¾—æå‰å‡†å¤‡å¥½nginxæœ¬èº«çš„rpmåŒ…ï¼Œä»¥åŠç›¸å…³ä¾èµ–çš„rpmåŒ…</li>
<li>ç”¨äºç¦»çº¿å®‰è£…nginxçš„ç¯å¢ƒ</li>
</ul>
</li>
<li>
<p>yumå®‰è£…</p>
<ul>
<li>é˜¿é‡Œäº‘ç¬¬ä¸‰æ–¹ä»“åº“ï¼ˆcentos-base.repo,epel.repoï¼‰
<ul>
<li>è¿™ä¸ªå…¶å®éƒ½ä¸é è°±ã€‚</li>
</ul>
</li>
<li>è‡ªå»ºyumä»“åº“ï¼ˆå¾—æå‰å‡†å¤‡å¥½nginxæœ¬èº«çš„rpmåŒ…ï¼Œä»¥åŠç›¸å…³ä¾èµ–çš„rpmåŒ…ï¼‰</li>
<li>nginxå®˜ç½‘ä»“åº“ï¼ˆè·å–å®˜ç½‘æœ€æ–°ç¨³å®šç‰ˆçš„yumæºä»“åº“ï¼‰
<ul>
<li>yumä¸€é”®å®‰è£…ï¼Œçœå¿ƒçœäº‹ï¼Œç‰ˆæœ¬ä¹Ÿæ˜¯æœ‰ä¸€å®šçš„ä¿éšœçš„ï¼Œrpmçš„å®‰å…¨æ€§ä¹Ÿæ˜¯æœ‰ä¿éšœçš„</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="yumå®‰è£…">yumå®‰è£…
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="mf">1.</span> <span class="err">é…ç½®å®˜ç½‘</span><span class="n">yumæº</span><span class="err">ï¼Œä¸€é”®å®‰è£…å³å¯</span>
</span></span><span class="line"><span class="cl"><span class="n">cat</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">yum</span><span class="o">.</span><span class="n">repos</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">repo</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;EOF&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">nginx</span><span class="o">-</span><span class="n">stable</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">name</span><span class="o">=</span><span class="n">nginx</span> <span class="n">stable</span> <span class="n">repo</span>
</span></span><span class="line"><span class="cl"><span class="n">baseurl</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">nginx</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">centos</span><span class="o">/$</span><span class="n">releasever</span><span class="o">/$</span><span class="n">basearch</span><span class="o">/</span>
</span></span><span class="line"><span class="cl"><span class="n">gpgcheck</span><span class="o">=</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">enabled</span><span class="o">=</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">gpgkey</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">nginx</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">keys</span><span class="o">/</span><span class="n">nginx_signing</span><span class="o">.</span><span class="n">key</span>
</span></span><span class="line"><span class="cl"><span class="n">EOF</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mf">2.</span><span class="err">æ¸…ç©º</span><span class="n">yumæº</span><span class="err">ï¼Œå®‰è£…æœ€æ–°ç‰ˆ</span><span class="n">nginx</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">yum</span><span class="o">.</span><span class="n">repos</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#yum clean all</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">yum</span><span class="o">.</span><span class="n">repos</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#yum install nginx -y</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mf">3.</span><span class="err">æŸ¥çœ‹</span><span class="n">PATHå˜é‡</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">yum</span><span class="o">.</span><span class="n">repos</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#which nginx</span>
</span></span><span class="line"><span class="cl"><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">nginx</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">yum</span><span class="o">.</span><span class="n">repos</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#ll /usr/sbin/nginx</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span><span class="n">rwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">1377720</span> <span class="n">Nov</span> <span class="mi">16</span>  <span class="mi">2021</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">nginx</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">yum</span><span class="o">.</span><span class="n">repos</span><span class="o">.</span><span class="n">d</span><span class="p">]</span><span class="c1">#nginx -V</span>
</span></span><span class="line"><span class="cl"><span class="n">nginx</span> <span class="n">version</span><span class="p">:</span> <span class="n">nginx</span><span class="o">/</span><span class="mf">1.20</span><span class="o">.</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">built</span> <span class="n">by</span> <span class="n">gcc</span> <span class="mf">4.8</span><span class="o">.</span><span class="mi">5</span> <span class="mi">20150623</span> <span class="p">(</span><span class="n">Red</span> <span class="n">Hat</span> <span class="mf">4.8</span><span class="o">.</span><span class="mi">5</span><span class="o">-</span><span class="mi">44</span><span class="p">)</span> <span class="p">(</span><span class="n">GCC</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="n">built</span> <span class="n">with</span> <span class="n">OpenSSL</span> <span class="mf">1.0</span><span class="o">.</span><span class="mi">2</span><span class="n">k</span><span class="o">-</span><span class="n">fips</span>  <span class="mi">26</span> <span class="n">Jan</span> <span class="mi">2017</span>
</span></span><span class="line"><span class="cl"><span class="n">TLS</span> <span class="n">SNI</span> <span class="n">support</span> <span class="n">enabled</span>
</span></span><span class="line"><span class="cl"><span class="n">configure</span> <span class="n">arguments</span><span class="p">:</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span> <span class="o">--</span><span class="n">sbin</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">nginx</span> <span class="o">--</span><span class="n">modules</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib64</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">modules</span> <span class="o">--</span><span class="n">conf</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">conf</span> <span class="o">--</span><span class="n">error</span><span class="o">-</span><span class="nb">log</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">error</span><span class="o">.</span><span class="n">log</span> <span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="nb">log</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">access</span><span class="o">.</span><span class="n">log</span> <span class="o">--</span><span class="n">pid</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">pid</span> <span class="o">--</span><span class="n">lock</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">lock</span> <span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="n">client</span><span class="o">-</span><span class="n">body</span><span class="o">-</span><span class="n">temp</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="k">var</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">client_temp</span> <span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="n">proxy</span><span class="o">-</span><span class="n">temp</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="k">var</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">proxy_temp</span> <span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="n">fastcgi</span><span class="o">-</span><span class="n">temp</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="k">var</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">fastcgi_temp</span> <span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="n">uwsgi</span><span class="o">-</span><span class="n">temp</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="k">var</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">uwsgi_temp</span> <span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="n">scgi</span><span class="o">-</span><span class="n">temp</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="k">var</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">scgi_temp</span> <span class="o">--</span><span class="n">user</span><span class="o">=</span><span class="n">nginx</span> <span class="o">--</span><span class="n">group</span><span class="o">=</span><span class="n">nginx</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">compat</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">file</span><span class="o">-</span><span class="n">aio</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">threads</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_addition_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_auth_request_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_dav_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_flv_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_gunzip_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_gzip_static_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_mp4_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_random_index_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_realip_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_secure_link_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_slice_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_ssl_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_stub_status_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_sub_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_v2_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">mail</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">mail_ssl_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">stream</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">stream_realip_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">stream_ssl_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">stream_ssl_preread_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">cc</span><span class="o">-</span><span class="n">opt</span><span class="o">=</span><span class="s1">&#39;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -fPIC&#39;</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">ld</span><span class="o">-</span><span class="n">opt</span><span class="o">=</span><span class="s1">&#39;-Wl,-z,relro -Wl,-z,now -pie&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="nginxç®¡ç†å‘½ä»¤">nginxç®¡ç†å‘½ä»¤
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">nginx</span> <span class="o">-</span><span class="n">t</span>  <span class="c1"># æ£€æµ‹nginx.confè¯­æ³•</span>
</span></span><span class="line"><span class="cl"><span class="n">nginx</span> <span class="o">-</span><span class="n">s</span>  <span class="n">reload</span>  <span class="c1"># é‡æ–°è¯»å–nginx.conf</span>
</span></span><span class="line"><span class="cl"><span class="n">nginx</span> <span class="o">-</span><span class="n">s</span> <span class="n">stop</span>   <span class="c1"># åœæ­¢nginx  kill -15 nginx</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">nginx</span>  <span class="c1"># é»˜è®¤æ˜¯ç›´æ¥è¿è¡Œï¼Œå‰ææ˜¯å½“å‰æœºå™¨æ²¡è¿è¡Œnginx</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#ä½ é€šè¿‡yumå®‰è£…çš„nginxè¯·ä½ ç”¨systemctlå»ç®¡ç†</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä¸èƒ½å¤šæ¬¡æ‰§è¡ŒnginxäºŒè¿›åˆ¶å‘½ä»¤</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#nginx</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#nginx # ä¼šæŠ¥é”™</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># nginx -s reload ,ä¼šå‘ç”Ÿä»€ä¹ˆ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">nginx</span> <span class="o">-</span><span class="n">s</span> <span class="n">reloadæ˜¯ç»™masterè¿›ç¨‹å‘ä¿¡å·</span><span class="err">ï¼Œé‡æ–°è¯»å–é…ç½®ä¿¡æ¯ï¼Œå¯¼è‡´</span><span class="n">workeré‡æ–°ç”Ÿæˆ</span><span class="err">ï¼Œå› æ­¤</span><span class="n">worker</span><span class="o">-</span><span class="n">pidå‘ç”Ÿäº†å˜åŒ–</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">ä½†æ˜¯</span><span class="n">masterè¿›ç¨‹idä¸å¸¦å˜åŒ–çš„</span><span class="err">ï¼ˆåŒ…å·¥å¤´ï¼Œä¸€ç›´æ²¡å˜ï¼Œæ›´æ¢äº†æ‰‹åº•ä¸‹çš„å¹²æ´»çš„å·¥äººï¼‰</span>
</span></span><span class="line"><span class="cl"><span class="o">================================</span>
</span></span><span class="line"><span class="cl"><span class="err">é…ç½®æ–‡ä»¶å˜åŒ–ï¼Œå°±å¥½æ¯”</span> <span class="err">åˆåŒå˜åŒ–äº†ï¼ˆåŒ…å·¥å¤´è¿˜æ˜¯ä»–ï¼Œä½†æ˜¯å·¥äººæ›´æ¢äº†ä¸€æ‰¹ï¼‰</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">===========</span>
</span></span><span class="line"><span class="cl"><span class="err">åªæœ‰ä½ </span><span class="n">restartçš„æ—¶å€™</span><span class="err">ï¼ŒåŒ…å·¥å¤´ï¼Œä¹Ÿä¼šè¢«æ›´æ¢</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">ä½ åªèƒ½å…ˆåœæ­¢ï¼Œ</span> <span class="err">å†é‡å¯</span>
</span></span><span class="line"><span class="cl"><span class="n">nginx</span> <span class="o">-</span><span class="n">s</span> <span class="n">stop</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">==============================</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">å¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼Œå¦‚ä½•è§£å†³ï¼Œå…¶å®æ˜¯é€šè¿‡</span><span class="n">pid</span><span class="err">ï¼Œç®¡ç†</span><span class="n">nginxçš„è¿›ç¨‹</span>
</span></span><span class="line"><span class="cl"> <span class="o">~</span><span class="p">]</span><span class="c1">#nginx -s stop</span>
</span></span><span class="line"><span class="cl"><span class="n">nginx</span><span class="p">:</span> <span class="p">[</span><span class="n">error</span><span class="p">]</span> <span class="n">invalid</span> <span class="n">PID</span> <span class="n">number</span> <span class="s2">&#34;&#34;</span> <span class="ow">in</span> <span class="s2">&#34;/var/run/nginx.pid&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#cat /var/run/nginx.pid</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#ps -ef |grep nginx</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>       <span class="mi">3599</span>      <span class="mi">1</span>  <span class="mi">0</span> <span class="mi">16</span><span class="p">:</span><span class="mi">10</span> <span class="err">?</span>        <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">nginx</span><span class="p">:</span> <span class="n">master</span> <span class="n">process</span> <span class="n">nginx</span>
</span></span><span class="line"><span class="cl"><span class="n">nginx</span>      <span class="mi">3628</span>   <span class="mi">3599</span>  <span class="mi">0</span> <span class="mi">16</span><span class="p">:</span><span class="mi">12</span> <span class="err">?</span>        <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">nginx</span><span class="p">:</span> <span class="n">worker</span> <span class="n">process</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>       <span class="mi">3677</span>   <span class="mi">3434</span>  <span class="mi">0</span> <span class="mi">16</span><span class="p">:</span><span class="mi">19</span> <span class="n">pts</span><span class="o">/</span><span class="mi">0</span>    <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">grep</span> <span class="o">--</span><span class="n">color</span><span class="o">=</span><span class="n">auto</span> <span class="n">nginx</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#echo 3599 &gt; /var/run/nginx.pid </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#nginx -s stop</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#!ps</span>
</span></span><span class="line"><span class="cl"><span class="n">ps</span> <span class="o">-</span><span class="n">ef</span> <span class="o">|</span><span class="n">grep</span> <span class="n">nginx</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>       <span class="mi">3686</span>   <span class="mi">3434</span>  <span class="mi">0</span> <span class="mi">16</span><span class="p">:</span><span class="mi">19</span> <span class="n">pts</span><span class="o">/</span><span class="mi">0</span>    <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">grep</span> <span class="o">--</span><span class="n">color</span><span class="o">=</span><span class="n">auto</span> <span class="n">nginx</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ˜ç¡®ï¼Œç°åœ¨ç”¨systemctlå»ç®¡ç†nginxäº†</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#systemctl start nginx</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">æŸ¥çœ‹çŠ¶æ€ï¼Œ</span><span class="n">reload</span><span class="err">ï¼Œ</span> <span class="n">restart</span> <span class="n">nginx</span><span class="err">ï¼ŒæŸ¥çœ‹è¿›ç¨‹</span><span class="n">idå·</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#systemctl status nginx</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#systemctl reload nginx  # workerå˜åŒ–ï¼Œmasterä¸å˜</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">web</span><span class="o">-</span><span class="mi">8</span> <span class="o">~</span><span class="p">]</span><span class="c1">#systemctl restart nginx  # æ•´ä¸ªnginxè¿›ç¨‹å˜åŒ–</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ€»ç»“ï¼šç”¨ä»€ä¹ˆå‘½ä»¤å¯åŠ¨çš„ï¼Œå°±ç”¨ä»€ä¹ˆæ–¹å¼å»ç®¡ç†è¯¥è¿›ç¨‹</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/image-20220518161823329.png"
	width="2911"
	height="1234"
	srcset="/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/image-20220518161823329_hu17994142738672135962.png 480w, /xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/image-20220518161823329_hu11454231984984814497.png 1024w"
	loading="lazy"
	
		alt="image-20220518161823329"
	
	
		class="gallery-image" 
		data-flex-grow="235"
		data-flex-basis="566px"
	
></p>
<h1 id="nginxé…ç½®æ–‡ä»¶è¯¦è§£">nginxé…ç½®æ–‡ä»¶è¯¦è§£
</h1><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">å®‰è£…å®Œäº†ä¹‹åï¼Œåç»­nginxçš„æ‰€æœ‰åŠŸèƒ½ï¼Œéƒ½æ˜¯å›´ç»•ç€ä¿®æ”¹nginxé…ç½®æ–‡ä»¶ç”Ÿæ•ˆäº†
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">çœ‹æ‡‚é…ç½®æ–‡ä»¶ï¼Œè¿ç»´æ¥è¯´ï¼Œè¾¾åˆ°æ‰‹å†™nginxé…ç½®æ–‡ä»¶ï¼Œæ‰æ˜¯åˆæ ¼çš„ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="é€šè¿‡å®˜ç½‘yumä»“åº“é»˜è®¤å®‰è£…çš„nginxconf">é€šè¿‡å®˜ç½‘yumä»“åº“é»˜è®¤å®‰è£…çš„nginx.conf
</h2><p>ä½ç½®åœ¨/etc/nginx/nginx.conf</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">user</span>  <span class="n">nginx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">worker_processes</span>  <span class="n">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">error_log</span>  <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">error</span><span class="o">.</span><span class="n">log</span> <span class="n">notice</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">pid</span>        <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">pid</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">events</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">worker_connections</span>  <span class="mi">1024</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">http</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">include</span>       <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">mime</span><span class="o">.</span><span class="n">types</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">default_type</span>  <span class="n">application</span><span class="o">/</span><span class="n">octet</span><span class="o">-</span><span class="n">stream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">log_format</span>  <span class="n">main</span>  <span class="s1">&#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; &#39;</span>
</span></span><span class="line"><span class="cl">                      <span class="s1">&#39;$status $body_bytes_sent &#34;$http_referer&#34; &#39;</span>
</span></span><span class="line"><span class="cl">                      <span class="s1">&#39;&#34;$http_user_agent&#34; &#34;$http_x_forwarded_for&#34;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">access_log</span>  <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">access</span><span class="o">.</span><span class="n">log</span>  <span class="n">main</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">sendfile</span>        <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#tcp_nopush     on;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">keepalive_timeout</span>  <span class="mi">65</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">#gzip  on;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">include</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span><span class="o">/*.</span><span class="n">conf</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">~</span>       
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/image-20220518164803277.png"
	width="2054"
	height="1758"
	srcset="/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/image-20220518164803277_hu12626621317157721252.png 480w, /xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/image-20220518164803277_hu51265700488593272.png 1024w"
	loading="lazy"
	
		alt="image-20220518164803277"
	
	
		class="gallery-image" 
		data-flex-grow="116"
		data-flex-basis="280px"
	
></p>
<hr>
<p><img src="/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/image-20220518165215774.png"
	width="2512"
	height="1745"
	srcset="/xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/image-20220518165215774_hu13603006112989819728.png 480w, /xiaoshi/p/nginx%E5%9F%BA%E7%A1%80%E7%AF%87/assets/image-20220518165215774_hu9475787694374116516.png 1024w"
	loading="lazy"
	
		alt=" "
	
	
		class="gallery-image" 
		data-flex-grow="143"
		data-flex-basis="345px"
	
></p>

</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 å°è¯—
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/xiaoshi/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
