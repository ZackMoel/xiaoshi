<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="正式进入网站部署的学习 web通信流程 在开始学web服务器之前，需要先理解web通信协议，才能够更好的吸收其中精华。 我们平时浏览网页的时候，会">
<title>Web基础协议</title>

<link rel='canonical' href='https://ZackMoel.github.io/xiaoshi/p/web%E5%9F%BA%E7%A1%80%E5%8D%8F%E8%AE%AE/'>

<link rel="stylesheet" href="/xiaoshi/scss/style.min.0304c6baf04e01a8fe70693791cb744d56a3578a3120a8796cefc66825aa39c7.css"><meta property='og:title' content="Web基础协议">
<meta property='og:description' content="正式进入网站部署的学习 web通信流程 在开始学web服务器之前，需要先理解web通信协议，才能够更好的吸收其中精华。 我们平时浏览网页的时候，会">
<meta property='og:url' content='https://ZackMoel.github.io/xiaoshi/p/web%E5%9F%BA%E7%A1%80%E5%8D%8F%E8%AE%AE/'>
<meta property='og:site_name' content='小诗'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-04-14T16:48:29&#43;08:00'/><meta property='article:modified_time' content='2025-04-14T16:48:29&#43;08:00'/>
<meta name="twitter:title" content="Web基础协议">
<meta name="twitter:description" content="正式进入网站部署的学习 web通信流程 在开始学web服务器之前，需要先理解web通信协议，才能够更好的吸收其中精华。 我们平时浏览网页的时候，会">
  


    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/xiaoshi/">
                
                    
                    
                    
                        
                        <img src="/xiaoshi/img/avatar_hu8920112365793990935.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🍥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/xiaoshi">小诗</a></h1>
            <h2 class="site-description">世界和平</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/1055981889?spm_id_from=333.1007.0.0'
                        target="_blank"
                        title="bilibili"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-bilibili"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" /><path d="M8 3l2 3" /><path d="M16 3l-2 3" /><path d="M9 13v-2" /><path d="M15 11v2" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/ZackMoel/xiaoshi.github.io'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/xiaoshi/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>友情链接</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#web服务器工作原理">web服务器工作原理</a></li>
    <li><a href="#客户端请求到达服务端流程">客户端请求到达服务端流程</a></li>
  </ol>

  <ol>
    <li>
      <ol>
        <li><a href="#ip-协议">IP 协议</a></li>
        <li><a href="#tcp-协议">TCP 协议</a></li>
        <li><a href="#tcp-和-ip-的关系">TCP 和 IP 的关系</a></li>
        <li><a href="#举例说明">举例说明</a></li>
        <li><a href="#总结">总结</a></li>
      </ol>
    </li>
  </ol>

  <ol>
    <li>
      <ol>
        <li><a href="#1-物理层physical-layer">1. 物理层（Physical Layer）</a></li>
        <li><a href="#2-数据链路层data-link-layer">2. 数据链路层（Data Link Layer）</a></li>
        <li><a href="#3-网络层network-layer">3. 网络层（Network Layer）</a></li>
        <li><a href="#4-传输层transport-layer">4. 传输层（Transport Layer）</a></li>
        <li><a href="#5-会话层session-layer">5. 会话层（Session Layer）</a></li>
        <li><a href="#6-表示层presentation-layer">6. 表示层（Presentation Layer）</a></li>
        <li><a href="#7-应用层application-layer">7. 应用层（Application Layer）</a></li>
        <li><a href="#osi-模型的作用">OSI 模型的作用</a></li>
      </ol>
    </li>
  </ol>

  <ol>
    <li><a href="#网络套接字">网络套接字</a></li>
    <li><a href="#本地套接字">本地套接字</a></li>
  </ol>

  <ol>
    <li><a href="#无状态stateless和cookie">无状态（stateless）和cookie</a></li>
    <li><a href="#请求方法">请求方法</a></li>
    <li><a href="#请求响应报文查看">请求、响应报文查看</a></li>
    <li><a href="#响应状态码">响应状态码</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/xiaoshi/p/web%E5%9F%BA%E7%A1%80%E5%8D%8F%E8%AE%AE/">Web基础协议</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-04-14</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="正式进入网站部署的学习">正式进入网站部署的学习
</h1><h1 id="web通信流程">web通信流程
</h1><p>在开始学web服务器之前，需要先理解web通信协议，才能够更好的吸收其中精华。</p>
<p>我们平时浏览网页的时候，会打开浏览器，输入网址后按下回车键，然后就会显示出你想要浏览的内容。在这个看似简单的用户行为背后，到底隐藏了些什么呢?</p>
<ul>
<li>浏览器本身是一个客户端，当你输入URL的时候，首先浏览器会去请求DNS服务器，通过DNS获取相应的域名对应的IP</li>
<li>然后通过IP地址找到IP对应的服务器后，要求建立TCP连接</li>
<li>等浏览器发送完HTTP Request(请求)包后，服务器接收到请求包之后才开始处理请求包</li>
<li>服务器调用自身服务，返回HTTP Response(响应)包；</li>
<li>客户端收到来自服务器的响应后开始渲染这个Response包里的主体(body),等收到全部的内容随后断开与该服务器之间的TCP连接。</li>
</ul>
<h2 id="web服务器工作原理">web服务器工作原理
</h2><p>Web服务器的工作原理可以简单地归纳为：</p>
<ul>
<li>客户端通过TCP/IP协议建立到服务器的TCP连接</li>
<li>客户端向服务器发送HTTP协议请求包，请求服务器里的资源文档</li>
<li>服务器向客户端发送HTTP协议应答包，如果请求的资源包含有动态语言的内容，那么服务器会调用动态语言的解释引擎负责处理“动态内容”,并将处理得到的数据返回给客户端</li>
<li>客户端与服务器断开。由客户端解释HTML文档，在客户端屏幕上渲染图形结果</li>
</ul>
<h2 id="客户端请求到达服务端流程">客户端请求到达服务端流程
</h2><ul>
<li>当客户端拿到服务端域名对应的ip后，浏览器会以一个随机端口(1024&lt;随机端口&lt;65535)向服务器的web程序(nginx,apache)的80端口发起tcp连接请求。</li>
<li>该请求经过复杂的网络环境后到达服务端，进入到服务器的对应的网卡，再进入到Linux内核的tcp/ip协议栈，一层一层的解开数据包，甚至经过防火墙，最终到达nginx程序，确认tcp/ip连接。</li>
<li>确认tcp连接之后，客户端继续发起http请求，如常见的get,post请求方法。</li>
</ul>
<h1 id="tcpip协议">TCP/IP协议
</h1><p>传输控制协议(TCP,Transmission Control Protocol)是一种面向连接的，可靠的、基于字节流的传输层通信协议。</p>
<p>简单说就是TCP协议就是控制数据包在传过过程中的规范格式。
IP是Internet Protocol(网际互连协议)的缩写，是TCP/IP体系中的网络层协议。</p>
<p>设计IP的目的是捉高网络的可扩展性：一是解决互联网问题，实现大规模、异构网络的互联互通；二是分割顶层网络应用和底层网络技术之间的耦合关系，以利于两者的独立发展。
根据端到端的设计原则，IP只为主机提供一种无连接、不可靠的、尽力而为的数据包传输服务。</p>
<p>TCP（传输控制协议）和 IP（网际协议）是互联网协议套件（通常称为 TCP/IP 套件）的两个核心组件，它们各自承担不同的职责，但紧密合作以实现网络通信。以下是它们的关系和各自的功能：</p>
<h3 id="ip-协议">IP 协议
</h3><p><strong>功能：</strong></p>
<ul>
<li><strong>寻址和路由：</strong> IP 协议负责将数据包从源地址传送到目标地址。它使用 IP 地址来标识网络上的设备，并通过路由器在不同网络之间转发数据包。</li>
<li><strong>数据封装：</strong> 在 IP 层，数据被封装成 IP 数据包，包含源和目标 IP 地址以及其他控制信息。</li>
<li><strong>无连接服务：</strong> IP 提供无连接的数据传输服务，即每个数据包独立传输，路由器对每个数据包进行独立处理，数据包可能通过不同路径到达目的地。</li>
</ul>
<p><strong>特点：</strong></p>
<ul>
<li><strong>不可靠传输：</strong> IP 不保证数据包的交付顺序、完整性或可靠性。数据包可能丢失、重复或乱序到达。</li>
<li><strong>最佳传送：</strong> IP 尽力而为地传送数据，但不提供错误恢复机制。</li>
</ul>
<h3 id="tcp-协议">TCP 协议
</h3><p><strong>功能：</strong></p>
<ul>
<li><strong>可靠传输：</strong> TCP 提供可靠的数据传输服务，通过确认机制和重传机制确保数据包按顺序、无误地到达目的地。</li>
<li><strong>流量控制：</strong> TCP 使用流量控制机制（如滑动窗口）来调整发送方的发送速率，防止接收方的缓冲区溢出。</li>
<li><strong>拥塞控制：</strong> TCP 实现拥塞控制算法（如慢启动和拥塞避免）来防止网络拥塞。</li>
<li><strong>数据分段和重组：</strong> TCP 将应用层数据分割成适当大小的段（segment），并在接收方重组这些段以恢复原始数据流。</li>
<li><strong>面向连接：</strong> TCP 是面向连接的协议，在传输数据之前，需要建立一个 TCP 连接（三次握手），传输结束后需要断开连接（四次挥手）。</li>
</ul>
<p><strong>特点：</strong></p>
<ul>
<li><strong>可靠性：</strong> TCP 保证数据的可靠传输，提供错误检测和纠正机制。</li>
<li><strong>顺序性：</strong> TCP 保证数据按发送顺序到达接收方。</li>
</ul>
<h3 id="tcp-和-ip-的关系">TCP 和 IP 的关系
</h3><ol>
<li>
<p><strong>层次关系：</strong></p>
<ul>
<li><strong>IP 协议</strong> 位于网络层，负责数据包的路由和传输。</li>
<li><strong>TCP 协议</strong> 位于传输层，建立在 IP 之上，提供可靠的端到端通信。</li>
</ul>
</li>
<li>
<p><strong>封装关系：</strong></p>
<ul>
<li>在发送数据时，应用层数据首先通过 TCP 封装成 TCP 段，然后再通过 IP 封装成 IP 数据包。最终，数据包通过链路层协议（如 Ethernet）传输。</li>
<li>在接收数据时，链路层首先解封装成 IP 数据包，然后 IP 层解封装成 TCP 段，最后传递给应用层。</li>
</ul>
</li>
<li>
<p><strong>协同工作：</strong></p>
<ul>
<li><strong>IP</strong> 负责将数据包从一个网络节点传送到另一个网络节点，不关心数据的内容和可靠性。</li>
<li><strong>TCP</strong> 负责确保数据在两个端点之间可靠传输，处理数据的分段、重组、错误检测和纠正。</li>
</ul>
</li>
</ol>
<h3 id="举例说明">举例说明
</h3><p>假设你在浏览器中访问一个网页：</p>
<ol>
<li><strong>应用层</strong>（HTTP）：浏览器发送一个 HTTP 请求。</li>
<li><strong>传输层</strong>（TCP）：HTTP 请求被 TCP 封装成 TCP 段，TCP 负责建立连接、保证数据可靠传输。</li>
<li><strong>网络层</strong>（IP）：TCP 段被 IP 封装成 IP 数据包，IP 负责将数据包路由到目标服务器。</li>
<li><strong>链路层</strong>（Ethernet 等）：IP 数据包被进一步封装并通过物理网络传输。</li>
</ol>
<p>在目标服务器上，这个过程逆向进行，最终将 HTTP 响应传递回浏览器。</p>
<h3 id="总结">总结
</h3><p>TCP 和 IP 协议各自承担不同的职责，IP 负责基本的网络数据传输和路由，而 TCP 在 IP 之上提供可靠的端到端通信服务。它们共同构成了互联网通信的基础，确保数据能够在全球范围内高效、安全地传输。</p>
<blockquote>
<p>TCP/IP协议指的不仅仅是top、和ip这两个协议。</p>
<p>而是由FTP、SMTP、TCP、UDP、IP等各种协议组成的协议簇，但是TCP/IP最最具有代表性，因此俗称TCP/IP协议。</p>
</blockquote>
<h1 id="osi七层网络模型">OSI七层网络模型
</h1><p><img src="/nginx%e5%9f%ba%e7%a1%80%e7%af%87/assets/clipImg.png"
	
	
	
	loading="lazy"
	
		alt="clipImg"
	
	
></p>
<p>OSI（开放系统互连）模型是一个抽象的网络通信参考模型，由国际标准化组织（ISO）制定，用于描述网络系统之间通信的标准框架。OSI 模型将网络通信过程分为七个层次，每一层都有特定的功能和职责。以下是对 OSI 七层模型的详细描述：</p>
<h3 id="1-物理层physical-layer">1. 物理层（Physical Layer）
</h3><p><strong>功能：</strong></p>
<ul>
<li>负责在物理媒体上传输原始的比特流（0 和 1）。</li>
<li>定义硬件设备的电气、机械、功能和规程特性，如电缆类型、信号电压、电缆连接器、传输速率等。</li>
</ul>
<p><strong>示例：</strong></p>
<ul>
<li>网络接口卡（NIC）、集线器（Hub）、电缆（如光纤、电缆）。</li>
</ul>
<h3 id="2-数据链路层data-link-layer">2. 数据链路层（Data Link Layer）
</h3><p><strong>功能：</strong></p>
<ul>
<li>负责节点间的可靠数据传输，处理物理层上可能出现的传输错误。</li>
<li>将数据帧（Frame）传输到相邻节点，并进行帧的同步、流量控制和错误检测与纠正。</li>
<li>分为两个子层：逻辑链路控制（LLC）和媒体访问控制（MAC）。</li>
</ul>
<p><strong>示例：</strong></p>
<ul>
<li>以太网（Ethernet）、Wi-Fi、交换机（Switch）。</li>
</ul>
<h3 id="3-网络层network-layer">3. 网络层（Network Layer）
</h3><p><strong>功能：</strong></p>
<ul>
<li>负责数据包（Packet）的路由和转发，决定数据包从源到目的地的最佳路径。</li>
<li>处理网络地址转换和逻辑地址（IP 地址）分配。</li>
</ul>
<p><strong>示例：</strong></p>
<ul>
<li>IP（Internet Protocol）、路由器（Router）。</li>
</ul>
<h3 id="4-传输层transport-layer">4. 传输层（Transport Layer）
</h3><p><strong>功能：</strong></p>
<ul>
<li>提供端到端的通信服务，确保数据的完整性和可靠传输。</li>
<li>负责数据分段、重组、流量控制和错误恢复。</li>
<li>提供面向连接（TCP）和无连接（UDP）的服务。</li>
</ul>
<p><strong>示例：</strong></p>
<ul>
<li>TCP（Transmission Control Protocol）、UDP（User Datagram Protocol）。</li>
</ul>
<h3 id="5-会话层session-layer">5. 会话层（Session Layer）
</h3><p><strong>功能：</strong></p>
<ul>
<li>管理和控制应用程序之间的会话，建立、维护和终止会话连接。</li>
<li>负责会话的同步和恢复，管理对话控制。</li>
</ul>
<p><strong>示例：</strong></p>
<ul>
<li>RPC（Remote Procedure Call）、SIP（Session Initiation Protocol）。</li>
</ul>
<h3 id="6-表示层presentation-layer">6. 表示层（Presentation Layer）
</h3><p><strong>功能：</strong></p>
<ul>
<li>负责数据的格式化、加密和解密、压缩和解压缩。</li>
<li>确保数据的语法和语义能够被接收方正确理解。</li>
</ul>
<p><strong>示例：</strong></p>
<ul>
<li>SSL/TLS（用于加密）、JPEG（图像格式）、MPEG（视频格式）。</li>
</ul>
<h3 id="7-应用层application-layer">7. 应用层（Application Layer）
</h3><p><strong>功能：</strong></p>
<ul>
<li>提供网络服务和应用程序接口，直接为用户或应用程序提供服务。</li>
<li>处理特定的网络应用协议，如电子邮件、文件传输和远程登录等。</li>
</ul>
<p><strong>示例：</strong></p>
<ul>
<li>HTTP（HyperText Transfer Protocol）、FTP（File Transfer Protocol）、SMTP（Simple Mail Transfer Protocol）、DNS（Domain Name System）。</li>
</ul>
<h3 id="osi-模型的作用">OSI 模型的作用
</h3><ol>
<li><strong>标准化：</strong> 提供了一个通用的参考框架，帮助不同厂商和开发者创建兼容的网络设备和协议。</li>
<li><strong>模块化：</strong> 各层次独立且互相协作，便于理解和实现复杂的网络通信功能。</li>
<li><strong>故障排除：</strong> 分层模型有助于定位和解决网络问题，明确问题出现在哪一层。</li>
<li><strong>互操作性：</strong> 促进不同网络和设备之间的互操作性和兼容性。</li>
</ol>
<h1 id="抓包工具查看tcpip的三次握手">抓包工具，查看TCP/IP的三次握手
</h1><blockquote>
<p>经典的问题，你了解TCP/IP的三次握手、四次挥手吗？</p>
</blockquote>
<p><img src="/nginx%e5%9f%ba%e7%a1%80%e7%af%87/assets/clipImg-1727252416553-1.png"
	
	
	
	loading="lazy"
	
		alt="clipImg"
	
	
></p>
<p>具体数据包的报文格式，暂时不用过多去琢磨；</p>
<p>什么时候需要琢磨数据包的序列号，只有当你在生产环境下，遇见的及其棘手的问题，比如一些数据不同步，交易数据丢失等极端情况，需要去抓取数据包，逐个分析，数据包的完整性，序列号。</p>
<p>目前只需要大致了解数据包的类型，以及作用即可；</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1. 抓取ssh登录的数据包，查看 tcp/ip协议基础之上的 SSH应用层协议
</span></span><span class="line"><span class="cl">登录web-7机器
</span></span><span class="line"><span class="cl">windows(192.168.xx.xx)  
</span></span><span class="line"><span class="cl">↓
</span></span><span class="line"><span class="cl">vmnet8(nat虚拟网卡，10.0.0.1)    
</span></span><span class="line"><span class="cl">↓
</span></span><span class="line"><span class="cl">web-7(nat 10.0.0.7)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">两个ip:port的数据包交互
</span></span><span class="line"><span class="cl">10.0.0.1:随机端口      &gt;   10.0.0.7:22
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">wireshark大鲨鱼抓包工具查看ssh登录数据包收发情况
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">在window去登录 web-7
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ssh远程连接，也是建立的tcp/ip的三次握手之上
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/nginx%e5%9f%ba%e7%a1%80%e7%af%87/assets/image-20220518110224456.png"
	
	
	
	loading="lazy"
	
		alt="image-20220518110224456"
	
	
></p>
<p><img src="/nginx%e5%9f%ba%e7%a1%80%e7%af%87/pic/image-20220518110650273.png"
	
	
	
	loading="lazy"
	
		alt="image-20220518110650273"
	
	
></p>
<p><img src="/nginx%e5%9f%ba%e7%a1%80%e7%af%87/pic/image-20220518111103594.png"
	
	
	
	loading="lazy"
	
		alt="image-20220518111103594"
	
	
></p>
<hr>
<p><img src="/nginx%e5%9f%ba%e7%a1%80%e7%af%87/pic/image-20220518111244612.png"
	
	
	
	loading="lazy"
	
		alt="image-20220518111244612"
	
	
></p>
<hr>
<hr>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">2. 查看网站访问的数据包，基于 tcp/ip 基础之上的 HTTP应用层协议
</span></span><span class="line"><span class="cl">由于捕捉的是 vmnet8的网卡流量，检测http协议，只能给这个网段内的机器，发http请求
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">这里需要注意，如果你多次访问nginx，你可能会抓不到默认的tcp三次握手
</span></span><span class="line"><span class="cl">tcp三次握手，是用于首次连接的
</span></span><span class="line"><span class="cl">访问nginx页面的请求，第一次以及建立好连接，默认会有一个保持连接
</span></span><span class="line"><span class="cl">你后续的请求，。就不会再继续tcp三次握手，而是直接发送http请求
</span></span><span class="line"><span class="cl">你和nginx服务器已经建立好tcp连接了。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">使用firefox另一个浏览器，重新去建立tcp连接
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/nginx%e5%9f%ba%e7%a1%80%e7%af%87/pic/image-20220518112155848.png"
	
	
	
	loading="lazy"
	
		alt="image-20220518112155848"
	
	
></p>
<p><strong>总结</strong></p>
<p><img src="/nginx%e5%9f%ba%e7%a1%80%e7%af%87/assets/clipImg-1727269349076-3.png"
	
	
	
	loading="lazy"
	
		alt="clipImg"
	
	
></p>
<h1 id="抓包工具查看四次挥手">抓包工具，查看四次挥手
</h1><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">先建立ssh连接，然后退出ssh会话，查看是否发出tcp/ip 的四次挥手，四个数据包
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/nginx%e5%9f%ba%e7%a1%80%e7%af%87/pic/image-20220518115530878.png"
	
	
	
	loading="lazy"
	
		alt="image-20220518115530878"
	
	
></p>
<p>![img](file:///C:\Users\Administrator\Documents\Tencent Files\1599185635\Image\C2C\3437f8bb7ab6c36f7a003767933167d9.jpg)</p>
<blockquote>
<p>1、MSL是什么</p>
<p>MSL是Maximum Segment Lifetime的英文缩写，可译为“最长报文段寿命”，它是任何报文在网络上存在的最长时间，超过这个时间报文将被丢弃。</p>
<p>2、为何等待2MSL</p>
<p>（1）为了保证客户端发送的最后一个ACK报文段能够到达服务器。</p>
<p>因为这个ACK有可能丢失，从而导致处在 LAST-ACK 状态的服务器收不到对 FIN-ACK 的确认报文。服务器会超时重传这个FIN-ACK，接着客户端再重传一次确认，重新启动时间等待计时器。最后客户端和服务器都能正常的关闭。假设客户端不等待2MSL，而是在发送完ACK之后直接释放关闭，一但这个ACK丢失的话，服务器就无法正常的进入关闭连接状态。即：保证客户端发送的最后一个ACK报文段能够到达服务端。</p>
<p>这个ACK报文段有可能丢失，使得处于 LAST-ACK 状态的B收不到对已发送的 FIN+ACK 报文段的确认，服务端超时重传 FIN+ACK 报文段，而客户端能在2MSL时间内收到这个重传的FIN+ACK 报文段，接着客户端重传一次确认，重新启动2MSL计时器，最后客户端和服务端都进入到 CLOSED 状态，若客户端在 TIME-WAIT 状态不等待一段时间，而是发送完ACK报文段后立即释放连接，则无法收到服务端重传的 FIN+ACK 报文段，所以不会再发送一次确认报文段，则服务端无法正常进入到 CLOSED 状态。</p>
<p>（2）防止“已失效的连接请求报文段”出现在本连接中。</p>
<p>客户端在发送完最后一个ACK报文段后，再经过2MSL，就可以使本连接持续的时间内所产生 的所有报文段都从网络中消失，使下一个新的连接中不会出现这种旧的连接请求报文段。</p>
</blockquote>
<h1 id="tcp连接状态报文">TCP连接状态报文
</h1><blockquote>
<p>面试时候拿出来背诵即可</p>
</blockquote>
<p>1 CLOSE没有任何连接状态</p>
<p>2 LISTEN监听状志，等待来自TCP的连接请求</p>
<p>3 SYN-5ENT发送连接请求后，等待对方确认</p>
<p>4 SYN-RECEIVED收到、发送一个连接请求后，等待对方确认</p>
<p>5 ESTABLISHED代表传输连接已经建立，双方进入数据传输状态</p>
<p>6 FIN-HAIT-1主动关闭1,主机己发送关闭连接请求，等特对方确认</p>
<p>7FIN-HAIT-2主动关闭2,主机己收到对方关闭传输连接的确认，等待对方发送关闭传输连接请求</p>
<p>8 TINE-WAIT完成双向传输连接关闭，等待服务端最终确认</p>
<p>9 CLO5E-WAIT被动关闭连接。收到对方发来的关闭连接请求，且己经确认。</p>
<p>10 LAST-ACK被动关闭，等待最后一个关闭传输连接的确认。</p>
<p>11 CLOSE双方同时确认了关闭传输连接</p>
<h1 id="常见端口号">常见端口号
</h1><h1 id="常用的熟知端口号">常用的熟知端口号
</h1><div class="table-wrapper"><table>
<thead>
<tr>
<th>应用程序</th>
<th>FTP</th>
<th>TFTP</th>
<th>TELNET</th>
<th>SMTP</th>
<th>DNS</th>
<th>HTTP</th>
<th>SSH</th>
<th>MYSQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>熟知端口</td>
<td>21,20</td>
<td>69</td>
<td>23</td>
<td>25</td>
<td>53</td>
<td>80</td>
<td>22</td>
<td>3306</td>
</tr>
<tr>
<td>传输层协议</td>
<td>TCP</td>
<td>UDP</td>
<td>TCP</td>
<td>TCP</td>
<td>UDP</td>
<td>TCP</td>
<td>TCP</td>
<td>TCP</td>
</tr>
</tbody>
</table></div>
<h1 id="什么是socket套接字">什么是socket套接字
</h1><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">任何，两个机器的连接，指的是tcp/ip协议的连接，本质上是两个socket的通信
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">socket套接字就是 ip+port的具象化
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">比如部署nginx服务，运行在 10.0.0.7:80 端口，这就是一个socket
</span></span><span class="line"><span class="cl">通过本地去访问这个socket，浏览器随机指定的端口，发出请求
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">10.0.0.1:61145   这个也是一个socket
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="网络套接字">网络套接字
</h2><p>套接字存在的意义，在于让两端进行数据交互，数据传输，部署LNMP，这是不同机器之间的远程访问，就是远程socket</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">比如 http协议的交互
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">10.0.0.1:61145  &gt;   10.0.0.7:80
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">马上学习nginx反向代理，远程部署
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">lb-5
</span></span><span class="line"><span class="cl">10.0.0.5:80      
</span></span><span class="line"><span class="cl">↓
</span></span><span class="line"><span class="cl">web-7
</span></span><span class="line"><span class="cl">10.0.0.7:9000 (php-fpm)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">叫做远程的socket通信
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">简单说就是你部署 10.0.0.5:80   这个服务，还会和远程的另一个服务通过网络通信 
</span></span><span class="line"><span class="cl">10.0.0.7:9000
</span></span><span class="line"><span class="cl">两端进行数据交互，专业名词就叫做socket通信
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="本地套接字">本地套接字
</h2><p>比如单机LNMP，应用程序在机器内部内存之间数据交互</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">另一个形式是，也就是文件形式的本地socket
</span></span><span class="line"><span class="cl">（因为本地内存文件socket形式，比网络socket传输效率更高，）
</span></span><span class="line"><span class="cl">在后面高级部分，我教大家企业常用的python后端部署
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">socket的都是具象化证明服务的确运行了，可以对外提供访问了，可以交互了
</span></span><span class="line"><span class="cl">mysql运行在 /tmp/mysql.sock
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">这个文件存在，则表示mysql运行
</span></span><span class="line"><span class="cl">你可以通过这个/tmp/mysql.sock去登录mysql数据库
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">咱们暂时部署形式都是 网络socket形式，将程序部署在 ip：port的形式。
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="http协议工作原理">HTTP协议工作原理
</h1><p>这些内容，都是你部署网站，后续的nginx高级知识点，必备的内容</p>
<h2 id="无状态stateless和cookie">无状态（stateless）和cookie
</h2><p>http默认不会记住每一次连接的状态信息，下一次都会认为是一个新的客户端连接</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">比如你去找到禁用浏览器的cookie功能，
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">1.你去禁用这个功能后
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2. 你每次登录淘宝网， 再打开一页面，网站又提示你需要登录
</span></span><span class="line"><span class="cl">。。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cookie功能这是网站为了解决无状态实现的技术
</span></span></code></pre></td></tr></table>
</div>
</div><p>这种无状态设计是为了保证HTTP可以处理大量的请求响应</p>
<h2 id="请求方法">请求方法
</h2><p>定义client发给server的请求，是什么类型</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left">序号</th>
<th style="text-align:left">方法</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">GET</td>
<td style="text-align:left">从服务器获取资源。用于请求数据而不对数据进行更改。例如，从服务器获取网页、图片等。</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left">POST</td>
<td style="text-align:left">向服务器发送数据以创建新资源。常用于提交表单数据或上传文件。发送的数据包含在请求体中。</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left">PUT</td>
<td style="text-align:left">向服务器发送数据以更新现有资源。如果资源不存在，则创建新的资源。与 POST 不同，PUT 通常是幂等的，即多次执行相同的 PUT 请求不会产生不同的结果。</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left">DELETE</td>
<td style="text-align:left">从服务器删除指定的资源。请求中包含要删除的资源标识符。</td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td style="text-align:left">PATCH</td>
<td style="text-align:left">对资源进行部分修改。与 PUT 类似，但 PATCH 只更改部分数据而不是替换整个资源。</td>
</tr>
<tr>
<td style="text-align:left">6</td>
<td style="text-align:left">HEAD</td>
<td style="text-align:left">类似于 GET，但服务器只返回响应的头部，不返回实际数据。用于检查资源的元数据（例如，检查资源是否存在，查看响应的头部信息）。</td>
</tr>
<tr>
<td style="text-align:left">7</td>
<td style="text-align:left">OPTIONS</td>
<td style="text-align:left">返回服务器支持的 HTTP 方法。用于检查服务器支持哪些请求方法，通常用于跨域资源共享（CORS）的预检请求。</td>
</tr>
<tr>
<td style="text-align:left">8</td>
<td style="text-align:left">TRACE</td>
<td style="text-align:left">回显服务器收到的请求，主要用于诊断。客户端可以查看请求在服务器中的处理路径。</td>
</tr>
<tr>
<td style="text-align:left">9</td>
<td style="text-align:left">CONNECT</td>
<td style="text-align:left">建立一个到服务器的隧道，通常用于 HTTPS 连接。客户端可以通过该隧道发送加密的数据。</td>
</tr>
</tbody>
</table></div>
<h2 id="请求响应报文查看">请求、响应报文查看
</h2><p>通过F12即可查看，也可以通过抓包工具查看</p>
<h2 id="响应状态码">响应状态码
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1. 当你client  发出 get请求 获取一个图片信息  ，发出requests
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.  server  响应结果，nginx找到这个图片，返回给用户，  response
</span></span><span class="line"><span class="cl">响应信息，是有对应的状态码的
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">学习nginx会遇见的内容
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>20x系列，表示请求，响应正常解析</li>
<li>30x系列，表示本次请求，被转发到另一个服务器上了。。</li>
<li>40x系列，表示client客户端访问的url有问题，该资源不存在</li>
<li>50x系列，表示网站的服务端出错了（php-fpm）没有运行</li>
<li>&hellip;&hellip;</li>
</ul>
<h1 id="总结梳理">总结梳理
</h1><p>面试拿出来背即可</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="mf">1.</span><span class="n">dns篇</span>
</span></span><span class="line"><span class="cl"><span class="err">用户访问域名</span><span class="n">www</span><span class="o">.</span><span class="n">bzit</span><span class="o">.</span><span class="n">cn</span>
</span></span><span class="line"><span class="cl"><span class="err">↓</span>
</span></span><span class="line"><span class="cl"><span class="err">浏览器跳转</span>
</span></span><span class="line"><span class="cl"><span class="err">↓</span>
</span></span><span class="line"><span class="cl"><span class="err">浏览器缓存（</span><span class="n">disk</span> <span class="n">cache</span><span class="err">）</span>
</span></span><span class="line"><span class="cl"><span class="err">↓</span>
</span></span><span class="line"><span class="cl"><span class="n">Hosts文件</span>
</span></span><span class="line"><span class="cl"><span class="err">↓</span>
</span></span><span class="line"><span class="cl"><span class="err">本地</span><span class="n">DNS服务器</span><span class="err">（递归查询</span> <span class="o">&gt;</span> <span class="err">迭代查询）</span>
</span></span><span class="line"><span class="cl"><span class="err">↓</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="err">向</span> <span class="n">server发起查询</span><span class="err">（递归查询）</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span> <span class="err">向</span> <span class="n">server发起查询</span><span class="err">（迭代查询）</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mf">2.</span><span class="n">TCP</span><span class="o">/</span><span class="n">IP协议篇</span><span class="err">（三次握手）</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">&gt;</span> <span class="n">SYN报文</span><span class="err">，请求连接</span> 
</span></span><span class="line"><span class="cl"><span class="n">server</span> <span class="o">&gt;</span> <span class="n">SYN</span><span class="err">，</span><span class="n">ACK报文</span> <span class="err">响应</span><span class="n">client</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span>  <span class="o">&gt;</span> <span class="n">ACK</span><span class="err">，建立连接</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mf">3.</span><span class="err">客户端发起</span><span class="n">http请求</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">请求方法是什么、</span><span class="n">get</span><span class="err">、</span><span class="n">post</span><span class="err">、</span><span class="n">delete</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">请求主机是什么、</span><span class="n">www</span><span class="o">.</span><span class="n">bzit</span><span class="o">.</span><span class="n">cn</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">请求资源是什么</span> <span class="err">、</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">bzit</span><span class="o">.</span><span class="n">cn</span><span class="p">:</span><span class="mi">8090</span><span class="o">/</span><span class="n">upload</span><span class="o">/</span><span class="mi">2022</span><span class="o">/</span><span class="mi">05</span><span class="o">/</span><span class="n">Xnip2022</span><span class="o">-</span><span class="mi">05</span><span class="o">-</span><span class="mi">01</span><span class="n">_16</span><span class="o">-</span><span class="mi">32</span><span class="o">-</span><span class="mi">30</span><span class="o">-</span><span class="n">b82235c9b62c42af8ea25e0313ca42f7</span><span class="o">.</span><span class="n">jpg</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">请求端口是什么、默认</span><span class="n">http是80</span><span class="err">、</span><span class="n">https是443</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">请求参数是什么、请求头部信息（资源类型、是否压缩、</span><span class="n">cookie</span><span class="err">、浏览器客户端等）</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">请求信息最后的换行</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mf">4.</span><span class="err">服务端响应的内容</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">server信息</span><span class="err">（</span><span class="n">web服务器软件类型</span><span class="err">）</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">响应文件类型</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">响应头部信息（是否压缩，语言编码，是否保持连接等）</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="mf">5.</span><span class="err">客户端发起</span><span class="n">TCP四次挥手断开连接</span><span class="err">。</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">&gt;</span> <span class="err">发起断开请求</span> <span class="n">FIN</span><span class="o">=</span><span class="mi">1</span> 
</span></span><span class="line"><span class="cl"><span class="n">server</span>  <span class="o">&gt;</span> <span class="err">响应断开</span>   <span class="n">FIN</span><span class="err">、</span><span class="n">ACK</span>
</span></span><span class="line"><span class="cl"><span class="n">server</span>  <span class="o">&gt;</span> <span class="err">发起断开请求</span> <span class="n">FIN</span><span class="o">=</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">client</span> <span class="o">&gt;</span> <span class="err">确认断开连接</span> <span class="n">ACK</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 小诗
    </section>
    
    <section class="powerby">
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/xiaoshi/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
