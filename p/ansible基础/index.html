<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="ÂâçË®Ä Â≠¶ansibleÔºåÂü∫Á°ÄÁØáÂ∞±ÊòØ‰∏Ä‰ª∂‰∫ã Â≠¶ÂêÑÁßçÊ®°ÂùóÁöÑËØ≠Ê≥ïÔºåÂèÇÊï∞ Áî±‰∫éÊ®°ÂùóËæÉÂ§öÔºåÂèÇÊï∞ËæÉÂ§öÔºåÈúÄË¶ÅÂÅöÂ•ΩÁ¨îËÆ∞Ôºå‰ª•Âèä‰∏ÄÂÆöÁöÑËÉåËØµÔºåÊï≤ÊâìÂª∫ËÆÆËÆ∞ÂøÜ Âü∫Á°ÄÁØáÂ≠¶‰π†Ë∑ØÁ∫ø">
<title>AnsibleÂü∫Á°Ä</title>

<link rel='canonical' href='https://ZackMoel.github.io/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/'>

<link rel="stylesheet" href="/xiaoshi/scss/style.min.0304c6baf04e01a8fe70693791cb744d56a3578a3120a8796cefc66825aa39c7.css"><meta property='og:title' content="AnsibleÂü∫Á°Ä">
<meta property='og:description' content="ÂâçË®Ä Â≠¶ansibleÔºåÂü∫Á°ÄÁØáÂ∞±ÊòØ‰∏Ä‰ª∂‰∫ã Â≠¶ÂêÑÁßçÊ®°ÂùóÁöÑËØ≠Ê≥ïÔºåÂèÇÊï∞ Áî±‰∫éÊ®°ÂùóËæÉÂ§öÔºåÂèÇÊï∞ËæÉÂ§öÔºåÈúÄË¶ÅÂÅöÂ•ΩÁ¨îËÆ∞Ôºå‰ª•Âèä‰∏ÄÂÆöÁöÑËÉåËØµÔºåÊï≤ÊâìÂª∫ËÆÆËÆ∞ÂøÜ Âü∫Á°ÄÁØáÂ≠¶‰π†Ë∑ØÁ∫ø">
<meta property='og:url' content='https://ZackMoel.github.io/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/'>
<meta property='og:site_name' content='Â∞èËØó'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-04-14T16:38:41&#43;08:00'/><meta property='article:modified_time' content='2025-04-14T16:38:41&#43;08:00'/>
<meta name="twitter:title" content="AnsibleÂü∫Á°Ä">
<meta name="twitter:description" content="ÂâçË®Ä Â≠¶ansibleÔºåÂü∫Á°ÄÁØáÂ∞±ÊòØ‰∏Ä‰ª∂‰∫ã Â≠¶ÂêÑÁßçÊ®°ÂùóÁöÑËØ≠Ê≥ïÔºåÂèÇÊï∞ Áî±‰∫éÊ®°ÂùóËæÉÂ§öÔºåÂèÇÊï∞ËæÉÂ§öÔºåÈúÄË¶ÅÂÅöÂ•ΩÁ¨îËÆ∞Ôºå‰ª•Âèä‰∏ÄÂÆöÁöÑËÉåËØµÔºåÊï≤ÊâìÂª∫ËÆÆËÆ∞ÂøÜ Âü∫Á°ÄÁØáÂ≠¶‰π†Ë∑ØÁ∫ø">
  


    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/xiaoshi/">
                
                    
                    
                    
                        
                        <img src="/xiaoshi/img/avatar_hu8920112365793990935.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/xiaoshi">Â∞èËØó</a></h1>
            <h2 class="site-description">‰∏ñÁïåÂíåÂπ≥</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/1055981889?spm_id_from=333.1007.0.0'
                        target="_blank"
                        title="bilibili"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-bilibili"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" /><path d="M8 3l2 3" /><path d="M16 3l-2 3" /><path d="M9 13v-2" /><path d="M15 11v2" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/ZackMoel/xiaoshi.github.io'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/xiaoshi/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>ÂèãÊÉÖÈìæÊé•</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#Âú®master-61ÁÆ°ÁêÜÊú∫ÂÆâË£Ö">Âú®master-61ÁÆ°ÁêÜÊú∫ÂÆâË£Ö</a></li>
    <li><a href="#ÂÖ∂‰ªñË¢´ÁÆ°ÁêÜÁöÑÊú∫Âô®">ÂÖ∂‰ªñË¢´ÁÆ°ÁêÜÁöÑÊú∫Âô®</a></li>
    <li><a href="#‰∏ªÊú∫Ê∏ÖÂçïÊñá‰ª∂‰∏ªÊú∫ÂàÜÁªÑ">‰∏ªÊú∫Ê∏ÖÂçïÊñá‰ª∂Ôºà‰∏ªÊú∫ÂàÜÁªÑÔºâ</a></li>
  </ol>

  <ol>
    <li><a href="#ansibleÂü∫‰∫éÂÖ¨ÁßÅÈí•ËÆ§ËØÅ">ansibleÂü∫‰∫éÂÖ¨ÁßÅÈí•ËÆ§ËØÅ</a></li>
    <li><a href="#Âü∫‰∫éÂØÜÁ†ÅËÆ§ËØÅ">Âü∫‰∫éÂØÜÁ†ÅËÆ§ËØÅ</a></li>
    <li><a href="#ansible‰∏ªÊú∫Ê∏ÖÂçïÈÖçÁΩÆÊñá‰ª∂ËØ≠Ê≥ïÈáçË¶Å">ansible‰∏ªÊú∫Ê∏ÖÂçïÈÖçÁΩÆÊñá‰ª∂ËØ≠Ê≥ïÔºàÈáçË¶ÅÔºâ</a></li>
    <li><a href="#ÁªôrsyncÊú∫Âô®ËøõË°åÂØÜÁ†ÅËÆ§ËØÅ">ÁªôrsyncÊú∫Âô®ÔºåËøõË°åÂØÜÁ†ÅËÆ§ËØÅ</a></li>
    <li><a href="#Ê∑ªÂä†webÊú∫Âô®ÁªÑÁöÑ‰ø°ÊÅØ">Ê∑ªÂä†webÊú∫Âô®ÁªÑÁöÑ‰ø°ÊÅØ</a>
      <ol>
        <li>
          <ol>
            <li><a href="#ÊãøwebÊú∫Âô®ÊµãËØïÂçïÁã¨Êìç‰ΩúÊüê‰∏ªÊú∫">ÊãøwebÊú∫Âô®ÊµãËØïÔºàÂçïÁã¨Êìç‰ΩúÊüê‰∏ªÊú∫Ôºâ</a></li>
            <li><a href="#ÊåáÁ∫πÊïÖÈöúËß£ÂÜ≥">ÊåáÁ∫πÊïÖÈöúËß£ÂÜ≥</a></li>
            <li><a href="#Ë∏©ÂùëËÆ∞ÂΩïansibleÁºìÂ≠ò">Ë∏©ÂùëËÆ∞ÂΩï(ansibleÁºìÂ≠ò)</a></li>
            <li><a href="#Âêå‰∏ÄÁªÑËøûÁª≠ÁöÑip">Âêå‰∏ÄÁªÑËøûÁª≠ÁöÑip</a></li>
            <li><a href="#ÂÖ¨ÂÖ±ÂèòÈáè">ÂÖ¨ÂÖ±ÂèòÈáè</a></li>
            <li><a href="#ÊµãËØïwebÁªÑÂíåbackupÁªÑÊòØÂê¶ÂèØÁî®">ÊµãËØïwebÁªÑÂíåbackupÁªÑÊòØÂê¶ÂèØÁî®</a></li>
            <li><a href="#ÊâÄÊúâ‰∏ªÊú∫ÈÉΩÁîüÊïàÁöÑÂèòÈáè‰∫ÜËß£">ÊâÄÊúâ‰∏ªÊú∫ÈÉΩÁîüÊïàÁöÑÂèòÈáè„Äê‰∫ÜËß£„Äë</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>

  <ol>
    <li><a href="#ad-hocÊ®°Âºè">ad-hocÊ®°Âºè</a></li>
    <li><a href="#playbookÊ®°Âºè">PlaybookÊ®°Âºè</a></li>
    <li><a href="#ansible-docÂëΩ‰ª§">ansible-docÂëΩ‰ª§</a></li>
  </ol>

  <ol>
    <li><a href="#ansibleÊâßË°åÂëΩ‰ª§ÁªìÊûúÁä∂ÊÄÅÈ¢úËâ≤">ansibleÊâßË°åÂëΩ‰ª§ÁªìÊûúÔºàÁä∂ÊÄÅÈ¢úËâ≤Ôºâ</a></li>
    <li><a href="#ÂÆòÁΩëÊñáÊ°£">ÂÆòÁΩëÊñáÊ°£</a></li>
    <li><a href="#41-pingÊµãËØïËøûÈÄöÊÄß">4.1 pingÊµãËØïËøûÈÄöÊÄß</a></li>
    <li><a href="#42-command-ÁÆÄÂçïÂëΩ‰ª§Ê®°Âùó">4.2 command ÁÆÄÂçïÂëΩ‰ª§Ê®°Âùó</a>
      <ol>
        <li><a href="#ËøúÁ®ãÊü•Áúã‰∏ªÊú∫Âêç">ËøúÁ®ãÊü•Áúã‰∏ªÊú∫Âêç</a></li>
        <li><a href="#Êü•ÁúãËøúÁ®ã‰∏ªÊú∫ÂÜÖÂ≠ò">Êü•ÁúãËøúÁ®ã‰∏ªÊú∫ÂÜÖÂ≠ò</a></li>
        <li><a href="#ËøúÁ®ãÂàõÂª∫Êñá‰ª∂Êü•ÁúãÊñá‰ª∂">ËøúÁ®ãÂàõÂª∫Êñá‰ª∂„ÄÅÊü•ÁúãÊñá‰ª∂</a></li>
        <li><a href="#ËøúÁ®ãËé∑ÂèñÊú∫Âô®Ë¥üËΩΩ">ËøúÁ®ãËé∑ÂèñÊú∫Âô®Ë¥üËΩΩ</a></li>
        <li><a href="#ÂÖ≥Èó≠ÂëäË≠¶‰ø°ÊÅØ">ÂÖ≥Èó≠ÂëäË≠¶‰ø°ÊÅØ</a></li>
        <li><a href="#Âú®ÊâÄÊúâÊú∫Âô®‰∏äÂàõÂª∫baizhi01Áî®Êà∑">Âú®ÊâÄÊúâÊú∫Âô®‰∏äÔºåÂàõÂª∫baizhi01Áî®Êà∑</a></li>
        <li><a href="#‰ΩøÁî®commandÊèê‰æõÁöÑ‰∏ìÊúâÂëΩ‰ª§">‰ΩøÁî®commandÊèê‰æõÁöÑ‰∏ìÊúâÂëΩ‰ª§</a></li>
      </ol>
    </li>
    <li><a href="#43-shellÊ®°Âùó‰∏áËÉΩÊ®°Âùó">4.3 shellÊ®°ÂùóÔºà‰∏áËÉΩÊ®°ÂùóÔºâ</a></li>
    <li><a href="#44-copyÊã∑Ë¥ùÊñá‰ª∂">4.4 copyÊã∑Ë¥ùÊñá‰ª∂</a>
      <ol>
        <li><a href="#copyËØ≠Ê≥ï">copyËØ≠Ê≥ï</a></li>
        <li><a href="#ÁÆÄÂçïÂèëÈÄÅÊñá‰ª∂">ÁÆÄÂçïÂèëÈÄÅÊñá‰ª∂</a></li>
        <li><a href="#ÂèëÈÄÅÊñá‰ª∂‰∏îÊåáÂÆöÊñá‰ª∂Â±ûÊÄß">ÂèëÈÄÅÊñá‰ª∂‰∏îÊåáÂÆöÊñá‰ª∂Â±ûÊÄß</a></li>
        <li><a href="#ÂèëÈÄÅÊñá‰ª∂‰∏îÂÖàÂÅöÂ•ΩÂ§á‰ªΩ">ÂèëÈÄÅÊñá‰ª∂‰∏îÂÖàÂÅöÂ•ΩÂ§á‰ªΩ</a></li>
        <li><a href="#ÊåáÂÆöÊï∞ÊçÆÂÜôÂÖ•Âà∞ËøúÁ®ãÊñá‰ª∂‰∏≠">ÊåáÂÆöÊï∞ÊçÆÂÜôÂÖ•Âà∞ËøúÁ®ãÊñá‰ª∂‰∏≠</a></li>
        <li><a href="#Â§çÂà∂Êñá‰ª∂Â§π">Â§çÂà∂Êñá‰ª∂Â§π</a></li>
      </ol>
    </li>
    <li><a href="#45-fileÊñá‰ª∂Êìç‰ΩúÊ®°Âùó">4.5 fileÊñá‰ª∂Êìç‰ΩúÊ®°Âùó</a>
      <ol>
        <li><a href="#ËøúÁ®ãÂàõÂª∫Êñá‰ª∂">ËøúÁ®ãÂàõÂª∫Êñá‰ª∂</a></li>
        <li><a href="#ÂàõÂª∫Êñá‰ª∂Â§π">ÂàõÂª∫Êñá‰ª∂Â§π</a></li>
        <li><a href="#ÂàõÂª∫Êñá‰ª∂‰∏îËÆæÂÆöÊùÉÈôê">ÂàõÂª∫Êñá‰ª∂‰∏îËÆæÂÆöÊùÉÈôê</a></li>
        <li><a href="#ËøúÁ®ã‰øÆÊîπÊñá‰ª∂Â±ûÊÄß">ËøúÁ®ã‰øÆÊîπÊñá‰ª∂Â±ûÊÄß</a></li>
        <li><a href="#ÂàõÂª∫ËΩØËøûÊé•Êñá‰ª∂">ÂàõÂª∫ËΩØËøûÊé•Êñá‰ª∂</a></li>
        <li><a href="#Âº∫Âà∂ÊÄßÂàõÂª∫Êñá‰ª∂ËΩØËøûÊé•">Âº∫Âà∂ÊÄßÂàõÂª∫Êñá‰ª∂ÔºàËΩØËøûÊé•Ôºâ</a></li>
        <li><a href="#‰øÆÊîπÂ∑≤Â≠òÂú®Êñá‰ª∂Êñá‰ª∂Â§πÁöÑÂ±ûÊÄß">‰øÆÊîπÂ∑≤Â≠òÂú®Êñá‰ª∂/Êñá‰ª∂Â§πÁöÑÂ±ûÊÄß</a></li>
        <li><a href="#ÂÖ≥‰∫éfileÊ®°ÂùóÁöÑÊâÄÊúâÂèÇÊï∞‰ΩúÁî®">ÂÖ≥‰∫éfileÊ®°ÂùóÁöÑÊâÄÊúâÂèÇÊï∞‰ΩúÁî®</a></li>
        <li><a href="#ÂÖ≥‰∫éfileÊ®°ÂùóÁöÑÂÆû‰æãÁî®Ê≥ï">ÂÖ≥‰∫éfileÊ®°ÂùóÁöÑÂÆû‰æãÁî®Ê≥ï</a></li>
      </ol>
    </li>
    <li><a href="#46-scriptËÑöÊú¨Ê®°Âùó">4.6 scriptËÑöÊú¨Ê®°Âùó</a>
      <ol>
        <li><a href="#scriptsÊ®°ÂùóÁöÑÂäüËÉΩÂèÇÊï∞">scriptsÊ®°ÂùóÁöÑÂäüËÉΩÂèÇÊï∞</a></li>
        <li><a href="#ËøúÁ®ãÂú®ÁõÆÊ†áÊú∫Âô®ÊâßË°åËÑöÊú¨">ËøúÁ®ãÂú®ÁõÆÊ†áÊú∫Âô®ÊâßË°åËÑöÊú¨</a></li>
        <li><a href="#Êü•ÁúãÂëΩ‰ª§ÊâßË°åËØ¶ÁªÜËøáÁ®ã">Êü•ÁúãÂëΩ‰ª§ÊâßË°åËØ¶ÁªÜËøáÁ®ã</a></li>
      </ol>
    </li>
    <li><a href="#47-cronÂÆöÊó∂‰ªªÂä°Ê®°Âùó">4.7 cronÂÆöÊó∂‰ªªÂä°Ê®°Âùó</a>
      <ol>
        <li><a href="#ÂØπÊØîansibleÁöÑcronÊ®°Âùó‰ª•Âèäcrontab">ÂØπÊØîansibleÁöÑcronÊ®°Âùó‰ª•Âèäcrontab</a></li>
        <li><a href="#Ê∑ªÂä†ntpdateÂÆöÊó∂‰ªªÂä°">Ê∑ªÂä†ntpdateÂÆöÊó∂‰ªªÂä°</a></li>
        <li><a href="#Âà†Èô§ÂÆöÊó∂‰ªªÂä°">Âà†Èô§ÂÆöÊó∂‰ªªÂä°</a></li>
        <li><a href="#ÂàõÂª∫ÊØèÂàÜÈíüÊâßË°åÁöÑ‰ªªÂä°">ÂàõÂª∫ÊØèÂàÜÈíüÊâßË°åÁöÑ‰ªªÂä°</a></li>
        <li><a href="#‰øÆÊîπÊåáÂÆöÂêçÁß∞ÁöÑÂÆöÊó∂‰ªªÂä°">‰øÆÊîπÊåáÂÆöÂêçÁß∞ÁöÑÂÆöÊó∂‰ªªÂä°</a></li>
      </ol>
    </li>
    <li><a href="#48-groupÊ®°Âùó">4.8 groupÊ®°Âùó</a>
      <ol>
        <li><a href="#ÂàõÂª∫baizhi_opsÁªÑgid1234">ÂàõÂª∫baizhi_opsÁªÑÔºågid=1234</a></li>
        <li><a href="#Âà†Èô§ÁªÑ">Âà†Èô§ÁªÑ</a></li>
      </ol>
    </li>
    <li><a href="#49-userÁî®Êà∑Ê®°Âùó">4.9 userÁî®Êà∑Ê®°Âùó</a>
      <ol>
        <li><a href="#ËØ≠Ê≥ïÂèÇÊï∞">ËØ≠Ê≥ïÂèÇÊï∞</a></li>
        <li><a href="#ÂàõÂª∫baizhi001Áî®Êà∑uid‰∏∫8888">ÂàõÂª∫baizhi001Áî®Êà∑Ôºåuid‰∏∫8888</a></li>
        <li><a href="#ÂàõÂª∫Áî®Êà∑cc01">ÂàõÂª∫Áî®Êà∑cc01</a></li>
      </ol>
    </li>
    <li><a href="#410-yumÂÆâË£ÖËΩØ‰ª∂">4.10 yumÂÆâË£ÖËΩØ‰ª∂</a>
      <ol>
        <li><a href="#ÂÆòÁΩëÊñáÊ°£Á§∫‰æãÁî®Ê≥ï">ÂÆòÁΩëÊñáÊ°£Á§∫‰æãÁî®Ê≥ï</a></li>
        <li><a href="#ÂÆâË£Önet-toolsÊúÄÊñ∞ÁâàÊú¨">ÂÆâË£Önet-toolsÊúÄÊñ∞ÁâàÊú¨</a></li>
        <li><a href="#Âç∏ËΩΩnet-toolsËΩØ‰ª∂">Âç∏ËΩΩnet-toolsËΩØ‰ª∂</a></li>
        <li><a href="#ÂÆâË£ÖrsyncÊúçÂä°">ÂÆâË£ÖrsyncÊúçÂä°</a></li>
        <li><a href="#Âç∏ËΩΩrsyncÊúçÂä°">Âç∏ËΩΩrsyncÊúçÂä°</a></li>
      </ol>
    </li>
    <li><a href="#411-servicesystemdÊ®°Âùó">4.11 service/systemdÊ®°Âùó</a>
      <ol>
        <li><a href="#systemdÊ®°ÂùóÂèÇÊï∞">systemdÊ®°ÂùóÂèÇÊï∞</a></li>
        <li><a href="#ÂÆâË£ÖÂêØÂä®nginxÊúçÂä°">ÂÆâË£Ö„ÄÅÂêØÂä®nginxÊúçÂä°</a></li>
      </ol>
    </li>
    <li><a href="#412-mountÊåÇËΩΩÊ®°Âùó">4.12 mountÊåÇËΩΩÊ®°Âùó</a>
      <ol>
        <li><a href="#Âú®nfs-31Êú∫Âô®ÂáÜÂ§ánfs">Âú®nfs-31Êú∫Âô®ÂáÜÂ§ánfs</a></li>
        <li><a href="#Áªôweb-7Êú∫Âô®ÊåÇËΩΩnfsÁõÆÂΩïÂè™ÂÜôÂÖ•etcfstabËÄå‰∏çÁ´ãÂç≥ÊåÇËΩΩ">Áªôweb-7Êú∫Âô®ÊåÇËΩΩnfsÁõÆÂΩïÔºàÂè™ÂÜôÂÖ•/etc/fstabËÄå‰∏çÁ´ãÂç≥ÊåÇËΩΩÔºâ</a></li>
        <li><a href="#Áªôweb-7Êú∫Âô®ÊåÇËΩΩnfsÁõÆÂΩïÁ´ãÂç≥ÊåÇËΩΩ‰∏îÂÜôÂÖ•etcfstab">Áªôweb-7Êú∫Âô®ÊåÇËΩΩnfsÁõÆÂΩïÔºàÁ´ãÂç≥ÊåÇËΩΩ‰∏îÂÜôÂÖ•/etc/fstabÔºâ</a></li>
        <li><a href="#ÂèñÊ∂àÊåÇËΩΩ‰ª•ÂèäÂà†Èô§fstabËÆ∞ÂΩï">ÂèñÊ∂àÊåÇËΩΩÔºå‰ª•ÂèäÂà†Èô§fstabËÆ∞ÂΩï</a></li>
        <li><a href="#ÂèñÊ∂àÊåÇËΩΩ‰∏çÂà†Èô§fstabËÆ∞ÂΩï">ÂèñÊ∂àÊåÇËΩΩÔºå‰∏çÂà†Èô§fstabËÆ∞ÂΩï</a></li>
        <li><a href="#stateÊÄªÁªìÂèÇÊï∞">stateÊÄªÁªìÂèÇÊï∞</a></li>
      </ol>
    </li>
    <li><a href="#413-archiveÂéãÁº©Ê®°Âùó">4.13 archiveÂéãÁº©Ê®°Âùó</a>
      <ol>
        <li><a href="#ÊîØÊåÅÂéãÁº©Á±ªÂûã">ÊîØÊåÅÂéãÁº©Á±ªÂûã</a></li>
        <li><a href="#ÂéãÁº©etcÈÖçÁΩÆÊñá‰ª∂Âà∞ÊåáÂÆöË∑ØÂæÑ">ÂéãÁº©/etcÈÖçÁΩÆÊñá‰ª∂Âà∞ÊåáÂÆöË∑ØÂæÑ</a></li>
        <li><a href="#ÂéãÁº©varlog‰∏∫zipÁ±ªÂûãÂà∞ÊåáÂÆöË∑ØÂæÑ">ÂéãÁº©/var/log‰∏∫zipÁ±ªÂûãÂà∞ÊåáÂÆöË∑ØÂæÑ</a></li>
      </ol>
    </li>
    <li><a href="#414-unarchiveËß£ÂéãÁº©Ê®°Âùó">4.14 unarchiveËß£ÂéãÁº©Ê®°Âùó</a>
      <ol>
        <li><a href="#Ëß£ÂéãÁº©etctgzÂà∞ÊåáÂÆöÁõÆÂΩïËøúÁ®ãËß£Âéã">Ëß£ÂéãÁº©etc.tgzÂà∞ÊåáÂÆöÁõÆÂΩïÔºàËøúÁ®ãËß£ÂéãÔºâ</a></li>
        <li><a href="#Â∞ÜÁÆ°ÁêÜÊú∫ÁöÑÂéãÁº©ÂåÖËß£ÂéãÂà∞ËøúÁ®ãÊú∫Âô®‰∏ä">Â∞ÜÁÆ°ÁêÜÊú∫ÁöÑÂéãÁº©ÂåÖÔºåËß£ÂéãÂà∞ËøúÁ®ãÊú∫Âô®‰∏ä</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/">AnsibleÂü∫Á°Ä</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-04-14</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="ÂâçË®Ä">ÂâçË®Ä
</h1><p>Â≠¶ansibleÔºåÂü∫Á°ÄÁØáÂ∞±ÊòØ‰∏Ä‰ª∂‰∫ã</p>
<ul>
<li>Â≠¶ÂêÑÁßçÊ®°ÂùóÁöÑËØ≠Ê≥ïÔºåÂèÇÊï∞</li>
<li>Áî±‰∫éÊ®°ÂùóËæÉÂ§öÔºåÂèÇÊï∞ËæÉÂ§öÔºåÈúÄË¶ÅÂÅöÂ•ΩÁ¨îËÆ∞Ôºå‰ª•Âèä‰∏ÄÂÆöÁöÑËÉåËØµÔºåÊï≤ÊâìÂª∫ËÆÆËÆ∞ÂøÜ</li>
</ul>
<p>Âü∫Á°ÄÁØáÂ≠¶‰π†Ë∑ØÁ∫ø</p>
<ul>
<li>1.‰∏ªÊú∫Ê∏ÖÂçïËØ≠Ê≥ïÔºåÂ≠¶‰ºöÂ¶Ç‰ΩïÊâπÈáèÁÆ°ÁêÜÊúçÂä°Âô®ÁªÑÔºåÈÖçÁΩÆÊúçÂä°Âô®ËÆ§ËØÅÔºåÊúçÂä°Âô®ÂèòÈáè</li>
<li>2.Â≠¶‰π†Â∏∏ËßÅÁöÑÊ®°ÂùóÔºåËØ≠Ê≥ïÔºåÂèÇÊï∞ÔºåÁî®Ê≥ï</li>
<li>3.ÊîπÈÄ†shellËÑöÊú¨‰∏∫ansibleÊ®°Âùó</li>
</ul>
<h1 id="Ëá™Âä®ÂåñËøêÁª¥Â•ΩÂ§Ñ">Ëá™Âä®ÂåñËøêÁª¥Â•ΩÂ§Ñ
</h1><ul>
<li>ÊèêÈ´òÂ∑•‰ΩúÊïàÁéáÔºåÂáèÂ∞ëÈáçÂ§çÊÄßÂ∑•‰Ωú</li>
<li>Â§ßÂ§ßÂáèÂ∞ë‰∫∫‰∏∫Âá∫ÈîôÁöÑÂèØËÉΩÊÄß</li>
<li>Êï∞ÊçÆÂåñÁÆ°ÁêÜ„ÄÅÊï∞ÊçÆÂåñÊ±áÊä•„ÄÅÈóÆÈ¢òÂèØËøΩÊ∫Ø</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible
</span></span><span class="line"><span class="cl">saltstack
</span></span><span class="line"><span class="cl">Ëøô‰ø©Ëá™Âä®ÂåñËøêÁª¥Â∑•ÂÖ∑Âùá‰∏∫pythonÁºñÂÜô
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">‰æãÂ¶ÇÔºö
</span></span><span class="line"><span class="cl">master-61Êú∫Âô®ÔºåÁÆ°ÁêÜ‰∫Ü100Âè∞ÁõÆÊ†áÊú∫Âô®
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Â¶ÇÊûú‰ΩøÁî®shellËÑöÊú¨ÔºåÂ∞±ÈúÄË¶ÅÁªìÂêàforÂæ™ÁéØÂ§ÑÁêÜËøô100‰∏™Êú∫Âô®ÔºåÂ≠òÂú®ÁöÑÈóÆÈ¢òÂ¶Ç‰∏ãÔºö
</span></span><span class="line"><span class="cl">free -m &gt; xxx.file
</span></span><span class="line"><span class="cl">cpuinfo
</span></span><span class="line"><span class="cl">shellÔºåÂëΩ‰ª§ÂØºÂá∫ÁöÑÊï∞ÊçÆÂ∞±ÊòØ‰∏ÄÂ†ÜÊôÆÈÄöÁöÑÊñáÊú¨Â≠óÁ¨¶‰∏≤ÔºåÈöæ‰ª•Âä†Â∑•Â§ÑÁêÜÔºõ‰ΩÜÊúâÊó∂Â∏åÊúõËÉΩÂØºÂá∫‰∏∫Êï∞ÊçÆ‰∫§Êç¢Ê†ºÂºèÔºåÂ¶Çjson„ÄÅÂ¶Çyaml„ÄÅÂ¶ÇxmlÁ≠âÔºåÂ∞±ÂèØ‰ª•ÂæàËΩªÊùæÁöÑÂèëÁªôÂêÑÁßçÁºñÁ®ãËØ≠Ë®ÄÔºåÂÆûÁé∞Êï∞ÊçÆÂä†Â∑•ÔºåÊ†ºÂºèÂåñÂ§ÑÁêÜÔºåÂèëÁªôÂâçÁ´ØÂéªÂÅöÁΩëÈ°µÂ±ïÁ§∫
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">‰ΩøÁî®ansibleÂá†Êù°ÂëΩ‰ª§Â∞±ÂèØ‰ª•ÂÆûÁé∞‰∫Ü
</span></span><span class="line"><span class="cl">Âπ∂‰∏îansibleÂØºÂá∫ÁöÑÊúçÂä°Âô®‰ø°ÊÅØÔºåÂ¶ÇÂÜÖÂ≠òÔºåÁ£ÅÁõòÔºåÁΩëÂç°ÔºåÁ≠âÁ≠â‰∏ÄÂ†Ü‰ø°ÊÅØÔºåÂèØ‰ª•Áõ¥Êé•ÂØºÂá∫‰∏∫jsonÊï∞ÊçÆÔºåËÄåjsonÊï∞ÊçÆÂ∞±ÂèØ‰ª•Áõ¥Êé•ÂèëÁªôÂâçÁ´ØÔºåÂâçÁ´ØÂ∞±ÂèØ‰ª•Â±ïÁ§∫Âá∫ÊúçÂä°Âô®ÁöÑ‰ø°ÊÅØ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Áªº‰∏äÔºåËøôÂ∞±ÊòØËøêÁª¥ÂºÄÂèëÂÅöÁöÑ‰∫ã
</span></span><span class="line"><span class="cl">ÂêéÁ´Øpython+ansibleËé∑ÂèñÊï∞ÊçÆÔºåÂØºÂá∫jsonÔºåÂèëÁªôÂâçÁ´Ø
</span></span><span class="line"><span class="cl">ÂâçÁ´ØÂÜôhtmlÔºåjsÔºåÂØπjsonÊï∞ÊçÆÂ±ïÁ§∫
</span></span><span class="line"><span class="cl">‰∏Ä‰∏™ËøêÁª¥Âπ≥Âè∞Â∞±Êê≠Âª∫Âá∫Êù•‰∫Ü
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="Â¶Ç‰ΩïÂ≠¶‰π†ansible">Â¶Ç‰ΩïÂ≠¶‰π†ansible
</h1><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1.ÊâìÂºÄansibleÂÆòÁΩëÔºåÊü•ÁúãÊâÄÊúâÊúÄÊñ∞ÁöÑÂäüËÉΩÔºå‰∏çË¶ÅÁúãÂÖ∂‰ªñÁöÑÊñáÊ°£ÔºåÂèØËÉΩÂ∑≤ÁªèÂæàÈôàÊóß‰∫ÜÔºåpython3‰πüÂ∑≤ÁªèÊõ¥Êñ∞‰∫ÜÂæàÂ§öÔºåÂØºËá¥Áî®Ê≥ïÂèòÂåñÁ≠â„ÄÇ
</span></span><span class="line"><span class="cl">ÊúÄÊñ∞ÂÆòÁΩëÊñáÊ°£Ôºö     https://zackmoel.github.io/hugo-dev/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">shellËÑöÊú¨ÔºànfsÊúçÂä°„ÄÅrsyncÊúçÂä°ÔºâÔºåÂ†ÜÁ†å‰∫ÜÂêÑÁßçÈÉ®ÁΩ≤ÁöÑÂëΩ‰ª§
</span></span><span class="line"><span class="cl">‚Üì
</span></span><span class="line"><span class="cl">ÊääËøô‰∏™ËÑöÊú¨ÔºåÊâÄÊúâÁöÑÊìç‰ΩúÔºåÂÖ®ÈÉ®ÊõøÊç¢‰∏∫ansibleÁöÑÊ®°Âùó
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.‰Ω†ÂèØËÉΩË¶ÅÊâßË°åÁöÑÂêÑÁßçÂëΩ‰ª§ÔºåansibleÈÉΩÊèê‰æõ‰∫ÜÊ®°ÂùóÔºåÂ¶ÇÊñá‰ª∂Êã∑Ë¥ùÔºåÂ¶ÇËΩØ‰ª∂ÂÆâË£ÖÔºåÊúçÂä°ÈáçÂêØÁ≠âÔºõ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3.‰Ω†‰ΩøÁî®ansibleÔºåÂøÖÈ°ª‰∏•Ê†ºÊåâÁÖßansibleÊèê‰æõÁöÑËØ≠Ê≥ïÊù•ÔºåÂê¶ÂàôÂè™ÊúâÊä•Èîô
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">4.ÂÖàÂ≠¶ËØ≠Ê≥ïÔºåËØ≠Ê≥ïÂü∫Êú¨ÂäüÊâéÂÆûÂêéÔºåÈù¢ÂØπÂçÉÂèò‰∏áÂåñÁöÑÈúÄÊ±ÇÔºåÊâçËÉΩÊ∏∏ÂàÉÊúâ‰Ωô
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">5.Â§öÂä®ÊâãÔºåansibleÈúÄË¶ÅËÆ∞ÂøÜÁöÑÊìç‰ΩúÊØîËæÉÂ§ö
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="ÂàùËØÜansibleÂëΩ‰ª§">ÂàùËØÜansibleÂëΩ‰ª§Ôºö
</h1><p>ÂëΩ‰ª§ËØ≠Ê≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible ‰∏ªÊú∫ÁªÑ -m Ê®°ÂùóÂêç  [Ê®°ÂùóÂèÇÊï∞]
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/pic/image-20220506094153857.png"
	width="3839"
	height="1336"
	srcset="/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/pic/image-20220506094153857_hu2456948428469298153.png 480w, /xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/pic/image-20220506094153857_hu5902346363159738942.png 1024w"
	loading="lazy"
	
		alt="image-20220506094153857"
	
	
		class="gallery-image" 
		data-flex-grow="287"
		data-flex-basis="689px"
	
></p>
<h1 id="1ansibleÂÆâË£ÖÈÉ®ÁΩ≤">1„ÄÅansibleÂÆâË£ÖÈÉ®ÁΩ≤
</h1><h2 id="Âú®master-61ÁÆ°ÁêÜÊú∫ÂÆâË£Ö">Âú®master-61ÁÆ°ÁêÜÊú∫ÂÆâË£Ö
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#yum install epel-release ansible libselinux-python -y</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ÂâçÊèê‰Ω†ÈÖçÁΩÆÂ•Ω‰∫ÜÈòøÈáå‰∫ëÁöÑepelÊ∫êÂèØ‰ª•Áõ¥Êé•ÂÆâË£Ö
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#yum install ansible -y </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible --version</span>
</span></span><span class="line"><span class="cl">ansible 2.9.27
</span></span><span class="line"><span class="cl">  config <span class="nv">file</span> <span class="o">=</span> /etc/ansible/ansible.cfg
</span></span><span class="line"><span class="cl">  configured module search <span class="nv">path</span> <span class="o">=</span> <span class="o">[</span>u<span class="s1">&#39;/root/.ansible/plugins/modules&#39;</span>, u<span class="s1">&#39;/usr/share/ansible/plugins/modules&#39;</span><span class="o">]</span>
</span></span><span class="line"><span class="cl">  ansible python module <span class="nv">location</span> <span class="o">=</span> /usr/lib/python2.7/site-packages/ansible
</span></span><span class="line"><span class="cl">  executable <span class="nv">location</span> <span class="o">=</span> /usr/bin/ansible
</span></span><span class="line"><span class="cl">  python <span class="nv">version</span> <span class="o">=</span> 2.7.5 <span class="o">(</span>default, Apr <span class="m">11</span> 2018, 07:36:10<span class="o">)</span> <span class="o">[</span>GCC 4.8.5 <span class="m">20150623</span> <span class="o">(</span>Red Hat 4.8.5-28<span class="o">)]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂÖ∂‰ªñË¢´ÁÆ°ÁêÜÁöÑÊú∫Âô®">ÂÖ∂‰ªñË¢´ÁÆ°ÁêÜÁöÑÊú∫Âô®
</h2><p>ÂáÜÂ§á</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">web-7
</span></span><span class="line"><span class="cl">web-8
</span></span><span class="line"><span class="cl">web-9
</span></span><span class="line"><span class="cl">nfs-31
</span></span><span class="line"><span class="cl">rsync-41
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ®ÈÉ®ÂàùÂßãÂåñÔºåËøòÂéüsshdÂéüÊú¨ÁöÑÈÖçÁΩÆÂç≥ÂèØ</p>
<p>ÂÆâË£Öansible</p>
<p>Áî®‰∫éÂ≠¶‰π†ansibleÁöÑ‰∏ªÊú∫ËøûÊé•ÈÖçÁΩÆÂèÇÊï∞</p>
<h2 id="‰∏ªÊú∫Ê∏ÖÂçïÊñá‰ª∂‰∏ªÊú∫ÂàÜÁªÑ">‰∏ªÊú∫Ê∏ÖÂçïÊñá‰ª∂Ôºà‰∏ªÊú∫ÂàÜÁªÑÔºâ
</h2><p><a class="link" href="https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html#inventory-basics-formats-hosts-and-groups"  target="_blank" rel="noopener"
    >https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html#inventory-basics-formats-hosts-and-groups</a></p>
<p>ÊääÁªºÂêàÊû∂ÊûÑÈúÄË¶ÅÁî®Âà∞ÁöÑÊú∫Âô®ÔºåËøõË°åÂàÜÁªÑ</p>
<p>‰∏ªÊú∫Ê∏ÖÂçïÈÖçÁΩÆÊñá‰ª∂</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#vim /etc/ansible/hosts </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>web<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.7
</span></span><span class="line"><span class="cl">172.16.1.8
</span></span><span class="line"><span class="cl">172.16.1.9
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>nfs<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.31
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>backup<span class="o">]</span>	
</span></span><span class="line"><span class="cl">172.16.1.41
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏ªÊú∫ÂàÜÁªÑÂêéÔºåÊâßË°åÂëΩ‰ª§ÊµãËØïÔºåÊâπÈáèÁÆ°ÁêÜ‰∏ÄÁªÑÊú∫Âô®„ÄÅ</p>
<p>ÁÆ°ÁêÜÊâÄÊúâÁöÑÊú∫Âô®Ôºå‰ΩøÁî®ÁâπÊÆä‰∏ªÊú∫ÁªÑÔºåall</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ËÆ©ÊâÄÊúâÁöÑ‰∏ªÊú∫ÔºåËøúÁ®ãÊâßË°åhostnameÔºåËøîÂõû‰∏ªÊú∫Âêç‰ø°ÊÅØ
</span></span><span class="line"><span class="cl">[root@master-61 ~]#ansible all -m shell -a &#34;hostname&#34;
</span></span><span class="line"><span class="cl">‰ΩÜÊòØÈªòËÆ§Ê≤°ÈÖçÁΩÆËÆ§ËØÅÊñπÂºèÔºåÊùÉÈôêË¢´ÊãíÁªùÔºö
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/assets/image-20240510094514125.png"
	width="1135"
	height="607"
	srcset="/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/assets/image-20240510094514125_hu12994008662289641402.png 480w, /xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/assets/image-20240510094514125_hu10901028134512292044.png 1024w"
	loading="lazy"
	
		alt="image-20240510094514125"
	
	
		class="gallery-image" 
		data-flex-grow="186"
		data-flex-basis="448px"
	
></p>
<h1 id="2ansible‰∏ªÊú∫ÁôªÂΩïËÆ§ËØÅ">2„ÄÅansible‰∏ªÊú∫ÁôªÂΩïËÆ§ËØÅ
</h1><p>AnsibleÊâπÈáèÁÆ°ÁêÜ‰∏ªÊú∫Êúâ‰∏§ÁßçÊñπÂºèÔºö</p>
<ul>
<li>‰º†ÁªüÁöÑÂØÜÁ†ÅËÆ§ËØÅ</li>
<li>ÂÖ¨Èí•ËÆ§ËØÅ</li>
</ul>
<h2 id="ansibleÂü∫‰∫éÂÖ¨ÁßÅÈí•ËÆ§ËØÅ">ansibleÂü∫‰∫éÂÖ¨ÁßÅÈí•ËÆ§ËØÅ
</h2><p>1.Â∞Ümaster61Êú∫Âô®ÁöÑÂÖ¨Èí•ÔºåÂàÜÂèëÁªôÊÉ≥ÂÖçÂØÜÁôªÂΩïÁöÑÊú∫Âô®</p>
<p>2.ÂêéÁª≠Âú®ÂØπËØ•Êú∫Âô®Êìç‰ΩúÔºåÂ∞±Áõ¥Êé•ËøõË°åsshÁöÑÂÖ¨Èí•ËÆ§ËØÅ‰∫ÜÔºåÂèØ‰ª•ÂÖçÂØÜÁ†ÅÔºåÁõ¥Êé•ËøúÁ®ãÊâßË°å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">1.ÈÖçÁΩÆÂ•Ωmaster-61ÂÖçÂØÜÁôªÂΩï31Êú∫Âô®
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ssh-keygen</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ssh-copy-id root@172.16.1.31</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.ÂêéÁª≠ÂèØ‰ª•ÂÖçÂØÜÊâßË°åansibleÁöÑÂêÑÁßçÊ®°Âùó‰∫Ü
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible nfs -m command -a &#34;hostname&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">‰Ω†ÂèØ‰ª•ÈÖçÁΩÆÊâÄÊúâÊú∫Âô®ÁöÑÂÖ¨Èí•‰∏ÄÈîÆÂàÜÂèëÔºåÂ∞±ÂèØ‰ª•ÂÆûÁé∞allÊâÄÊúâ‰∏ªÊú∫ÁöÑËøúÁ®ãÂëΩ‰ª§ÊâßË°å
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible all -m shell &#34;hostname&#34; # ËøîÂõûÁªìÊûúÁªômaster-61Êú∫Âô®</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Âü∫‰∫éÂØÜÁ†ÅËÆ§ËØÅ">Âü∫‰∫éÂØÜÁ†ÅËÆ§ËØÅ
</h2><ul>
<li>Âú®‰Ω†ÁöÑÂÆ¢Êà∑Á´ØÊú∫Âô®„ÄÅ‰øÆÊîπ‰∫ÜsshÈªòËÆ§Á´ØÂè£„ÄÅ‰ª•ÂèäÂØÜÁ†ÅÈúÄË¶Å‰øÆÊîπ‰∏ªÊú∫Ê∏ÖÂçïÊñá‰ª∂ÊâçÂèØ‰ª•Ê≠£Á°ÆËøûÊé•„ÄÇ</li>
<li>Ê≥®ÊÑè‰Ω†ÂæóÈÖçÁΩÆÂÖÅËÆ∏ÂØÜÁ†ÅÁôªÂΩïÊâçËÉΩËøõË°åÂ¶Ç‰∏ãÊµãËØïÔºåÂèØ‰ª•ÂÜçÂºÄ‰∏Ä‰∏™web-9Êú∫Âô®„ÄÇ</li>
</ul>
<h2 id="ansible‰∏ªÊú∫Ê∏ÖÂçïÈÖçÁΩÆÊñá‰ª∂ËØ≠Ê≥ïÈáçË¶Å">ansible‰∏ªÊú∫Ê∏ÖÂçïÈÖçÁΩÆÊñá‰ª∂ËØ≠Ê≥ïÔºàÈáçË¶ÅÔºâ
</h2><p>ÂÆòÁΩëÂú∞ÂùÄÔºö</p>
<p><a class="link" href="https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html#connecting-to-hosts-behavioral-inventory-parameters"  target="_blank" rel="noopener"
    >https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html#connecting-to-hosts-behavioral-inventory-parameters</a></p>
<p>ÂèØÈÄâÂèÇÊï∞Ôºö</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ÂèÇÊï∞</th>
<th>ÂèÇÊï∞Á±ªÂûã</th>
<th>ÂèÇÊï∞ËØ¥Êòé</th>
</tr>
</thead>
<tbody>
<tr>
<td>ansible_host</td>
<td>‰∏ªÊú∫Âú∞ÂùÄ</td>
<td>ËøúÁ®ã‰∏ªÊú∫ip</td>
</tr>
<tr>
<td>ansible_port</td>
<td>‰∏ªÊú∫Á´ØÂè£</td>
<td>ËÆæÁΩÆSSHËøûÊé•Á´ØÂè£ÔºåÈªòËÆ§22</td>
</tr>
<tr>
<td>ansible_user</td>
<td>‰∏ªÊú∫Áî®Êà∑</td>
<td>ÈªòËÆ§SSHËøúÁ®ãËøûÊé•ÁöÑÁî®Êà∑Ë∫´‰ªΩÔºåÈªòËÆ§root</td>
</tr>
<tr>
<td>ansible_password</td>
<td>Áî®Êà∑ÂØÜÁ†Å</td>
<td>ÊåáÂÆöSSHËøúÁ®ã‰∏ªÊú∫ÂØÜÁ†Å</td>
</tr>
</tbody>
</table></div>
<h2 id="ÁªôrsyncÊú∫Âô®ËøõË°åÂØÜÁ†ÅËÆ§ËØÅ">ÁªôrsyncÊú∫Âô®ÔºåËøõË°åÂØÜÁ†ÅËÆ§ËØÅ
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ÁºñËæë‰∏ªÊú∫Ê∏ÖÂçïÊñá‰ª∂
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#vim /etc/ansible/hosts </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">1.ÁªôrsyncÊú∫Âô®ÔºåÊ∑ªÂä†ÂØÜÁ†ÅÔºåÁ´ØÂè£Á≠â‰ø°ÊÅØ
</span></span><span class="line"><span class="cl"><span class="o">[</span>backup<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.41  <span class="nv">ansible_port</span><span class="o">=</span><span class="m">22</span>  <span class="nv">ansible_password</span><span class="o">=</span><span class="s1">&#39;123123&#39;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.Â¶ÇÊûúÁõÆÊ†áÊú∫Âô®ÁöÑssh‰ø°ÊÅØÈÉΩË¢´Êîπ‰∫ÜÔºåËøôÈáå‰πüÂæóÊîπ
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@rsync-41 ~<span class="o">]</span><span class="c1">#vi /etc/ssh/sshd_config</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>backup<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.41  <span class="nv">ansible_port</span><span class="o">=</span><span class="m">22999</span>  <span class="nv">ansible_password</span><span class="o">=</span><span class="s1">&#39;123123&#39;</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊµãËØïÊâßË°å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible backup -m ping</span>
</span></span><span class="line"><span class="cl">172.16.1.41 <span class="p">|</span> <span class="nv">SUCCESS</span> <span class="o">=</span>&gt; <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ansible_facts&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;discovered_interpreter_python&#34;</span>: <span class="s2">&#34;/usr/bin/python&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;changed&#34;</span>: false, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ping&#34;</span>: <span class="s2">&#34;pong&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Ê∑ªÂä†webÊú∫Âô®ÁªÑÁöÑ‰ø°ÊÅØ">Ê∑ªÂä†webÊú∫Âô®ÁªÑÁöÑ‰ø°ÊÅØ
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#vim /etc/ansible/hosts </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>web<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.7 <span class="nv">ansible_port</span><span class="o">=</span><span class="m">22999</span> <span class="nv">ansible_user</span><span class="o">=</span>root <span class="nv">ansible_password</span><span class="o">=</span><span class="m">123123</span>
</span></span><span class="line"><span class="cl">172.16.1.8 <span class="nv">ansible_port</span><span class="o">=</span><span class="m">22999</span> <span class="nv">ansible_user</span><span class="o">=</span>root <span class="nv">ansible_password</span><span class="o">=</span><span class="m">123123</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>nfs<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.31
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>backup<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.41 <span class="nv">ansible_ssh_port</span><span class="o">=</span><span class="m">22999</span> <span class="nv">ansible_ssh_user</span><span class="o">=</span>root <span class="nv">ansible_ssh_pass</span><span class="o">=</span><span class="m">123123</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊµãËØïÊâßË°å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m ping</span>
</span></span><span class="line"><span class="cl">172.16.1.8 <span class="p">|</span> <span class="nv">SUCCESS</span> <span class="o">=</span>&gt; <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ansible_facts&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;discovered_interpreter_python&#34;</span>: <span class="s2">&#34;/usr/bin/python&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;changed&#34;</span>: false, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ping&#34;</span>: <span class="s2">&#34;pong&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">172.16.1.7 <span class="p">|</span> <span class="nv">SUCCESS</span> <span class="o">=</span>&gt; <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ansible_facts&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;discovered_interpreter_python&#34;</span>: <span class="s2">&#34;/usr/bin/python&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;changed&#34;</span>: false, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ping&#34;</span>: <span class="s2">&#34;pong&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÊãøwebÊú∫Âô®ÊµãËØïÂçïÁã¨Êìç‰ΩúÊüê‰∏ªÊú∫">ÊãøwebÊú∫Âô®ÊµãËØïÔºàÂçïÁã¨Êìç‰ΩúÊüê‰∏ªÊú∫Ôºâ
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">1.ÂÖàÈÖçÁΩÆ‰∏ªÊú∫ÁªÑÁöÑÂèÇÊï∞
</span></span><span class="line"><span class="cl"><span class="o">[</span>web<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.7 <span class="nv">ansible_port</span><span class="o">=</span><span class="m">22999</span> <span class="nv">ansible_password</span><span class="o">=</span><span class="s1">&#39;123123&#39;</span>
</span></span><span class="line"><span class="cl">172.16.1.8 <span class="nv">ansible_port</span><span class="o">=</span><span class="m">22999</span> <span class="nv">ansible_password</span><span class="o">=</span><span class="s1">&#39;123123&#39;</span>
</span></span><span class="line"><span class="cl">172.16.1.9 <span class="nv">ansible_port</span><span class="o">=</span><span class="m">22999</span> <span class="nv">ansible_password</span><span class="o">=</span><span class="s1">&#39;123123&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.ÊâßË°åpingÊ®°ÂùóÔºåÁúã‰∏ãÊòØÂê¶ÂíåËøúÁ®ã‰∏ªÊú∫ÈÄö‰ø°
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible  web -m ping</span>
</span></span><span class="line"><span class="cl">172.16.1.7 <span class="p">|</span> <span class="nv">SUCCESS</span> <span class="o">=</span>&gt; <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ansible_facts&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;discovered_interpreter_python&#34;</span>: <span class="s2">&#34;/usr/bin/python&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;changed&#34;</span>: false, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ping&#34;</span>: <span class="s2">&#34;pong&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">172.16.1.9 <span class="p">|</span> <span class="nv">SUCCESS</span> <span class="o">=</span>&gt; <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ansible_facts&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;discovered_interpreter_python&#34;</span>: <span class="s2">&#34;/usr/bin/python&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;changed&#34;</span>: false, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ping&#34;</span>: <span class="s2">&#34;pong&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">172.16.1.8 <span class="p">|</span> <span class="nv">SUCCESS</span> <span class="o">=</span>&gt; <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ansible_facts&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;discovered_interpreter_python&#34;</span>: <span class="s2">&#34;/usr/bin/python&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;changed&#34;</span>: false, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ping&#34;</span>: <span class="s2">&#34;pong&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÊåáÁ∫πÊïÖÈöúËß£ÂÜ≥">ÊåáÁ∫πÊïÖÈöúËß£ÂÜ≥
</h4><p>‰Ω†ÂèØËÉΩ‰ºöÈÅáËßÅÂ¶Ç‰∏ãÈóÆÈ¢òÔºåÂÖ≥‰∫éÊñ∞Êú∫Âô®ÁöÑ<strong>ÊåáÁ∫πÁ°ÆËÆ§</strong>ÈóÆÈ¢ò„ÄÇ</p>
<p><img src="/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/assets/image-20240510155811488.png"
	width="1575"
	height="85"
	srcset="/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/assets/image-20240510155811488_hu13786837463817608804.png 480w, /xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/assets/image-20240510155811488_hu8917252128851260123.png 1024w"
	loading="lazy"
	
		alt="image-20240510155811488"
	
	
		class="gallery-image" 
		data-flex-grow="1852"
		data-flex-basis="4447px"
	
></p>
<p>Ëß£ÂÜ≥ÂäûÊ≥ï1ÔºåÊâãÂä®sshËøûÊé•ÔºåËøõË°åÊåáÁ∫πÁ°ÆËÆ§ÔºåÂÜôÂÖ•Âà∞Êú¨Êú∫ÁöÑ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#cat ~/.ssh/known_hosts</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëß£ÂÜ≥ÂäûÊ≥ï2ÔºåansibleÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂøΩÁï•ÊåáÁ∫πÁ°ÆËÆ§</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#grep &#39;host_key_checking&#39; /etc/ansible/ansible.cfg </span>
</span></span><span class="line"><span class="cl"><span class="nv">host_key_checking</span> <span class="o">=</span> False
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈóÆÈ¢ò‰ª•ÂèäËß£ÂÜ≥ÔºåÂèØ‰ª•Ê≠£Á°ÆÊìç‰Ωúweb-9Êú∫Âô®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible 172.16.1.9 -m ping</span>
</span></span><span class="line"><span class="cl">172.16.1.9 <span class="p">|</span> <span class="nv">SUCCESS</span> <span class="o">=</span>&gt; <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ansible_facts&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;discovered_interpreter_python&#34;</span>: <span class="s2">&#34;/usr/bin/python&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;changed&#34;</span>: false, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ping&#34;</span>: <span class="s2">&#34;pong&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="Ë∏©ÂùëËÆ∞ÂΩïansibleÁºìÂ≠ò">Ë∏©ÂùëËÆ∞ÂΩï(ansibleÁºìÂ≠ò)
</h4><p>Áî±‰∫éansibleÂú®ÂØπËøúÁ®ã‰∏ªÊú∫Êìç‰Ωú‰πãÂâçÔºåÈªòËÆ§‰ºöÂÖàÈÄöËøásetupÊ®°ÂùóËé∑ÂèñÊú∫Âô®ÁöÑfactsÔºàÈùôÊÄÅÂ±ûÊÄßÔºâÔºåÂπ∂‰∏î‰ºöÁîüÊàêÁºìÂ≠òÔºå‰æø‰∫éÂä†ÈÄüËøúÁ®ã‰∏ªÊú∫ÁöÑÊìç‰ΩúÔºõ</p>
<p>‰ΩÜÁºìÂ≠ò‰πü‰ºöÂØºËá¥‰∏Ä‰∫õÂ•áÊÄ™ÁöÑÁé∞Ë±°ÔºåÊØîÂ¶ÇÂÆ¢Êà∑Á´ØÁöÑÊú∫Âô®‰ø°ÊÅØÊõ¥Êñ∞‰∫ÜÔºåÊúçÂä°Á´Ø‰æùÊóß‰ΩøÁî®ÁöÑÊòØÊóßÊï∞ÊçÆÔºåÈÇ£Â∞±‰∏çÂáÜÁ°Æ‰∫ÜÔºåÂõ†Ê≠§ÂèØ‰ª•Âà†Èô§ÁºìÂ≠ò„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ÂÖ≥‰∫éÁºìÂ≠òÂØºËá¥bugÁöÑÊñáÁ´†Ôºåhttps://serverfault.com/questions/630253/ansible-stuck-on-gathering-facts
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Ê∏ÖÁêÜansibleÁöÑÁºìÂ≠òÁõÆÂΩïÂç≥ÂèØ
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#rm -rf ~/.ansible/cp/*</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="Âêå‰∏ÄÁªÑËøûÁª≠ÁöÑip">Âêå‰∏ÄÁªÑËøûÁª≠ÁöÑip
</h4><p>ÂèØ‰ª•‰øÆÊîπ‰∏ªÊú∫Ê∏ÖÂçïÊñá‰ª∂Â¶Ç‰∏ãÔºåÂâçÊèêÊòØËØ•‰∫õ‰∏ªÊú∫ÁöÑÈÖçÁΩÆ‰∏ÄËá¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>web<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.<span class="o">[</span>7:9<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÂÖ¨ÂÖ±ÂèòÈáè">ÂÖ¨ÂÖ±ÂèòÈáè
</h4><p>ÂΩì‰∏ªÊú∫Ê∏ÖÂçïÈáåÔºåÂæàÂ§ö‰∏ªÊú∫ÁªÑÔºåÊúâÁõ∏ÂêåÁöÑÂèòÈáèÂ±ûÊÄßÔºåÂèØ‰ª•ÂÜôÊàêÂÖ¨ÂÖ±ÂèòÈáè</p>
<p>ËøôÈÉ®ÂàÜÈÖçÁΩÆÊòØÈíàÂØπweb‰∏ªÊú∫ÁªÑÔºåÊäΩË±°ÁöÑÂèòÈáè</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#grep -vE &#39;^#|^$&#39; /etc/ansible/hosts </span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>web:vars<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">ansible_ssh_port</span><span class="o">=</span><span class="m">22999</span>
</span></span><span class="line"><span class="cl"><span class="nv">ansible_ssh_user</span><span class="o">=</span>root
</span></span><span class="line"><span class="cl"><span class="nv">ansible_ssh_pass</span><span class="o">=</span><span class="m">123123</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>web<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.<span class="o">[</span>7:9<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>nfs<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.31 <span class="nv">ansible_ssh_port</span><span class="o">=</span><span class="m">22999</span> 
</span></span><span class="line"><span class="cl"><span class="o">[</span>backup<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.41 <span class="nv">ansible_ssh_port</span><span class="o">=</span><span class="m">22999</span> <span class="nv">ansible_ssh_user</span><span class="o">=</span>root <span class="nv">ansible_ssh_pass</span><span class="o">=</span><span class="m">123123</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÊµãËØïwebÁªÑÂíåbackupÁªÑÊòØÂê¶ÂèØÁî®">ÊµãËØïwebÁªÑÂíåbackupÁªÑÊòØÂê¶ÂèØÁî®
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m ping</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible backup -m shell -a &#34;ls /opt/&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m shell -a hostname</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÊâÄÊúâ‰∏ªÊú∫ÈÉΩÁîüÊïàÁöÑÂèòÈáè‰∫ÜËß£">ÊâÄÊúâ‰∏ªÊú∫ÈÉΩÁîüÊïàÁöÑÂèòÈáè„Äê‰∫ÜËß£„Äë
</h4><p>ÊåáÂÆö‰∏ªÊú∫ÁªÑÂêçallÔºåÂç≥ÂèØÈíàÂØπÊâÄÊúâ‰∏ªÊú∫ÁîüÊïàÔºåÂâçÊèêÊòØÔºå‰Ω†Ë¶ÅÁ°Æ‰øùËøô‰∏™‰ø°ÊÅØÊòØÊâÄÊúâ‰∏ªÊú∫ÈÄöÁî®ÁöÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#grep -vE &#39;^#|^$&#39; /etc/ansible/hosts </span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>all:vars<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">ansible_port</span><span class="o">=</span><span class="m">22999</span>
</span></span><span class="line"><span class="cl"><span class="c1">#ansible_user=root</span>
</span></span><span class="line"><span class="cl"><span class="c1">#ansible_password=123456</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>web<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.7
</span></span><span class="line"><span class="cl">172.16.1.8
</span></span><span class="line"><span class="cl">172.16.1.9
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>nfs<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.31
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>backup<span class="o">]</span>
</span></span><span class="line"><span class="cl">172.16.1.41
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøúÁ®ãÊâßË°åÂëΩ‰ª§</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#rm -rf ~/.ansible/cp/*</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible all -m shell -a hostname</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible all -m shell -a hostname</span>
</span></span><span class="line"><span class="cl">172.16.1.31 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">nfs-31
</span></span><span class="line"><span class="cl">172.16.1.8 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">web-8
</span></span><span class="line"><span class="cl">172.16.1.41 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">rsync-41
</span></span><span class="line"><span class="cl">172.16.1.7 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">web-7
</span></span><span class="line"><span class="cl">172.16.1.9 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">web-9
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="3ansibleÂëΩ‰ª§ÊâßË°åÊñπÂºè">3„ÄÅansibleÂëΩ‰ª§ÊâßË°åÊñπÂºè
</h1><p>AnsibleÂÆûÁé∞ÊâπÈáèÁÆ°ÁêÜ‰∏ªÊú∫ÁöÑÊ®°Âºè‰∏ªË¶ÅÊúâ‰ø©Ôºö</p>
<ul>
<li>Âà©Áî®ansibleÂëΩ‰ª§ÂÆûÁé∞ÊâπÈáèÁÆ°ÁêÜÔºàad-hocÔºâÊ®°Âºè</li>
<li>Âà©Áî®ansibleÂâßÊú¨ÂÆûÁé∞ÊâπÈáèÁÆ°ÁêÜÔºàplaybookÔºâÊ®°Âºè</li>
</ul>
<p>Ad-hocÂíåplaybookÁöÑÂÖ≥Á≥ªÂ∞±Â•ΩÊØîshellÂëΩ‰ª§‰∏éshell scriptsÁöÑÂÖ≥Á≥ª</p>
<h2 id="ad-hocÊ®°Âºè">ad-hocÊ®°Âºè
</h2><p>AnsibleÁöÑad-hocÊ®°Âºè‰πüÂ∞±ÊòØansibleÁöÑÂëΩ‰ª§Ë°åÊ®°ÂºèÔºåËØ•Ê®°ÂºèÈÄöÂ∏∏Áî®Êù•‰∏¥Êó∂Â§ÑÁêÜ‰∏Ä‰∫õ‰ªªÂä°„ÄÇ‰æãÂ¶Ç</p>
<ul>
<li>‰∏¥Êó∂ÊâπÈáèÊü•ÁúãÊâÄÊúâË¢´ÁÆ°ÊéßÊú∫Âô®ÁöÑÂÜÖÂ≠ò„ÄÅË¥üËΩΩ„ÄÅÁ£ÅÁõò</li>
<li>‰∏¥Êó∂ÊâπÈáèÂàÜÂèëÊüê‰∏™ÁâπÂÆöÊñá‰ª∂</li>
</ul>
<h2 id="playbookÊ®°Âºè">PlaybookÊ®°Âºè
</h2><p>AnsibleÁöÑplaybookÊ®°ÂºèÂ∞±ÊòØÈíàÂØπÁâπÂÆöÁöÑÂÖ∑‰ΩìËæÉÂ§ßÁöÑ‰ªªÂä°Ôºå‰∫ãÂÖàÂÜôÂ•ΩÊâßË°åÂâßÊú¨ÔºåÁÑ∂ÂêéÂú®ÂÖ∂‰ªñÊú∫Âô®‰∏äÊâπÈáèÊâßË°åÁõ∏ÂêåÁöÑ‰ªªÂä°ÔºåÂ±û‰∫éÂÆöÂà∂ÂåñÁöÑÊâπÈáèÊâßË°å‰ªªÂä°Ôºå‰æãÂ¶Ç</p>
<ul>
<li>‰∏ÄÈîÆÂÆâË£ÖRsync</li>
<li>‰∏ÄÈîÆÊê≠Âª∫LNMPÈõÜÁæ§Á≠â</li>
</ul>
<h2 id="ansible-docÂëΩ‰ª§">ansible-docÂëΩ‰ª§
</h2><p>ÂàóÂá∫ansibleÊâÄÊúâÊîØÊåÅÁöÑÊ®°ÂùóÔºåËøôÂ∞±ÊòØansibleËøô‰∏™‰∏áËÉΩÂ∑•ÂÖ∑ÁÆ±ÊâÄÊúâÁöÑÈõ∂‰ª∂‰∫Ü„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible-doc -l |grep ^ping</span>
</span></span><span class="line"><span class="cl">ping                                                          Try to connect to host, verify a usable python and re...
</span></span><span class="line"><span class="cl">pingdom                                                       Pause/unpause Pingdom alerts   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible-doc -l |grep ^shell</span>
</span></span><span class="line"><span class="cl">shell  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ÂΩìÂâçansibleÊîØÊåÅ3387‰∏™Ê®°Âùó
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible-doc -l |wc -l</span>
</span></span><span class="line"><span class="cl"><span class="m">3387</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂΩìÂâçansibleÊîØÊåÅÁöÑÊ®°ÂùóÊï∞Èáè</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible-doc -l |wc -l</span>
</span></span><span class="line"><span class="cl"><span class="m">3387</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êü•ÁúãÊüê‰∏™Ê®°ÂùóÁöÑÂÖ∑‰ΩìÁî®Ê≥ï</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible-doc -s shell</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible-doc -s ping</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="4ansibleÊ†∏ÂøÉÂÜÖÂÆπÊ®°ÂùóÂ≠¶‰π†">4„ÄÅansibleÊ†∏ÂøÉÂÜÖÂÆπÔºàÊ®°ÂùóÂ≠¶‰π†Ôºâ
</h1><h2 id="ansibleÊâßË°åÂëΩ‰ª§ÁªìÊûúÁä∂ÊÄÅÈ¢úËâ≤">ansibleÊâßË°åÂëΩ‰ª§ÁªìÊûúÔºàÁä∂ÊÄÅÈ¢úËâ≤Ôºâ
</h2><p>‰Ω†ÂêéÁª≠‰ΩøÁî®ÂêÑÁßçÊ®°ÂùóÊìç‰ΩúÔºå‰ºöÊúâ‰∏çÂêåÁöÑÈ¢úËâ≤ÁªìÊûúÔºåÈÉΩÊòØÊúâÊÑè‰πâÁöÑ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ËøêÁª¥ËøúÁ®ãÊâßË°åÂëΩ‰ª§ÔºåÊúâ2‰∏™ÊñπÂºè
</span></span><span class="line"><span class="cl">shellËÑöÊú¨ÔºåËøúÁ®ãÊâßË°å
</span></span><span class="line"><span class="cl">ansibleÊ®°ÂùóÔºåËøúÁ®ãÊâßË°å
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">shellËÑöÊú¨‰∏çÂ§üÊô∫ËÉΩÔºå‰∏ç‰ºöËÆ∞ÂΩï‰∏ä‰∏ÄÊ¨°ÁöÑÊâßË°åÁä∂ÊÄÅÔºå‰ª•Âèä‰øÆÊîπÁöÑÁä∂ÊÄÅÔºåÂõ†Ê≠§ÂØºËá¥ÔºåÂÇªÁìúÂºèÁöÑÔºåÈáçÂ§çÊÄßÊâßË°å„ÄÇÊïàÁéáÊòØÊûÅÂÖ∂‰Ωé‰∏ãÁöÑÔºå‰∏çÂÅöÁä∂ÊÄÅËÆ∞ÂΩï
</span></span><span class="line"><span class="cl">‰æãÂ¶ÇÂÆâË£ÖËΩØ‰ª∂Ôºö
</span></span><span class="line"><span class="cl">shell   yum install  rsync<span class="p">;</span>  mkdir -p<span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ËÄåansibleÁöÑÊ®°ÂùóÔºåyumÊ®°Âùó‰ºöËÆ∞ÂΩïÊâßË°åÁöÑÁä∂ÊÄÅ
</span></span><span class="line"><span class="cl">Á¨¨‰∏ÄÊ¨°ÊâßË°å,Ë£ÖÂÆå‰πãÂêéÔºåÁöÑÁ°ÆÂØπÁõÆÊ†áÊú∫Âô®‰∫ßÁîü‰∫Ü‰øÆÊîπÁöÑÁä∂ÊÄÅÔºå‰ºöÁªômaster-61ËøîÂõû‰∏Ä‰∏™ÂëΩ‰ª§ÁöÑÊâßË°åÁªìÊûúÔºåÊâßË°åÁä∂ÊÄÅÔºåÂ≠òÂÇ®‰∏ãÊù•
</span></span><span class="line"><span class="cl">ansible web -m yum -a <span class="s2">&#34;name=rsync  state=installed&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ansible‰ºöÊ£ÄÊµãÁõÆÊ†áÊú∫Âô®ÔºåÂØπÊØîËøô‰∏™Áä∂ÊÄÅÔºåÂ¶ÇÊûúÁä∂ÊÄÅÊ≤°ÂèòÔºåansibleÂ∞±‰∏ç‰ºöÂÜçÊâßË°åËØ•ÂëΩ‰ª§ÔºåÂõ†Ê≠§ÊïàÁéáÂæàÈ´ò
</span></span><span class="line"><span class="cl">ansible web -m yum -a <span class="s2">&#34;name=rsync  state=installed&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ansibleÁöÑÁä∂ÊÄÅÔºåÂ∞±ÊòØÂ¶Ç‰∏ãÁöÑÈ¢úËâ≤Âå∫ÂàÜÔºåÁúãÂà∞‰∏çÂêåÁöÑÁä∂ÊÄÅ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ÁªøËâ≤ÔºöÂëΩ‰ª§‰ª•Áî®Êà∑ÊúüÊúõÁöÑÊâßË°å‰∫ÜÔºå‰ΩÜÊòØÁä∂ÊÄÅÊ≤°ÊúâÂèëÁîüÊîπÂèòÔºõ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ÈªÑËâ≤ÔºöÂëΩ‰ª§‰ª•Áî®Êà∑ÊúüÊúõÁöÑÊâßË°å‰∫ÜÔºåÂπ∂‰∏îÁä∂ÊÄÅÂèëÁîü‰∫ÜÊîπÂèòÔºõ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Á¥´Ëâ≤ÔºöË≠¶Âëä‰ø°ÊÅØÔºåËØ¥ÊòéansibleÊèêÁ§∫‰Ω†ÊúâÊõ¥ÂêàÈÄÇÁöÑÁî®Ê≥ïÔºõÂá∫Áé∞‰∫ÜwarningË≠¶Âëä
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Á∫¢Ëâ≤ÔºöÂëΩ‰ª§ÈîôËØØÔºåÊâßË°åÂ§±Ë¥•Ôºõ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ËìùËâ≤ÔºöËØ¶ÁªÜÁöÑÊâßË°åËøáÁ®ãÔºõ
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂÆòÁΩëÊñáÊ°£">ÂÆòÁΩëÊñáÊ°£
</h2><p>ÁΩëÂùÄÔºö<a class="link" href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/index.html#plugins-in-ansible-builtin"  target="_blank" rel="noopener"
    >Ansible.Builtin ‚Äî Ansible Community Documentation</a></p>
<p>AnsibleËá™Âä®ÂåñËΩØ‰ª∂ÁöÑÊ†∏ÂøÉÂäüËÉΩÂ∞±Âú®‰∫éÂÖ∂‰ºóÂ§öÁöÑÊ®°ÂùóÔºåÂèØ‰ª•ËØ¥Â≠¶‰π†AnsibleÂ∞±ÊòØÂ≠¶‰π†Ê®°ÂùóÁöÑ‰ΩøÁî®„ÄÇ</p>
<p>Ââ©‰ΩôÁöÑÊòØÂØπAnsibleÂâßÊú¨ÁºñÂÜôÁöÑÁÜüÁªÉÂ∫¶„ÄÇ</p>
<h2 id="41-pingÊµãËØïËøûÈÄöÊÄß">4.1 pingÊµãËØïËøûÈÄöÊÄß
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ÈÄöËøámaster-61Êü•ÁúãÁõÆÊ†áÊú∫Âô®ÊòØÂê¶ËøêË°å
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ansible all -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="link" href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/ping_module.html#ansible-collections-ansible-builtin-ping-module"  target="_blank" rel="noopener"
    >https://docs.ansible.com/ansible/latest/collections/ansible/builtin/ping_module.html#ansible-collections-ansible-builtin-ping-module</a></p>
<p>Êü•ÁúãÊ®°ÂùóËß£Èáä</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible-doc -s ping</span>
</span></span><span class="line"><span class="cl">- name: Try to connect to host, verify a usable python and <span class="k">return</span> <span class="sb">`</span>pong<span class="s1">&#39; on success
</span></span></span><span class="line"><span class="cl"><span class="s1">  ping:
</span></span></span><span class="line"><span class="cl"><span class="s1">      data:                  # Data to return for the `ping&#39;</span> <span class="k">return</span> value. If this parameter is <span class="nb">set</span> to <span class="sb">`</span>crash<span class="err">&#39;</span>, the
</span></span><span class="line"><span class="cl">                               module will cause an exception.
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâßË°å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m ping</span>
</span></span><span class="line"><span class="cl">172.16.1.8 <span class="p">|</span> <span class="nv">SUCCESS</span> <span class="o">=</span>&gt; <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ansible_facts&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;discovered_interpreter_python&#34;</span>: <span class="s2">&#34;/usr/bin/python&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;changed&#34;</span>: false, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ping&#34;</span>: <span class="s2">&#34;pong&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">172.16.1.9 <span class="p">|</span> <span class="nv">SUCCESS</span> <span class="o">=</span>&gt; <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ansible_facts&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;discovered_interpreter_python&#34;</span>: <span class="s2">&#34;/usr/bin/python&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;changed&#34;</span>: false, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ping&#34;</span>: <span class="s2">&#34;pong&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">172.16.1.7 <span class="p">|</span> <span class="nv">SUCCESS</span> <span class="o">=</span>&gt; <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ansible_facts&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;discovered_interpreter_python&#34;</span>: <span class="s2">&#34;/usr/bin/python&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;changed&#34;</span>: false, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ping&#34;</span>: <span class="s2">&#34;pong&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="42-command-ÁÆÄÂçïÂëΩ‰ª§Ê®°Âùó">4.2 command ÁÆÄÂçïÂëΩ‰ª§Ê®°Âùó
</h2><p><a class="link" href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/command_module.html#ansible-collections-ansible-builtin-command-module"  target="_blank" rel="noopener"
    >https://docs.ansible.com/ansible/latest/collections/ansible/builtin/command_module.html#ansible-collections-ansible-builtin-command-module</a></p>
<p>ËØ≠Ê≥ï</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible-doc -s command</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ansible ‰∏ªÊú∫ÁªÑ -m <span class="nb">command</span> -a <span class="s2">&#34;ÈúÄË¶ÅÊâπÈáèÊâßË°åÁöÑÂëΩ‰ª§&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ•Ê®°Âùó‰ΩúÁî®ÔºöÂú®ËøúÁ®ãËäÇÁÇπ‰∏äÊâßË°å‰∏Ä‰∏™ÂëΩ‰ª§</p>
<ul>
<li>commandÊ®°ÂùóÊòØansibleÈªòËÆ§ÁöÑÊ®°ÂùóÔºå‰πüÂ∞±ÊòØÈªòËÆ§Â∞±ÊåáÂÆö‰∫Ü -m command</li>
<li>Âè™ÊîØÊåÅÁÆÄÂçïÂëΩ‰ª§ÂëΩ‰ª§ÊâßË°åÔºåÊØîÂ¶Ç‰Ω†ÊÉ≥ËøúÁ®ãÁúã‰∏ãÊúçÂä°Âô®ÁöÑËµÑÊ∫ê‰ø°ÊÅØÔºåÊôÆÈÄöÁöÑlinuxÂëΩ‰ª§</li>
</ul>
<p>commandÊ®°ÂùóÊòØansibleÂëΩ‰ª§Âü∫Êú¨Ê®°ÂùóÔºåÊó†Ê≥ï‰ΩøÁî®Â§çÊùÇÁöÑlinuxÂëΩ‰ª§</p>
<ul>
<li>
<p>‰ΩøÁî®commandÊ®°ÂùóÊâßË°åËøúÁ®ãÂëΩ‰ª§ÔºåÂëΩ‰ª§‰∏çÂæóÁî®ÂèòÈáèÔºà$HOMEÔºâ</p>
</li>
<li>
<p>‰∏çÂæóÂá∫Áé∞ÁâπÊÆäÁ¨¶Âè∑</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt; „ÄÅ&gt;„ÄÅ|„ÄÅÔºõ„ÄÅ&amp;
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="ËøúÁ®ãÊü•Áúã‰∏ªÊú∫Âêç">ËøúÁ®ãÊü•Áúã‰∏ªÊú∫Âêç
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m command -a &#34;hostname&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ÁÆÄÂÜôÔºö
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;hostname&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Êü•ÁúãËøúÁ®ã‰∏ªÊú∫ÂÜÖÂ≠ò">Êü•ÁúãËøúÁ®ã‰∏ªÊú∫ÂÜÖÂ≠ò
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;free -m&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ËøúÁ®ãÂàõÂª∫Êñá‰ª∂Êü•ÁúãÊñá‰ª∂">ËøúÁ®ãÂàõÂª∫Êñá‰ª∂„ÄÅÊü•ÁúãÊñá‰ª∂
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m command -a &#34;touch /opt/bbb.log&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m command -a &#34;cat /opt/bbb.log&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ËøúÁ®ãËé∑ÂèñÊú∫Âô®Ë¥üËΩΩ">ËøúÁ®ãËé∑ÂèñÊú∫Âô®Ë¥üËΩΩ
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;uptime&#34;</span>
</span></span><span class="line"><span class="cl">172.16.1.9 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl"> 11:35:36 up <span class="m">3</span> days,  5:09,  <span class="m">2</span> users,  load average: 0.00, 0.01, 0.05
</span></span><span class="line"><span class="cl">172.16.1.7 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl"> 11:35:36 up  2:56,  <span class="m">2</span> users,  load average: 0.00, 0.01, 0.02
</span></span><span class="line"><span class="cl">172.16.1.8 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl"> 11:35:36 up  2:26,  <span class="m">2</span> users,  load average: 0.00, 0.01, 0.03
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂÖ≥Èó≠ÂëäË≠¶‰ø°ÊÅØ">ÂÖ≥Èó≠ÂëäË≠¶‰ø°ÊÅØ
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web  -m command -a &#34;touch /opt/ccc.log    warn=false&#34;</span>
</span></span><span class="line"><span class="cl">172.16.1.9 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">172.16.1.8 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">172.16.1.7 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Âú®ÊâÄÊúâÊú∫Âô®‰∏äÂàõÂª∫baizhi01Áî®Êà∑">Âú®ÊâÄÊúâÊú∫Âô®‰∏äÔºåÂàõÂª∫baizhi01Áî®Êà∑
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m command -a &#34;useradd baizhi01&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰ΩøÁî®commandÊèê‰æõÁöÑ‰∏ìÊúâÂëΩ‰ª§">‰ΩøÁî®commandÊèê‰æõÁöÑ‰∏ìÊúâÂëΩ‰ª§
</h3><p>Ëøô‰∫õÂëΩ‰ª§Áî®‰∫éÁºñÂÜôansible-playbookÔºåÂÆåÊàêÊúçÂä°Âô®ÈÉ®ÁΩ≤ÁöÑÂêÑÁßçÂ§çÊùÇÊù°‰ª∂ÈôêÂÆö„ÄÇ</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ÈÄâÈ°πÂèÇÊï∞</th>
<th>ÈÄâÈ°πËØ¥Êòé</th>
</tr>
</thead>
<tbody>
<tr>
<td>chdir</td>
<td>Âú®ÊâßË°åÂëΩ‰ª§ÊâßË°åÔºåÈÄöËøácdÂëΩ‰ª§ËøõÂÖ•ÊåáÂÆöÁõÆÂΩï</td>
</tr>
<tr>
<td>creates</td>
<td>ÂÆö‰πâ‰∏Ä‰∏™Êñá‰ª∂ÊòØÂê¶Â≠òÂú®ÔºåËã•‰∏çÂ≠òÂú®ÔºåÂàôËøêË°åÁõ∏Â∫îÂëΩ‰ª§ÔºõÂ≠òÂú®ÂàôË∑≥Ëøá</td>
</tr>
<tr>
<td>free_formÔºàÂøÖÈ°ªÔºâ</td>
<td>ÂèÇÊï∞‰ø°ÊÅØ‰∏≠ÂèØ‰ª•ËæìÂÖ•‰ªª‰ΩïÁ≥ªÁªüÂëΩ‰ª§ÔºåÂÆûÁé∞ËøúÁ®ãÁÆ°ÁêÜ</td>
</tr>
<tr>
<td>removes</td>
<td>ÂÆö‰πâ‰∏Ä‰∏™Êñá‰ª∂ÊòØÂê¶Â≠òÂú®ÔºåÂ¶ÇÊûúÂ≠òÂú®ÔºåÂàôËøêË°åÁõ∏Â∫îÂëΩ‰ª§ÔºõÂ¶ÇÊûú‰∏çÂ≠òÂú®ÂàôË∑≥Ëøá</td>
</tr>
</tbody>
</table></div>
<ul>
<li>Â§á‰ªΩ/var/logÊó•ÂøóÁõÆÂΩïÔºåÈúÄË¶ÅÂÖàËøõÂÖ•Ê†πÁõÆÂΩï</li>
</ul>
<p><code>cd / &amp;&amp; tar -zcvf /opt/log.tgz   /var/log</code></p>
<p>Ê≥®ÊÑè‰Ω†Â§á‰ªΩÊñá‰ª∂Â≠òÊîæÁöÑÊñá‰ª∂Â§πÊòØÂê¶Â≠òÂú®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m command -a &#34;tar -zcf /opt/log.tgz   /var/log   chdir=/&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;ls -l /opt&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Âú®/opt‰∏ãÂàõÂª∫baizhi666.log</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ÂéüÂÜôÊ≥ïÔºö
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible  web -a &#34;touch /opt/chaoge666.log&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;touch chaoge666.log  chdir=/opt&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Â§á‰ªΩ/etcÊâÄÊúâÈÖçÁΩÆÊñá‰ª∂Âà∞ /backup_config/etc.tgz „ÄÇ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;tar -zcf /backup_config/etc.tgz etc chdir=/&#34;</span>
</span></span><span class="line"><span class="cl">ÁõÆÊ†áÁõÆÂΩï‰∏çÂ≠òÂú®Âàô‰ºöÊä•Èîô
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>removesÂëΩ‰ª§</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">1.ËøôÈáåÂ∞±ÂæóÊèêÂâçËÄÉËôë /backup_configÊñá‰ª∂Â§πÊòØÂê¶Â≠òÂú®ÔºåÂøÖÈ°ªÂÖàÊúâÊñá‰ª∂Â§πÔºåÊâçËÉΩÊâßË°åËØ•Â§á‰ªΩÂëΩ‰ª§
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.Âà§Êñ≠Â¶ÇÊûúËØ•Êñá‰ª∂Â§π‰∏çÂ≠òÂú®ÔºåÂàô‰∏çÊâßË°åÂ§á‰ªΩ
</span></span><span class="line"><span class="cl">ÁõÆÊ†áÊñá‰ª∂Â§π‰∏çÂ≠òÂú®ÔºåËøô‰∏™ÂëΩ‰ª§‰∏ç‰ºöÂØπÁõÆÊ†áÊú∫Âô®‰∫ßÁîü‰ªª‰Ωï‰øÆÊîπÔºåÂõ†Ê≠§ÁªøËâ≤ÁªìÊûú
</span></span><span class="line"><span class="cl">ansible web -a <span class="s2">&#34;tar -zcf /backup_config/etc.tgz   etc chdir=/  removes=/backup_config&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3.‰Ω†ÂøÖÈ°ªÂÖàÂàõÂª∫ËØ•Êñá‰ª∂Â§π
</span></span><span class="line"><span class="cl">ansible web -a <span class="s2">&#34;mkdir -p /backup_config&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">4.ÂÜçÊ¨°ÊâßË°åËØ•ÂëΩ‰ª§
</span></span><span class="line"><span class="cl">ansible web -a <span class="s2">&#34;tar -zcf /backup_config/etc.tgz   etc chdir=/  removes=/backup_config&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ÊµãËØïcreatesÂëΩ‰ª§ÔºåÂ¶ÇÊûúÁõÆÊ†áÁõÆÂΩïÂ∑≤ÁªèÂ≠òÂú®‰∫ÜÔºåÂ∞±Âà´ÂàõÂª∫ËØ•ÁõÆÂΩï‰∫Ü</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible backup -m command -a &#39;mkdir /opt creates=/opt&#39;</span>
</span></span><span class="line"><span class="cl">172.16.1.41 <span class="p">|</span> SUCCESS <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">skipped, since /opt exists
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="43-shellÊ®°Âùó‰∏áËÉΩÊ®°Âùó">4.3 shellÊ®°ÂùóÔºà‰∏áËÉΩÊ®°ÂùóÔºâ
</h2><p>shellÊ®°ÂùóÂäüËÉΩÔºöÂú®ËøúÁ®ãËäÇÁÇπ‰∏äÊâßË°åÂëΩ‰ª§ÔºàÂ§çÊùÇÁöÑÂëΩ‰ª§Ôºâ</p>
<p><a class="link" href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/shell_module.html#ansible-collections-ansible-builtin-shell-module"  target="_blank" rel="noopener"
    >https://docs.ansible.com/ansible/latest/collections/ansible/builtin/shell_module.html#ansible-collections-ansible-builtin-shell-module</a></p>
<p>‰πüÂ∞±ÊòØÁ≠â‰∫é‰Ω†Âú®linux‰∏äÁõ¥Êé•ÊâßË°å‰ªª‰ΩïÂ§çÊùÇÁöÑÂëΩ‰ª§ÈÉΩÂèØ‰ª•</p>
<p>‰ΩÜÊòØansibleÁöÑ‰ΩøÁî®ÁêÜÂøµÊòØÔºå‰∫∫ÂÆ∂Êèê‰æõ‰∫ÜÂá†ÂçÉ‰∏™Ê®°ÂùóÔºåÂπ∂‰∏îÊúâÂæàÂ§çÊùÇÁöÑÂäüËÉΩÔºå‰Ω†Âú®Áî®shellÊ®°Âùó‰πãÂâçÔºåÂÖàÊü•‰∏ÄÊü•ÊòØÂê¶ÊúâÂØπÂ∫îÁöÑÊ®°Âùó„ÄÇ</p>
<p>‰Ω†Â¶ÇÊûúÊÉ≥‰ΩøÁî®ansibleÊèê‰æõÁöÑÁä∂ÊÄÅÂäüËÉΩÔºåËÆ∞ÂΩï‰Ω†ÊØèÊ¨°ÊâßË°åÂëΩ‰ª§ÁöÑÁªìÊûúÔºå‰Ω†Â∞±ÂøÖÈ°ªÂæó‰ΩøÁî®‰∏ìÊúâÁöÑÊ®°ÂùóÔºåÂê¶ÂàôÊó†Ê≥ï‰ΩøÁî®ËØ•ÂäüËÉΩ</p>
<p>shellÊ®°ÂùóÂèØ‰ª•ËØÜÂà´ÁâπÊÆäÁ¨¶Âè∑ÔºåÂ∞±Á≠â‰∫éËøúÁ®ãÊâßË°åÂëΩ‰ª§‰∫Ü</p>
<ul>
<li>ËøúÁ®ãËøáÊª§sshËøõÁ®ã‰ø°ÊÅØ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible all -m shell -a &#34;ps -ef|grep ssh&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>‰ΩøÁî®ÈáçÂÆöÂêëÁ¨¶Âè∑ÔºåÂàõÂª∫Êñá‰ª∂</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ËøúÁ®ãËé∑ÂèñÊó∂Èó¥‰ø°ÊÅØÔºå‰∏îÂÜôÂÖ•Âà∞Êñá‰ª∂‰∏≠Ôºå‰ΩÜcommand‰∏çËÆ§ËØÜÈáçÂÆöÂêë</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m command -a &#34;date &gt; /tmp/date.log&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m shell -a &#34;date &#39;+%F %T&#39; &gt; /tmp/date.log&#34;  #Á≠â‰ª∑Êìç‰Ωúdate ‚Äú+%Y-%m-%d %H:%M:%S‚Äù</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m shell -a &#39;cat /tmp/date.log&#39;</span>
</span></span><span class="line"><span class="cl">172.16.1.8 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">2022-05-06 12:06:23
</span></span><span class="line"><span class="cl">172.16.1.9 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">2022-05-06 12:06:23
</span></span><span class="line"><span class="cl">172.16.1.7 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">2022-05-06 12:06:23
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>ËøúÁ®ãÊâßË°åÂ§çÊùÇlinuxÂëΩ‰ª§</p>
<ul>
<li>ÂàõÂª∫Êñá‰ª∂Â§π</li>
<li>ÁîüÊàêshËÑöÊú¨Êñá‰ª∂(Êü•Áúã‰∏ªÊú∫Âêç)</li>
<li>Ëµã‰∫àËÑöÊú¨ÂèØÊâßË°åÊùÉÈôê</li>
<li>ÊâßË°åËÑöÊú¨</li>
<li>ÂøΩÁï•warning‰ø°ÊÅØ</li>
</ul>
</li>
</ul>
<p>Ëøô‰∏™ÂëΩ‰ª§Â∞±Êó†Ê≥ïÂú®command‰∏≠ÊâßË°å</p>
<p>ÈÄöËøá‰∏ÄÊù°ÂëΩ‰ª§ÔºåÂÅöÂ¶Ç‰∏ã‰∫ãÊÉÖ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web  -m shell  -a &#34;mkdir /0224/;echo &#39;hostname&#39; &gt; /0224/hostname.sh;chmod +x /0224/hostname.sh;/0224/hostname.sh;  warn=false&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>shellÂëΩ‰ª§Âà´ËøáÂ∫¶‰æùËµñÔºåÈÇ£Â∞±Á≠â‰∫éÁî®ansibleËøúÁ®ãÂ∏Æ‰Ω†ÊâßË°å‰∫Ü‰∏™ÊôÆÈÄöÁöÑshellÂëΩ‰ª§Ôºõ</p>
</blockquote>
<h2 id="44-copyÊã∑Ë¥ùÊñá‰ª∂">4.4 copyÊã∑Ë¥ùÊñá‰ª∂
</h2><p>copyÊ®°ÂùóÊòØËøúÁ®ãÊé®ÈÄÅÊï∞ÊçÆÊ®°ÂùóÔºåÂè™ËÉΩÊääÊï∞ÊçÆÊé®ÈÄÅÁªôËøúÁ®ã‰∏ªÊú∫ËäÇÁÇπÔºåÊó†Ê≥ïÊãâÂèñÊï∞ÊçÆÂà∞Êú¨Âú∞„ÄÇ</p>
<p>Êó¢ÁÑ∂ÊòØÊñá‰ª∂Êã∑Ë¥ùÔºåÂèØÁî®ÂèÇÊï∞‰πüÂ∞±ÊòØÂõ¥ÁªïÊñá‰ª∂Â±ûÊÄß„ÄÇ</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ÂèÇÊï∞Âêç</th>
<th>ÊòØÂê¶  ÂøÖÈ°ª</th>
<th>Èªò ËÆ§ ÂÄº</th>
<th>ÈÄâÈ°π</th>
<th>ËØ¥Êòé</th>
</tr>
</thead>
<tbody>
<tr>
<td>src</td>
<td>no</td>
<td></td>
<td></td>
<td><strong>Áî®‰∫éÂÆö‰ΩçansibleÊâßË°åÁöÑÊú∫Âô®‰∏äÁöÑÊñá‰ª∂</strong>ÔºåÈúÄË¶ÅÁªùÂØπË∑ØÂæÑ„ÄÇÂ¶ÇÊûúÊã∑Ë¥ùÁöÑÊòØÊñá‰ª∂Â§πÔºåÈÇ£‰πàÊñá‰ª∂Â§π‰ºöÊï¥‰ΩìÊã∑Ë¥ùÔºåÂ¶ÇÊûúÁªì Â∞æÊòØ&quot; / &ldquo;,ÈÇ£‰πàÂè™ÊúâÊñá‰ª∂Â§πÂÜÖÁöÑ‰∏úË•øË¢´Êã∑ËøáÂéª„ÄÇ(Á±ª‰ºº‰∫érsync)</td>
</tr>
<tr>
<td>content</td>
<td>no</td>
<td></td>
<td></td>
<td>Áî®Êù•Êõø‰ª£src,Áî®‰∫éÂ∞ÜÊåáÂÆöÊñá‰ª∂ÁöÑÂÜÖÂÆπÔºåÊã∑Ë¥ùÂà∞ËøúÁ®ãÊñá‰ª∂ÂÜÖ</td>
</tr>
<tr>
<td>dest</td>
<td>yes</td>
<td></td>
<td></td>
<td>Áî®‰∫éÂÆö‰ΩçËøúÁ®ãËäÇÁÇπ‰∏äÁöÑÊñá‰ª∂ÔºåÈúÄË¶ÅÁªùÂØπË∑ØÂæÑ„ÄÇÂ¶ÇÊûúsrcÊåáÂêëÁöÑÊòØÊñá‰ª∂Â§πÔºåËøô‰∏™ÂèÇÊï∞‰πüÂøÖÈ°ªÊòØÊåáÂêëÊñá‰ª∂Â§π</td>
</tr>
<tr>
<td>backup</td>
<td>no</td>
<td>no</td>
<td>yes/no</td>
<td>Â§á‰ªΩËøúÁ®ãËäÇÁÇπ‰∏äÁöÑÂéüÂßãÊñá‰ª∂ÔºåÂú®Êã∑Ë¥ù‰πãÂâç„ÄÇÂ¶ÇÊûúÂèëÁîü‰ªÄ‰πàÊÑèÂ§ñÔºåÂéüÂßãÊñá‰ª∂ËøòËÉΩ‰ΩøÁî®„ÄÇ</td>
</tr>
<tr>
<td>directory_mode</td>
<td>no</td>
<td></td>
<td></td>
<td>Ëøô‰∏™ÂèÇÊï∞Âè™ËÉΩÁî®‰∫éÊã∑Ë¥ùÊñá‰ª∂Â§πÊó∂ÂÄôÔºåËøô‰∏™ËÆæÂÆöÂêéÔºåÊñá‰ª∂Â§πÂÜÖÊñ∞Âª∫ÁöÑÊñá‰ª∂‰ºöË¢´Êã∑Ë¥ù„ÄÇËÄåËÄÅÊóßÁöÑ‰∏ç‰ºöË¢´Êã∑Ë¥ù</td>
</tr>
<tr>
<td>follow</td>
<td>no</td>
<td>no</td>
<td>yes/no</td>
<td>ÂΩìÊã∑Ë¥ùÁöÑÊñá‰ª∂Â§πÂÜÖÊúâlinkÂ≠òÂú®ÁöÑÊó∂ÂÄôÔºåÈÇ£‰πàÊã∑Ë¥ùËøáÂéªÁöÑ‰πü‰ºöÊúâlink</td>
</tr>
<tr>
<td>force</td>
<td>no</td>
<td>yes</td>
<td>yes/no</td>
<td>ÈªòËÆ§‰∏∫yes,‰ºöË¶ÜÁõñËøúÁ®ãÁöÑÂÜÖÂÆπ‰∏ç‰∏ÄÊ†∑ÁöÑÊñá‰ª∂(ÂèØËÉΩÊñá‰ª∂Âêç‰∏ÄÊ†∑)„ÄÇÂ¶ÇÊûúÊòØno,Â∞±‰∏ç‰ºöÊã∑Ë¥ùÊñá‰ª∂ÔºåÂ¶ÇÊûúËøúÁ®ãÊúâËøô ‰∏™Êñá‰ª∂</td>
</tr>
<tr>
<td>group</td>
<td>no</td>
<td></td>
<td></td>
<td>ËÆæÂÆö‰∏Ä‰∏™Áæ§ÁªÑÊã•ÊúâÊã∑Ë¥ùÂà∞ËøúÁ®ãËäÇÁÇπÁöÑÊñá‰ª∂ÊùÉÈôê</td>
</tr>
<tr>
<td>mode</td>
<td>no</td>
<td></td>
<td></td>
<td>Á≠âÂêå‰∫échmod,ÂèÇÊï∞ÂèØ‰ª•‰∏∫&quot;u+rwx or u=rw,g=r,o=r&rdquo;</td>
</tr>
<tr>
<td>owner</td>
<td>no</td>
<td></td>
<td></td>
<td>ËÆæÂÆö‰∏Ä‰∏™Áî®Êà∑Êã•ÊúâÊã∑Ë¥ùÂà∞ËøúÁ®ãËäÇÁÇπÁöÑÊñá‰ª∂ÊùÉÈôê</td>
</tr>
</tbody>
</table></div>
<h3 id="copyËØ≠Ê≥ï">copyËØ≠Ê≥ï
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ansible ‰∏ªÊú∫ÁªÑ -m copy -a <span class="s2">&#34;ÂèÇÊï∞&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÁÆÄÂçïÂèëÈÄÅÊñá‰ª∂">ÁÆÄÂçïÂèëÈÄÅÊñá‰ª∂
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m copy   -a &#34;src=/tmp/61-dnf.log   dest=/tmp/web-dnf.log&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Âπ∂‰∏îansibleÁöÑÊ®°ÂùóËÆ∞ÂΩï‰∫ÜÊñá‰ª∂Â±ûÊÄßÔºåÊñá‰ª∂ÁöÑmd5ÂÄºÔºåÂæóÂà∞‰∫ÜÊñá‰ª∂ÁöÑÂîØ‰∏ÄÊ†°È™åÂÄºÔºåÂà§Êñ≠Êñá‰ª∂ÂÜÖÂÆπÊòØÂê¶ÂèòÂåñÔºåÂ¶ÇÊûúÊú™ÂèòÂåñÔºå‰∏çÂÅöÂ§ÑÁêÜÔºåÊèêÂçáÊâπÈáèÁÆ°ÁêÜÁöÑÊïàÁéá</p>
</blockquote>
<h3 id="ÂèëÈÄÅÊñá‰ª∂‰∏îÊåáÂÆöÊñá‰ª∂Â±ûÊÄß">ÂèëÈÄÅÊñá‰ª∂‰∏îÊåáÂÆöÊñá‰ª∂Â±ûÊÄß
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">61
</span></span><span class="line"><span class="cl">‚Üì
</span></span><span class="line"><span class="cl">webÊú∫Âô®ÁªÑ(Â±ûÊÄßÂèòÂåñÔºåbaizhi001Ôºå600)
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊùÉÈôêÊîπ‰∏∫600„ÄÅ‰øÆÊîπ‰∏∫baizhi001Áî®Êà∑ÔºàË¶ÅÊ±ÇÁõÆÊ†áÊú∫Âô®Â≠òÂú®ËØ•Áî®Êà∑Ôºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ÂàõÂª∫baizhi001Áî®Êà∑
</span></span><span class="line"><span class="cl">ansible web -m shell -a <span class="s2">&#34;useradd baizhi001&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ËøúÁ®ãÊã∑Ë¥ùÊñá‰ª∂Ôºå‰∏î‰øÆÊîπÊùÉÈôêÔºå‰∏∫600
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m copy -a &#34;src=/tmp/61-dnf.log   dest=/opt/web-dnf.log  group=baizhi001 owner=baizhi001   mode=600 &#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ËøúÁ®ãÊ£ÄÊü•Êñá‰ª∂‰ø°ÊÅØ
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m shell -a &#34;ls -l  /opt/web-dnf.log&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂèëÈÄÅÊñá‰ª∂‰∏îÂÖàÂÅöÂ•ΩÂ§á‰ªΩ">ÂèëÈÄÅÊñá‰ª∂‰∏îÂÖàÂÅöÂ•ΩÂ§á‰ªΩ
</h3><p>‰ΩøÁî®backupÂèÇÊï∞ÔºåÈò≤Ê≠¢Ë¶ÜÁõñËøúÁ®ãÊñá‰ª∂Ôºå‰∏¢Â§±Â§á‰ªΩÔºåÊèêÂâçÂ§á‰ªΩËØ•ÁõÆÊ†áÊú∫Âô®ÁöÑÊï∞ÊçÆ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">1.Ê£ÄÊü•ÁõÆÊ†áÊú∫Âô®ÁöÑÊñá‰ª∂
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m shell -a &#34;ls -l  /opt/web-dnf.log&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.ËøúÁ®ãÊã∑Ë¥ùÊñá‰ª∂Ôºå‰∏îÂÅöÂ•ΩÂ§á‰ªΩ
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m copy -a &#34;src=/tmp/61-dnf.log  dest=/opt/web-dnf.log   backup=yes&#34;  </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3.ÂèëÁé∞ansibleÂ∏Æ‰Ω†ÂÅöÂ•Ω‰∫ÜÂ§á‰ªΩ
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m shell -a &#34;ls -l /opt/web*&#34;											¬∑</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÊåáÂÆöÊï∞ÊçÆÂÜôÂÖ•Âà∞ËøúÁ®ãÊñá‰ª∂‰∏≠">ÊåáÂÆöÊï∞ÊçÆÂÜôÂÖ•Âà∞ËøúÁ®ãÊñá‰ª∂‰∏≠
</h3><p>Âêërsyncd.conf‰∏≠Â°´ÂÖ•Ë¥¶Âè∑ÂØÜÁ†ÅÔºåË¶ÜÁõñÂÖ∂ÂéüÊúâÁöÑÊñá‰ª∂ÂÜÖÂÆπ</p>
<p>contentÂèÇÊï∞</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1"># </span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®ÊÑèÂÉèËøôÊ†∑ÁöÑË¶ÜÁõñÊìç‰ΩúÔºåËøòÊòØÊ∑ªÂä†Â§á‰ªΩÂèÇÊï∞Êõ¥ÂêàÈÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m copy -a &#34;content=&#39;byebye LINUX&#39;   dest=/opt/web-dnf.log   backup=yes  &#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Â§çÂà∂Êñá‰ª∂Â§π">Â§çÂà∂Êñá‰ª∂Â§π
</h3><p>Ê≥®ÊÑèÁªìÂ∞æÊñúÊù†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ËøúÁ®ãÊã∑Ë¥ù/opt/ ‰∏ãÁöÑÊâÄÊúâÂÜÖÂÆπÂà∞ÁõÆÊ†áÊú∫Âô®
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m copy -a &#34;src=/opt/  dest=/tmp/&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ËøúÁ®ãÊã∑Ë¥ù/opt  Êï¥‰∏™ÁõÆÂΩïÂà∞ÁõÆÊ†áÊú∫Âô®
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m copy -a &#34;src=/opt  dest=/tmp/&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="45-fileÊñá‰ª∂Êìç‰ΩúÊ®°Âùó">4.5 fileÊñá‰ª∂Êìç‰ΩúÊ®°Âùó
</h2><p>ÈúÄË¶ÅÂíåcopyÂå∫Âà´ÂºÄÔºåfileÊ®°Âùó‰∏ªË¶ÅÊòØÂØπÊñá‰ª∂Â±ûÊÄßÂêÑÁßçÊìç‰ΩúÁöÑÔºåÁî®‰∫éÂàõÂª∫Êñá‰ª∂„ÄÅÁõÆÂΩïÊï∞ÊçÆÔºå‰ª•ÂèäÂØπÁé∞ÊúâÁöÑÊñá‰ª∂„ÄÅÁõÆÂΩïÊùÉÈôêËøõË°å‰øÆÊîπ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">copyÊ®°ÂùóÔºåsrc(ÁÆ°ÁêÜÊú∫Âô®‰∏ä )  dest(ÁõÆÊ†áÊú∫Âô®‰∏ä)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">file‰∏ìÈó®Áî®‰∫éÂú®ËøúÁ®ãÊú∫Âô®‰∏äÔºåÂÖ≥‰∫éÊñá‰ª∂ÁöÑÊâÄÊúâÊìç‰Ωú
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">file  src(ÁõÆÊ†áÊú∫Âô®‰∏äÁöÑÊñá‰ª∂)   dest(ÁõÆÊ†áÊú∫Âô®‰∏äÁöÑÊñá‰ª∂)  
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÆòÁΩëÔºöhttps://docs.ansible.com/ansible/latest/modules/file_module.html#file-module</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ÊàñËÄÖÁúãÂëΩ‰ª§Â∏ÆÂä©
</span></span><span class="line"><span class="cl">[root@master-61 ~]#ansible-doc -s file
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ËøúÁ®ãÂàõÂª∫Êñá‰ª∂">ËøúÁ®ãÂàõÂª∫Êñá‰ª∂
</h3><p>ansibleÊØèÊ¨°ÂëΩ‰ª§ÁöÑÊâßË°åÔºåÈÉΩ‰ºöËÆ∞ÂΩï‰∏ãÂΩìÂâçÁöÑÁä∂ÊÄÅ</p>
<p>stateÂèÇÊï∞„ÄÅpathÂèÇÊï∞</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ËøúÁ®ãÂú®webÊúçÂä°Âô®ÁªÑ‰∏≠ÔºåÂàõÂª∫‰∏Ä‰∏™ÊñáÊú¨Ôºå  hello_ansible.log
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1"># ansible web -m file -a &#34;path=/opt/hello_ansible.log state=touch&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1"># ansible web -m shell -a &#34;ls -ld /opt/hello*&#34;</span>
</span></span><span class="line"><span class="cl">172.16.1.7 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">drwxr-xr-x <span class="m">2</span> root root <span class="m">6</span> May  <span class="m">6</span> 14:56 /opt/hello_ansible
</span></span><span class="line"><span class="cl">-rw-r--r-- <span class="m">1</span> root root <span class="m">0</span> May  <span class="m">6</span> 14:54 /opt/hello_ansible.log
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂàõÂª∫Êñá‰ª∂Â§π">ÂàõÂª∫Êñá‰ª∂Â§π
</h3><p>stateÂèÇÊï∞„ÄÅpathÂèÇÊï∞</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m file -a &#34;path=/opt/hello_ansible  state=directory&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂàõÂª∫Êñá‰ª∂‰∏îËÆæÂÆöÊùÉÈôê">ÂàõÂª∫Êñá‰ª∂‰∏îËÆæÂÆöÊùÉÈôê
</h3><p>stateÂèÇÊï∞„ÄÅpathÂèÇÊï∞„ÄÅownerÂèÇÊï∞„ÄÅgroupÂèÇÊï∞</p>
<p>path=/opt/hello-linux.log</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m file -a &#34;path=/opt/hello-linux.log  state=touch owner=baizhi001 group=baizhi001&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ËøúÁ®ã‰øÆÊîπÊñá‰ª∂Â±ûÊÄß">ËøúÁ®ã‰øÆÊîπÊñá‰ª∂Â±ûÊÄß
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m file -a &#34;path=/opt/hello-linux.log state=touch owner=baizhi001 group=baizhi001 mode=777&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂàõÂª∫ËΩØËøûÊé•Êñá‰ª∂">ÂàõÂª∫ËΩØËøûÊé•Êñá‰ª∂
</h3><p>ËΩØËøûÊé•Ôºå‰πüÂ∞±ÊòØÂú®ÁõÆÊ†áÊú∫Âô®‰∏äÔºåÊåáÂÆöÊ∫êÊñá‰ª∂ÔºåÂàõÂª∫ËΩØËøûÊé•</p>
<p>src„ÄÅdest„ÄÅstate</p>
<p>ÁªôwebÊúçÂä°Âô®ÁªÑÁöÑ /etc/hostsÊñá‰ª∂ÔºåÊ∑ªÂä†ËΩØËøûÊé•Âà∞/opt/hostsÊñá‰ª∂</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1"># ansible web -m file -a &#34;src=/etc/hosts  dest=/opt/hosts state=link&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Âº∫Âà∂ÊÄßÂàõÂª∫Êñá‰ª∂ËΩØËøûÊé•">Âº∫Âà∂ÊÄßÂàõÂª∫Êñá‰ª∂ÔºàËΩØËøûÊé•Ôºâ
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ÊÑè‰πâ‰∏çÂ§ßÔºåÊü•ÁúãforceÂèÇÊï∞ÁöÑ‰ΩúÁî®
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m file -a &#34;src=/etc/hostsss dest=/opt/hosts state=link  force=yes &#34;	</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰øÆÊîπÂ∑≤Â≠òÂú®Êñá‰ª∂Êñá‰ª∂Â§πÁöÑÂ±ûÊÄß">‰øÆÊîπÂ∑≤Â≠òÂú®Êñá‰ª∂/Êñá‰ª∂Â§πÁöÑÂ±ûÊÄß
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">‰øÆÊîπÊñá‰ª∂ Path„ÄÅmode
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible 172.16.1.7 -m file -a &#34;path=/opt/chaoge666.log  owner=baizhi001 group=baizhi001  mode=666&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">‰øÆÊîπÊñá‰ª∂Â§π Path„ÄÅmode owner,group
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible 172.16.1.7 -m file -a &#34;path=/opt/hello_ansible  owner=baizhi001 group=baizhi001&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂÖ≥‰∫éfileÊ®°ÂùóÁöÑÊâÄÊúâÂèÇÊï∞‰ΩúÁî®">ÂÖ≥‰∫éfileÊ®°ÂùóÁöÑÊâÄÊúâÂèÇÊï∞‰ΩúÁî®
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html#parameters
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂÖ≥‰∫éfileÊ®°ÂùóÁöÑÂÆû‰æãÁî®Ê≥ï">ÂÖ≥‰∫éfileÊ®°ÂùóÁöÑÂÆû‰æãÁî®Ê≥ï
</h3><p>playbookÂâßÊú¨ÁöÑÂÜôÊ≥ïÔºåyamlÂÜôÊ≥ï</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html#examples
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="46-scriptËÑöÊú¨Ê®°Âùó">4.6 scriptËÑöÊú¨Ê®°Âùó
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">‰∏ÄÈîÆÈÉ®ÁΩ≤rsyncÔºånfsÔºånginxÁ≠âÔºå‰∏§ÁßçÂÅöÊ≥ï:
</span></span><span class="line"><span class="cl">1.ÊääËÑöÊú¨ÂèëÂà∞ÁõÆÊ†áÊú∫Âô®‰∏äÊâßË°åÔºå
</span></span><span class="line"><span class="cl">2.ËøúÁ®ãÊâßË°åÔºåÁõÆÊ†áÊú∫Âô®‰∏ä‰∏çÈúÄË¶ÅÂ≠òÂú®Ëøô‰∏™ËÑöÊú¨
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÆòÁΩë</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">https://docs.ansible.com/ansible/latest/collections/ansible/builtin/script_module.html#ansible-collections-ansible-builtin-script-module
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>scriptsÊ®°ÂùóÂäüËÉΩÔºöÊääÊú¨Âú∞ËÑöÊú¨‰º†ËæìÂà∞ËøúÁ®ãËäÇÁÇπ‰∏äÂπ∂ËøêË°åËÑöÊú¨</p>
<p>‰∏∫‰ªÄ‰πàÈúÄË¶ÅÁî®scriptsÊ®°ÂùóÔºåÊòØÂõ†‰∏∫ÊØîËµ∑<code>shell</code>Ê®°ÂùóÔºåscriptÊ®°ÂùóÂäüËÉΩÊõ¥Âº∫Â§ßÔºåÁÆ°ÁêÜÊú∫Êú¨Âú∞Êúâ‰∏Ä‰ªΩËÑöÊú¨ÔºåÂ∞±ÂèØ‰ª•Âú®ÊâÄÊúâÊú∫Âô®‰∏äËøêË°åÔºåÊñå‰∏îscriptÊ®°ÂùóÂèØ‰ª•ÂèçÂ§çÊâßË°åÂëΩ‰ª§„ÄÅËøúÁ®ãÊâßË°åËÑöÊú¨</p>
<h3 id="scriptsÊ®°ÂùóÁöÑÂäüËÉΩÂèÇÊï∞">scriptsÊ®°ÂùóÁöÑÂäüËÉΩÂèÇÊï∞
</h3><div class="table-wrapper"><table>
<thead>
<tr>
<th>ÈÄâÈ°πÂèÇÊï∞</th>
<th>ÈÄâÈ°πËØ¥Êòé</th>
</tr>
</thead>
<tbody>
<tr>
<td>creates</td>
<td>ÂÆö‰πâ‰∏Ä‰∏™Êñá‰ª∂ÊòØÂê¶Â≠òÂú®ÔºåËã•‰∏çÂ≠òÂú®ÔºåÂàôËøêË°åÁõ∏Â∫îÂëΩ‰ª§ÔºõÂ≠òÂú®ÂàôË∑≥Ëøá</td>
</tr>
<tr>
<td>free_formÔºàÂøÖÈ°ªÔºâ</td>
<td>ÂèÇÊï∞‰ø°ÊÅØ‰∏≠ÂèØ‰ª•ËæìÂÖ•‰ªª‰ΩïÁ≥ªÁªüÂëΩ‰ª§ÔºåÂÆûÁé∞ËøúÁ®ãÁÆ°ÁêÜ</td>
</tr>
<tr>
<td>removes</td>
<td>ÂÆö‰πâ‰∏Ä‰∏™Êñá‰ª∂ÊòØÂê¶Â≠òÂú®ÔºåÂ¶ÇÊûúÂ≠òÂú®ÔºåÂàôËøêË°åÁõ∏Â∫îÂëΩ‰ª§ÔºõÂ¶ÇÊûú‰∏çÂ≠òÂú®ÂàôË∑≥Ëøá</td>
</tr>
</tbody>
</table></div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">1.ÁÆ°ÁêÜÊú∫ÂàõÂª∫ÊµãËØïËÑöÊú¨
</span></span><span class="line"><span class="cl">master-61ÂàõÂª∫ËØ•ËÑöÊú¨
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#vim echo_server_info.sh </span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#cat echo_server_info.sh </span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>hostname -I<span class="k">)</span><span class="s2">&#34;</span> &gt;&gt; /tmp/server_info.log
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>uptime<span class="k">)</span><span class="s2">&#34;</span> &gt;&gt; /tmp/server_info.log
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>free -m<span class="k">)</span><span class="s2">&#34;</span> &gt;&gt; /tmp/server_info.log
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.Ê∑ªÂä†ÊâßË°åÊùÉÈôê
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#chmod +x echo_server_info.sh </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3.ËøúÁ®ãÊâßË°å
</span></span><span class="line"><span class="cl">ÂèëÁªônfsÊú∫Âô®ÂéªÊâßË°å
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible nfs -m script -a &#34;/root/echo_server_info.sh&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">4.Ê£ÄÊü•ÁªìÊûú
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible nfs -m shell -a &#34;cat /tmp/server_info.log&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ËøúÁ®ãÂú®ÁõÆÊ†áÊú∫Âô®ÊâßË°åËÑöÊú¨">ËøúÁ®ãÂú®ÁõÆÊ†áÊú∫Âô®ÊâßË°åËÑöÊú¨
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ËøúÁ®ãÂÆâË£ÖnginxËÑöÊú¨
</span></span><span class="line"><span class="cl">[root@master-61 ~]#cat install_nginx.sh 
</span></span><span class="line"><span class="cl">#yum install nginx -y
</span></span><span class="line"><span class="cl">#yum remove nginx -y
</span></span><span class="line"><span class="cl">echo &#34;nginxÊìç‰ΩúÂÆåÊØï&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[root@master-61 ~]#ansible nfs -m script -a &#34;/root/install_nginx.sh&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Êü•ÁúãÂëΩ‰ª§ÊâßË°åËØ¶ÁªÜËøáÁ®ã">Êü•ÁúãÂëΩ‰ª§ÊâßË°åËØ¶ÁªÜËøáÁ®ã
</h3><p>ÊòæÁ§∫ÂëΩ‰ª§ÊâßË°åÁöÑËØ¶ÁªÜËøáÁ®ãÔºåÂºÄÂêØ‰∫ÜdebugÊó•ÂøóÊ®°ÂºèÔºå-vvvvvÂèÇÊï∞ÊòæÁ§∫ËØ¶ÁªÜËøáÁ®ãÔºåvË∂äÂ§öÔºåË∂äËØ¶ÁªÜ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[root@master-61 ~]#ansible nfs -vvvv -m shell -a &#34;cat /tmp/server_info.log&#34; 
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="47-cronÂÆöÊó∂‰ªªÂä°Ê®°Âùó">4.7 cronÂÆöÊó∂‰ªªÂä°Ê®°Âùó
</h2><p>cronÊ®°ÂùóÁî®‰∫éÁÆ°ÁêÜÂÆöÊó∂‰ªªÂä°ÁöÑËÆ∞ÂΩïÔºåÁºñÂÜô‰ªªÂä°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">ÂÆòÁΩëÊñáÊ°£
</span></span></span><span class="line"><span class="cl"><span class="err">https://docs.ansible.com/ansible/latest/modules/cron_module.html#cron-module
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂØπÊØîansibleÁöÑcronÊ®°Âùó‰ª•Âèäcrontab">ÂØπÊØîansibleÁöÑcronÊ®°Âùó‰ª•Âèäcrontab
</h3><p>Â∏∏ËßÅÁöÑÂèÇÊï∞Â¶ÇÊ≠§Ôºå‰ΩøÁî®ansibleÁºñÂÜôÂÆöÊó∂‰ªªÂä°ÔºåÂíåÁõ¥Êé•ÁºñÂÜôÊòØÊ≤°Êúâ‰ªÄ‰πàÂå∫Âà´ÁöÑ</p>
<p><img src="/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/assets/aff7e1c089d7fbf568a8ca351a46d5a1.jpeg"
	width="1888"
	height="413"
	srcset="/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/assets/aff7e1c089d7fbf568a8ca351a46d5a1_hu3400507602043994949.jpeg 480w, /xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/assets/aff7e1c089d7fbf568a8ca351a46d5a1_hu6034676024120022660.jpeg 1024w"
	loading="lazy"
	
		alt="aff7e1c089d7fbf568a8ca351a46d5a1"
	
	
		class="gallery-image" 
		data-flex-grow="457"
		data-flex-basis="1097px"
	
></p>
<h3 id="Ê∑ªÂä†ntpdateÂÆöÊó∂‰ªªÂä°">Ê∑ªÂä†ntpdateÂÆöÊó∂‰ªªÂä°
</h3><p>Ê∑ªÂä†ÊØè5ÂàÜÈíüÊâßË°å‰∏ÄÊ¨°ÂíåÈòøÈáå‰∫ëÊó∂Èó¥ÂêåÊ≠•</p>
<p>name„ÄÅjob„ÄÅminuteÂèÇÊï∞</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cronÊ®°ÂùóÂàõÂª∫ÂÆöÊó∂‰ªªÂä°
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible nfs  -m cron   -a &#34;name=&#39;ntp aliyun&#39;   minute=*/5   job=&#39;ntpdate -u ntp.aliyun.com&#39;&#34;</span>
</span></span><span class="line"><span class="cl">172.16.1.31 <span class="p">|</span> <span class="nv">CHANGED</span> <span class="o">=</span>&gt; <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;ansible_facts&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;discovered_interpreter_python&#34;</span>: <span class="s2">&#34;/usr/bin/python&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;changed&#34;</span>: true, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;envs&#34;</span>: <span class="o">[]</span>, 
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;jobs&#34;</span>: <span class="o">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;ntp aliyun&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Êü•ÁúãËøúÁ®ãÊú∫Âô®ÁöÑcrontabËÆ∞ÂΩï
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible nfs -m shell -a &#34;crontab -l&#34;</span>
</span></span><span class="line"><span class="cl">172.16.1.31 <span class="p">|</span> CHANGED <span class="p">|</span> <span class="nv">rc</span><span class="o">=</span><span class="m">0</span> &gt;&gt;
</span></span><span class="line"><span class="cl">* * * * * /usr/sbin/ntpdate time1.aliyun.com &gt; /dev/null 2&gt;<span class="p">&amp;</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="c1">#Ansible: ntp aliyun</span>
</span></span><span class="line"><span class="cl">*/5 * * * * ntpdate -u ntp.aliyun.com
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Âà†Èô§ÂÆöÊó∂‰ªªÂä°">Âà†Èô§ÂÆöÊó∂‰ªªÂä°
</h3><p>Âè™ËÉΩÂü∫‰∫écronÊ®°ÂùóÊåáÂÆöÂêçÂ≠óÁöÑ‰øÆÊîπ</p>
<p>nameÂèÇÊï∞ÔºåstateÂèÇÊï∞</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cronÊ®°ÂùóÁî®Ê≥ï
</span></span><span class="line"><span class="cl">ansible nfs -m cron -a <span class="s2">&#34;name=&#39;ntp aliyun&#39;  state=absent &#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">shellÊ®°ÂùóÁî®Ê≥ï
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible nfs -m shell -a &#34;crontab -r&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂàõÂª∫ÊØèÂàÜÈíüÊâßË°åÁöÑ‰ªªÂä°">ÂàõÂª∫ÊØèÂàÜÈíüÊâßË°åÁöÑ‰ªªÂä°
</h3><p>‰∏çÊåáÂÆö‰ªª‰ΩïÊó∂Èó¥ËßÑÂàôÔºåÈªòËÆ§ÊòØÊØèÂàÜÈíü</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[root@master-61 ~]#ansible nfs -m cron -a &#34;name=&#39;‰∏ÄÂè•ËØù&#39;  job=&#39;echo &#34;hellolinux&#34; &gt;&gt;/tmp/hello.log &#39;&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[root@master-61 ~]#ansible nfs -m shell -a &#34;crontab -l&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰øÆÊîπÊåáÂÆöÂêçÁß∞ÁöÑÂÆöÊó∂‰ªªÂä°">‰øÆÊîπÊåáÂÆöÂêçÁß∞ÁöÑÂÆöÊó∂‰ªªÂä°
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[root@master-61 ~]#ansible nfs -m cron -a &#34;name=&#39;‰∏ÄÂè•ËØù&#39;    minute=30  hour=23   job=&#39;echo hellolinux &gt;&gt;/tmp/hello.log&#39; &#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[root@master-61 ~]#ansible nfs -m shell -a &#34;crontab -l&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="48-groupÊ®°Âùó">4.8 groupÊ®°Âùó
</h2><p>ÁÆ°ÁêÜÁ≥ªÁªüÁî®Êà∑ÁªÑÁöÑÊ®°Âùó</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">ÂÆòÁΩëÊñáÊ°£
</span></span></span><span class="line"><span class="cl"><span class="err">https://docs.ansible.com/ansible/latest/modules/group_module.html#group-
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ≠Ê≥ï:</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>Ê®°ÂùóÂèÇÊï∞</th>
<th>ÂèÇÊï∞ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>ÂàõÂª∫ÊåáÂÆöÁöÑÁªÑÂêç</td>
</tr>
<tr>
<td>gid</td>
<td>ÁªÑÁöÑGID</td>
</tr>
<tr>
<td>state</td>
<td>absentÔºåÁßªÈô§ËøúÁ®ã‰∏ªÊú∫ÁöÑÁªÑ</td>
</tr>
<tr>
<td></td>
<td>presentÔºåÂàõÂª∫ËøúÁ´Ø‰∏ªÊú∫ÁöÑÁªÑ</td>
</tr>
</tbody>
</table></div>
<h3 id="ÂàõÂª∫baizhi_opsÁªÑgid1234">ÂàõÂª∫baizhi_opsÁªÑÔºågid=1234
</h3><p>name„ÄÅgid</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible nfs  -m group  -a &#34;name=baizhi_ops   gid=1234&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Âà†Èô§ÁªÑ">Âà†Èô§ÁªÑ
</h3><p>name„ÄÅgid„ÄÅstate</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible nfs  -m group  -a &#34;name=baizhi_ops   gid=1234  state=absent&#34;  </span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="49-userÁî®Êà∑Ê®°Âùó">4.9 userÁî®Êà∑Ê®°Âùó
</h2><p>Áî®Êà∑ÁÆ°ÁêÜÔºå‰πüÂ∞±ÊòØÂÖ≥‰∫éÁî®Êà∑ÁöÑ</p>
<ul>
<li>uid</li>
<li>Áî®Êà∑Âêç</li>
<li>Áî®Êà∑‰∏ªÁªÑ</li>
<li>Áî®Êà∑ÈôÑÂä†ÁªÑ</li>
<li>ÂàõÂª∫Áî®Êà∑</li>
<li>Âà†Èô§Áî®Êà∑</li>
<li>ÂàõÂª∫ÂÖ≥‰∫éÁî®Êà∑ÁöÑÂÖ¨ÁßÅÈí•</li>
<li>Áî®Êà∑ËøáÊúüÊó∂Èó¥</li>
<li>Áî®Êà∑ÂØÜÁ†ÅËøáÊúüÊó∂Èó¥</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">ÂÆòÁΩëÊñáÊ°£
</span></span></span><span class="line"><span class="cl"><span class="err">https://docs.ansible.com/ansible/latest/modules/user_module.html#user-module
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ËØ≠Ê≥ïÂèÇÊï∞">ËØ≠Ê≥ïÂèÇÊï∞
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">ÂÆû‰æãÁî®Ê≥ï
</span></span></span><span class="line"><span class="cl"><span class="err">https://docs.ansible.com/ansible/latest/collections/ansible/builtin/user_module.html#examples
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="table-wrapper"><table>
<thead>
<tr>
<th>Ê®°ÂùóÂèÇÊï∞</th>
<th>ÂèÇÊï∞ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td>create_home</td>
<td>ÂàõÂª∫ÂÆ∂ÁõÆÂΩïÔºåËÆæÁΩÆnoÂàô‰∏çÂàõÂª∫ÂÆ∂ÁõÆÂΩï</td>
</tr>
<tr>
<td>group</td>
<td>ÂàõÂª∫Áî®Êà∑ÁªÑ</td>
</tr>
<tr>
<td>name</td>
<td>ÂàõÂª∫Áî®Êà∑ÁöÑÂêçÂ≠ó</td>
</tr>
<tr>
<td>password</td>
<td>ÂàõÂª∫Áî®Êà∑ÁöÑÂØÜÁ†Å</td>
</tr>
<tr>
<td>uid</td>
<td>ÂàõÂª∫Áî®Êà∑ÁöÑUID</td>
</tr>
<tr>
<td>shell</td>
<td>Áî®Êà∑ÁôªÂΩïËß£ÈáäÂô®</td>
</tr>
<tr>
<td>state</td>
<td>AbsentÔºàÂà†Èô§Áî®Êà∑ÔºâpresentÔºàÈªòËÆ§ÂèÇÊï∞ÔºåÂàõÂª∫Ôºâ</td>
</tr>
<tr>
<td>expires</td>
<td>Ë¥¶Êà∑ËøáÊúüÊó∂Èó¥</td>
</tr>
</tbody>
</table></div>
<h3 id="ÂàõÂª∫baizhi001Áî®Êà∑uid‰∏∫8888">ÂàõÂª∫baizhi001Áî®Êà∑Ôºåuid‰∏∫8888
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible nfs -m user -a &#34;name=baizhi001  uid=8888&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂàõÂª∫Áî®Êà∑cc01">ÂàõÂª∫Áî®Êà∑cc01
</h3><ul>
<li>uid„ÄÅgid‰∏∫1777</li>
<li>Ê≤°ÊúâÂÆ∂ÁõÆÂΩï„ÄÅ‰∏çÂÖÅËÆ∏ÁôªÂΩï</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">Ê≥®ÊÑèËØ•Áî®Êà∑ÁªÑÊòØÂê¶Â≠òÂú®ÔºåÂê¶ÂàôÊä•Èîô
</span></span><span class="line"><span class="cl">group„ÄÅname„ÄÅgid
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible nfs -m group -a &#34;name=cc01 gid=1777&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ÂàõÂª∫Áî®Êà∑ÔºåËÆæÁΩÆÊùÉÈôê
</span></span><span class="line"><span class="cl">user„ÄÅname„ÄÅuid„ÄÅgroup„ÄÅcreate_home„ÄÅshell
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible nfs -m user -a &#34;name=cc01 uid=1777 group=1777 create_home=no  shell=/sbin/nologin &#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Ê£ÄÊü•Áî®Êà∑
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="410-yumÂÆâË£ÖËΩØ‰ª∂">4.10 yumÂÆâË£ÖËΩØ‰ª∂
</h2><p>yumÊ®°ÂùóÊòéÊòæÂ∞±ÊòØ‰∏Ä‰∏™‰∏ìÈó®Áî®‰∫éÁÆ°ÁêÜËΩØ‰ª∂ÁöÑÊ®°Âùó„ÄÇyumÊ®°ÂùóÂÖ∂ÂÆûÂ∞±ÊòØÂú®ËøúÁ®ãËäÇÁÇπ‰∏äÔºåÊâßË°åyumÂëΩ‰ª§Ôºå‰Ω†ÂèØ‰ª•Âø´ÈÄüÁôªÂΩïÂà∞ÁõÆÊ†áÊú∫Âô®ÔºåÊü•ÁúãËøõÁ®ã</p>
<h3 id="ÂÆòÁΩëÊñáÊ°£Á§∫‰æãÁî®Ê≥ï">ÂÆòÁΩëÊñáÊ°£Á§∫‰æãÁî®Ê≥ï
</h3><p><img src="/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/assets/image-20200317164841904.png"
	width="1576"
	height="858"
	srcset="/xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/assets/image-20200317164841904_hu8118940964493789301.png 480w, /xiaoshi/p/ansible%E5%9F%BA%E7%A1%80/assets/image-20200317164841904_hu4372038433789442210.png 1024w"
	loading="lazy"
	
		alt="image-20200317164841904"
	
	
		class="gallery-image" 
		data-flex-grow="183"
		data-flex-basis="440px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">https://docs.ansible.com/ansible/latest/collections/ansible/builtin/yum_module.html#examples
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂÆâË£Önet-toolsÊúÄÊñ∞ÁâàÊú¨">ÂÆâË£Önet-toolsÊúÄÊñ∞ÁâàÊú¨
</h3><p>latestÂèÇÊï∞‰πüÁî®‰∫éÂçáÁ∫ßËΩØ‰ª∂ÂåÖ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible backup -m yum -a &#34;name=net-tools state=latest&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Âç∏ËΩΩnet-toolsËΩØ‰ª∂">Âç∏ËΩΩnet-toolsËΩØ‰ª∂
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible backup -m yum -a &#34;name=net-tools state=absent&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂÆâË£ÖrsyncÊúçÂä°">ÂÆâË£ÖrsyncÊúçÂä°
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible backup -m yum -a &#34;name=rsync state=installed&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Ê£ÄÊü•rsync
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible backup -m shell -a &#34;rpm -qa rsync&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Âç∏ËΩΩrsyncÊúçÂä°">Âç∏ËΩΩrsyncÊúçÂä°
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible backup -m yum -a &#34;name=rsync state=removed&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="411-servicesystemdÊ®°Âùó">4.11 service/systemdÊ®°Âùó
</h2><p>ËØ•Ê®°Âùó‰ΩúÁî®ÊòØÈíàÂØπyumÂåÖÁÆ°ÁêÜ</p>
<p>serviceÈÄÇÁî®‰∫écentos6ÂâçÁöÑÁ≥ªÁªü</p>
<p>systemdÂëΩ‰ª§Â∫îÁî®‰∫écentos7Á≥ªÁªü</p>
<p><strong>Ë¶ÅÊ≥®ÊÑèÁöÑÊòØserviceÊ®°Âùó‰æùÊóßÂØπcentos7ÊúâÊïàÔºå‰ΩÜÊòØÂª∫ËÆÆÂ§ßÂÆ∂‰ΩøÁî®systemdÊ®°Âùó</strong></p>
<blockquote>
<ul>
<li>systemdÊ®°ÂùóÁî®‰∫éÊéßÂà∂ËøúÁ®ã‰∏ªÊú∫ÁöÑsystemdÊúçÂä°ÔºåËØ¥ÁôΩ‰∫ÜÔºåÂ∞±ÊòØLinux‰∏ãÁöÑsystemdÂëΩ‰ª§„ÄÇÈúÄË¶ÅËøúÁ®ã‰∏ªÊú∫ÊîØÊåÅsystemd</li>
<li>Áî®Ê≥ïÂíåserviceÊ®°ÂùóÂü∫Êú¨Áõ∏Âêå</li>
</ul>
</blockquote>
<h3 id="systemdÊ®°ÂùóÂèÇÊï∞">systemdÊ®°ÂùóÂèÇÊï∞
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="err">Â¶ÇÊûú‰ΩøÁî®</span><span class="n">systemctl</span> <span class="err">ÁÆ°ÁêÜÁ®ãÂ∫èÁöÑËØùÔºåÂèØ‰ª•‰ΩøÁî®</span><span class="n">systemdÊ®°Âùó</span><span class="err">Ôºå</span><span class="n">systemctl</span> <span class="err">ÂèØ‰ª•</span> <span class="err">ÊéßÂà∂Á®ãÂ∫èÂêØ</span><span class="o">/</span><span class="err">ÂÅúÔºå</span><span class="n">reload</span><span class="err">ÔºåÂºÄÊú∫ÂêØÂä®ÔºåËßÇÂØüÁ®ãÂ∫èÁä∂ÊÄÅÔºà</span><span class="n">status</span><span class="err">ÔºâÁ≠âÔºåÊéåÊè°‰ΩøÁî®ÂêéÁÆ°ÁêÜÂ∞±Êõ¥Êñπ‰æø‰∫Ü</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">‰∏ªË¶ÅÂèÇÊï∞</span>
</span></span><span class="line"><span class="cl"><span class="n">daemon_reload</span><span class="err">ÔºöÂú®ÊâßË°å‰ªª‰ΩïÂÖ∂‰ªñÊìç‰Ωú‰πãÂâçËøêË°åÂÆàÊä§ËøõÁ®ãÈáçÊñ∞Âä†ËΩΩÔºå‰ª•Á°Æ‰øù</span><span class="n">systemdÂ∑≤ÁªèËØªÂèñÂÖ∂‰ªñÊõ¥Êîπ</span>
</span></span><span class="line"><span class="cl"><span class="n">enabled</span><span class="err">ÔºöÊúçÂä°ÊòØÂê¶ÂºÄÊú∫Ëá™Âä®ÂêØÂä®</span><span class="n">yes</span><span class="o">|</span><span class="n">no</span><span class="err">„ÄÇ</span><span class="n">enabledÂíåstateËá≥Â∞ëË¶ÅÊúâ‰∏Ä‰∏™Ë¢´ÂÆö‰πâ</span>
</span></span><span class="line"><span class="cl"><span class="n">masked</span><span class="err">ÔºöÊòØÂê¶Â∞ÜÊúçÂä°ËÆæÁΩÆ‰∏∫</span><span class="n">maskedÁä∂ÊÄÅ</span><span class="err">ÔºåË¢´</span><span class="n">maskÁöÑÊúçÂä°ÊòØÊó†Ê≥ïÂêØÂä®ÁöÑ</span>
</span></span><span class="line"><span class="cl"><span class="n">name</span><span class="err">ÔºöÂøÖÈÄâÈ°πÔºåÊúçÂä°ÂêçÁß∞</span>
</span></span><span class="line"><span class="cl"><span class="n">no_block</span><span class="p">(</span><span class="mf">2.3</span><span class="err">ÂêéÊñ∞Â¢û</span><span class="p">)</span><span class="err">Ôºö‰∏çË¶ÅÂêåÊ≠•Á≠âÂæÖÊìç‰ΩúËØ∑Ê±ÇÂÆåÊàê</span>
</span></span><span class="line"><span class="cl"><span class="n">state</span><span class="err">ÔºöÂØπÂΩìÂâçÊúçÂä°ÊâßË°åÂêØÂä®ÔºåÂÅúÊ≠¢„ÄÅÈáçÂêØ„ÄÅÈáçÊñ∞Âä†ËΩΩÁ≠âÊìç‰ΩúÔºà</span><span class="n">started</span><span class="p">,</span><span class="n">stopped</span><span class="p">,</span><span class="n">restarted</span><span class="p">,</span><span class="n">reloaded</span><span class="err">Ôºâ</span>
</span></span><span class="line"><span class="cl"><span class="n">user</span><span class="err">Ôºö‰ΩøÁî®ÊúçÂä°ÁöÑË∞ÉÁî®ËÄÖËøêË°å</span><span class="n">systemctl</span><span class="err">ÔºåËÄå‰∏çÊòØÁ≥ªÁªüÁöÑÊúçÂä°ÁÆ°ÁêÜËÄÖ</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂÆâË£ÖÂêØÂä®nginxÊúçÂä°">ÂÆâË£Ö„ÄÅÂêØÂä®nginxÊúçÂä°
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">1.ÂÆâË£ÖnginxÊúçÂä°
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m yum -a &#34;name=nginx state=installed&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.ÂêØÂä®ÊúçÂä°
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m systemd -a &#34;name=nginx state=started&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3.Êü•ËØ¢Áä∂ÊÄÅÔºåËøôÈáåansibleÊú™Áõ¥Êé•Êèê‰æõstatusÂèÇÊï∞Ôºå‰Ω†ÂèØ‰ª•ÂÄüÂä©commandÊ®°ÂùóÂç≥ÂèØ
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;systemctl status nginx&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">4.ÂÅúÊ≠¢nginxÊúçÂä°
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m systemd -a &#34;name=nginx state=stopped&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">5.ËÆæÁΩÆnginxÂºÄÊú∫Ëá™ÂêØ
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m systemd -a &#34;name=nginx state=started enabled=yes&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">6.Ê£ÄÊü•nginxÁä∂ÊÄÅ
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;systemctl is-enabled nginx&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;systemctl status nginx&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">7.ÂÖ≥Èó≠ÂºÄÊú∫Ëá™ÂêØ„ÄÅ‰∏îÂÅúÊ≠¢ÊúçÂä°
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m systemd -a &#34;name=nginx state=stopped  enabled=no&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">8.ÂÜçÊ¨°Ê£ÄÊü•Áä∂ÊÄÅ
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web  -m shell -a &#34;systemctl is-enabled nginx;systemctl status nginx&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="412-mountÊåÇËΩΩÊ®°Âùó">4.12 mountÊåÇËΩΩÊ®°Âùó
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">ÂÆòÁΩë
</span></span></span><span class="line"><span class="cl"><span class="err">https://docs.ansible.com/ansible/latest/collections/ansible/posix/mount_module.html#mount-
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Âú®nfs-31Êú∫Âô®ÂáÜÂ§ánfs">Âú®nfs-31Êú∫Âô®ÂáÜÂ§ánfs
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@nfs-31 ~<span class="o">]</span><span class="c1">#yum install nfs-utils rpcbind -y</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@nfs-31 ~<span class="o">]</span><span class="c1">#mkdir /nfs-data</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@nfs-31 ~<span class="o">]</span><span class="c1">#vim /etc/exports</span>
</span></span><span class="line"><span class="cl">/nfs-data 172.16.1.0/24<span class="o">(</span>rw<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@nfs-31 ~<span class="o">]</span><span class="c1">#systemctl restart nfs</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@nfs-31 ~<span class="o">]</span><span class="c1">#showmount -e 127.0.0.1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Áªôweb-7Êú∫Âô®ÊåÇËΩΩnfsÁõÆÂΩïÂè™ÂÜôÂÖ•etcfstabËÄå‰∏çÁ´ãÂç≥ÊåÇËΩΩ">Áªôweb-7Êú∫Âô®ÊåÇËΩΩnfsÁõÆÂΩïÔºàÂè™ÂÜôÂÖ•/etc/fstabËÄå‰∏çÁ´ãÂç≥ÊåÇËΩΩÔºâ
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible  172.16.1.7  -m mount  -a &#34;src=&#39;172.16.1.31:/nfs-data&#39; path=&#39;/test-nfs&#39;    state=present  fstype=nfs &#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Êü•ÁúãÊåÇËΩΩÁä∂ÊÄÅ
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible 172.16.1.7 -m shell -a &#34;cat /etc/fstab&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible 172.16.1.7 -a &#34;df -h&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Áªôweb-7Êú∫Âô®ÊåÇËΩΩnfsÁõÆÂΩïÁ´ãÂç≥ÊåÇËΩΩ‰∏îÂÜôÂÖ•etcfstab">Áªôweb-7Êú∫Âô®ÊåÇËΩΩnfsÁõÆÂΩïÔºàÁ´ãÂç≥ÊåÇËΩΩ‰∏îÂÜôÂÖ•/etc/fstabÔºâ
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible  172.16.1.7  -m mount  -a &#34;src=&#39;172.16.1.31:/nfs-data&#39; path=&#39;/test-nfs&#39;    state=mounted  fstype=nfs &#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Ê£ÄÊü•
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible 172.16.1.7 -a &#34;df -h&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible 172.16.1.7 -a &#34;cat /etc/fstab&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂèñÊ∂àÊåÇËΩΩ‰ª•ÂèäÂà†Èô§fstabËÆ∞ÂΩï">ÂèñÊ∂àÊåÇËΩΩÔºå‰ª•ÂèäÂà†Èô§fstabËÆ∞ÂΩï
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible  172.16.1.7  -m mount  -a &#34;src=&#39;172.16.1.31:/nfs-data&#39; path=&#39;/test-nfs&#39;    state=absent  fstype=nfs &#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">È™åËØÅ
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible 172.16.1.7 -a &#34;df -h&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible 172.16.1.7 -a &#34;cat /etc/fstab&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂèñÊ∂àÊåÇËΩΩ‰∏çÂà†Èô§fstabËÆ∞ÂΩï">ÂèñÊ∂àÊåÇËΩΩÔºå‰∏çÂà†Èô§fstabËÆ∞ÂΩï
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible  172.16.1.7  -m mount  -a &#34;src=&#39;172.16.1.31:/nfs-data&#39; path=&#39;/test-nfs&#39;    state=unmounted  fstype=nfs &#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="stateÊÄªÁªìÂèÇÊï∞">stateÊÄªÁªìÂèÇÊï∞
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mounted ÊåÇËΩΩËÆæÂ§á‰∏îÂÜôÂÖ•fstab
</span></span><span class="line"><span class="cl">present ‰ªÖÂÜôÂÖ•fstab ‰∏çÊåÇËΩΩ
</span></span><span class="line"><span class="cl">absent  Âç∏ËΩΩ‰∏îÂà†Èô§fstabËÆ∞ÂΩï
</span></span><span class="line"><span class="cl">umounted Âè™Âç∏ËΩΩ‰∏çÂà†Èô§fstabËÆ∞ÂΩï
</span></span><span class="line"><span class="cl">remounted ÈáçÊñ∞ÊåÇËΩΩËøô‰∏™ËÆæÂ§á
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="413-archiveÂéãÁº©Ê®°Âùó">4.13 archiveÂéãÁº©Ê®°Âùó
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">ÂÆòÁΩëÊñáÊ°£
</span></span></span><span class="line"><span class="cl"><span class="err">https://docs.ansible.com/ansible/latest/collections/community/general/archive_module.html
</span></span></span><span class="line"><span class="cl"><span class="err">Áî®Ê≥ïÊñáÊ°£
</span></span></span><span class="line"><span class="cl"><span class="err">https://docs.ansible.com/ansible/latest/collections/community/general/archive_module.html#examples
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÊîØÊåÅÂéãÁº©Á±ªÂûã">ÊîØÊåÅÂéãÁº©Á±ªÂûã
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">bz2
</span></span><span class="line"><span class="cl">gz ‚Üê (default)
</span></span><span class="line"><span class="cl">tar
</span></span><span class="line"><span class="cl">xz
</span></span><span class="line"><span class="cl">zip 
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂéãÁº©etcÈÖçÁΩÆÊñá‰ª∂Âà∞ÊåáÂÆöË∑ØÂæÑ">ÂéãÁº©/etcÈÖçÁΩÆÊñá‰ª∂Âà∞ÊåáÂÆöË∑ØÂæÑ
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m archive -a &#34;path=/etc dest=/opt/etc.tgz&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;ls /opt -l&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;file /opt/etc.tgz&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂéãÁº©varlog‰∏∫zipÁ±ªÂûãÂà∞ÊåáÂÆöË∑ØÂæÑ">ÂéãÁº©/var/log‰∏∫zipÁ±ªÂûãÂà∞ÊåáÂÆöË∑ØÂæÑ
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m archive -a &#34;path=/var/log dest=/opt/log.zip format=zip&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;file /opt/log.zip&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="414-unarchiveËß£ÂéãÁº©Ê®°Âùó">4.14 unarchiveËß£ÂéãÁº©Ê®°Âùó
</h2><p>Ê≥®ÊÑè‰∫ÜÔºå‰Ω†Áé∞Âú®ÊòØËøúÁ®ãËß£ÂéãÁº©ÔºåËÄå‰∏çÊòØÂú®Êú¨Êú∫Áõ¥Êé•Ëß£ÂéãÁº©</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">https://docs.ansible.com/ansible/latest/collections/ansible/builtin/unarchive_module.html#examples
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Ëß£ÂéãÁº©etctgzÂà∞ÊåáÂÆöÁõÆÂΩïËøúÁ®ãËß£Âéã">Ëß£ÂéãÁº©etc.tgzÂà∞ÊåáÂÆöÁõÆÂΩïÔºàËøúÁ®ãËß£ÂéãÔºâ
</h3><p>remote_srcËøúÁ®ãÊï∞ÊçÆÊ∫ê</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ÊåáÂÆöÁõÆÂΩïÂøÖÈ°ªÂ≠òÂú®
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m file -a &#34;path=/opt/etc_file state=directory&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Ëß£ÂéãÁº©
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -m unarchive -a &#34;src=/opt/etc.tgz dest=/opt/etc_file/ remote_src=yes&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Êü•Áúã
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#ansible web -a &#34;ls /opt/etc_file/etc/&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Â∞ÜÁÆ°ÁêÜÊú∫ÁöÑÂéãÁº©ÂåÖËß£ÂéãÂà∞ËøúÁ®ãÊú∫Âô®‰∏ä">Â∞ÜÁÆ°ÁêÜÊú∫ÁöÑÂéãÁº©ÂåÖÔºåËß£ÂéãÂà∞ËøúÁ®ãÊú∫Âô®‰∏ä
</h3><p>Â∞Ümaster-61ÁöÑÂéãÁº©Êñá‰ª∂ÔºåËß£ÂéãÂà∞web-7Êú∫Âô®‰∏ä</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">1.ÁîüÊàêetc.tgzÊï∞ÊçÆ
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 ~<span class="o">]</span><span class="c1">#cd / &amp;&amp; tar -zcf /opt/etc.tgz etc</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2.ËøúÁ®ãËß£ÂéãÂà∞web-7Êú∫Âô®‰∏ä
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 /<span class="o">]</span><span class="c1">#ansible web -m unarchive -a &#34;src=/opt/etc.tgz  dest=/tmp/&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">3.Ê£ÄÊü•
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@master-61 /<span class="o">]</span><span class="c1">#ansible web -a &#34;ls /tmp/etc/&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 Â∞èËØó
    </section>
    
    <section class="powerby">
        ‰ΩøÁî® <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> ÊûÑÂª∫ <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/xiaoshi/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
