<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="01-DockerÊ¶ÇËø∞ DockerÁÆÄ‰ªã DockerÊòØÂü∫‰∫éGoËØ≠Ë®ÄÂÆûÁé∞ÁöÑ‰∫ëÂºÄÊ∫êÈ°πÁõÆ„ÄÇ DockerÁöÑ‰∏ªË¶ÅÁõÆÊ†áÊòØÔºöBuild, Ship and Run Any App, Anywh">
<title>DockerÁõ∏ÂÖ≥Á¨îËÆ∞</title>

<link rel='canonical' href='https://ZackMoel.github.io/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/'>

<link rel="stylesheet" href="/xiaoshi/scss/style.min.0304c6baf04e01a8fe70693791cb744d56a3578a3120a8796cefc66825aa39c7.css"><meta property='og:title' content="DockerÁõ∏ÂÖ≥Á¨îËÆ∞">
<meta property='og:description' content="01-DockerÊ¶ÇËø∞ DockerÁÆÄ‰ªã DockerÊòØÂü∫‰∫éGoËØ≠Ë®ÄÂÆûÁé∞ÁöÑ‰∫ëÂºÄÊ∫êÈ°πÁõÆ„ÄÇ DockerÁöÑ‰∏ªË¶ÅÁõÆÊ†áÊòØÔºöBuild, Ship and Run Any App, Anywh">
<meta property='og:url' content='https://ZackMoel.github.io/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/'>
<meta property='og:site_name' content='Â∞èËØó'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-04-15T20:26:37&#43;08:00'/><meta property='article:modified_time' content='2025-04-15T20:26:37&#43;08:00'/>
<meta name="twitter:title" content="DockerÁõ∏ÂÖ≥Á¨îËÆ∞">
<meta name="twitter:description" content="01-DockerÊ¶ÇËø∞ DockerÁÆÄ‰ªã DockerÊòØÂü∫‰∫éGoËØ≠Ë®ÄÂÆûÁé∞ÁöÑ‰∫ëÂºÄÊ∫êÈ°πÁõÆ„ÄÇ DockerÁöÑ‰∏ªË¶ÅÁõÆÊ†áÊòØÔºöBuild, Ship and Run Any App, Anywh">
  


    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/xiaoshi/">
                
                    
                    
                    
                        
                        <img src="/xiaoshi/img/avatar_hu8920112365793990935.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/xiaoshi">Â∞èËØó</a></h1>
            <h2 class="site-description">‰∏ñÁïåÂíåÂπ≥</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/1055981889?spm_id_from=333.1007.0.0'
                        target="_blank"
                        title="bilibili"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-bilibili"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" /><path d="M8 3l2 3" /><path d="M16 3l-2 3" /><path d="M9 13v-2" /><path d="M15 11v2" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/ZackMoel/xiaoshi.github.io'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/xiaoshi/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/xiaoshi/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>ÂèãÊÉÖÈìæÊé•</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#dockerÁÆÄ‰ªã">DockerÁÆÄ‰ªã</a></li>
    <li><a href="#‰º†ÁªüËôöÊãüÊú∫ÂíåÂÆπÂô®">‰º†ÁªüËôöÊãüÊú∫ÂíåÂÆπÂô®</a></li>
    <li><a href="#dockerËøêË°åÈÄüÂ∫¶Âø´ÁöÑÂéüÂõ†">DockerËøêË°åÈÄüÂ∫¶Âø´ÁöÑÂéüÂõ†</a></li>
    <li><a href="#dockerËΩØ‰ª∂">DockerËΩØ‰ª∂</a>
      <ol>
        <li><a href="#dockerÈïúÂÉè">DockerÈïúÂÉè</a></li>
        <li><a href="#dockerÂÆπÂô®">DockerÂÆπÂô®</a></li>
        <li><a href="#docker‰ªìÂ∫ì">Docker‰ªìÂ∫ì</a></li>
      </ol>
    </li>
    <li><a href="#dockerÊû∂ÊûÑ">DockerÊû∂ÊûÑ</a></li>
  </ol>

  <ol>
    <li><a href="#centosÂÆâË£Ödocker">CentOSÂÆâË£ÖDocker</a>
      <ol>
        <li><a href="#Âç∏ËΩΩÊóßÁâàÊú¨">Âç∏ËΩΩÊóßÁâàÊú¨</a></li>
        <li><a href="#ÈÖçÁΩÆyumËµÑÊ∫êÂ∫ì">ÈÖçÁΩÆyumËµÑÊ∫êÂ∫ì</a></li>
        <li><a href="#ÂÆâË£ÖdockerÂºïÊìé">ÂÆâË£ÖDockerÂºïÊìé</a></li>
        <li><a href="#ÂêØÂä®dockerÂºïÊìé">ÂêØÂä®dockerÂºïÊìé</a></li>
      </ol>
    </li>
    <li><a href="#Âç∏ËΩΩdocker">Âç∏ËΩΩDocker</a></li>
    <li><a href="#ËøêË°åhelloworldÊµãËØï">ËøêË°åHelloWorldÊµãËØï</a></li>
    <li><a href="#ubuntuÂÆâË£Ödocker">UbuntuÂÆâË£ÖDocker</a>
      <ol>
        <li><a href="#Âç∏ËΩΩÊóßÁâàÊú¨-1">Âç∏ËΩΩÊóßÁâàÊú¨</a></li>
        <li><a href="#ÂÆâË£Ö‰æùËµñ">ÂÆâË£Ö‰æùËµñ</a></li>
        <li><a href="#Ê∑ªÂä†dockerËΩØ‰ª∂Ê∫ê">Ê∑ªÂä†dockerËΩØ‰ª∂Ê∫ê</a></li>
        <li><a href="#ÂÆâË£Ödocker">ÂÆâË£Ödocker</a></li>
        <li><a href="#ÂêØÂä®Âπ∂ÊµãËØïdocker">ÂêØÂä®Âπ∂ÊµãËØïDocker</a></li>
      </ol>
    </li>
  </ol>

  <ol>
    <li><a href="#docker‰∏ãËΩΩÂä†ÈÄü">docker‰∏ãËΩΩÂä†ÈÄü</a></li>
    <li><a href="#dockerÈÖçÁΩÆ‰ª£ÁêÜ">DockerÈÖçÁΩÆ‰ª£ÁêÜ</a></li>
  </ol>

  <ol>
    <li><a href="#ÂêØÂä®Á±ªÂëΩ‰ª§">ÂêØÂä®Á±ªÂëΩ‰ª§</a></li>
    <li><a href="#Â∏ÆÂä©Á±ªÂëΩ‰ª§">Â∏ÆÂä©Á±ªÂëΩ‰ª§</a></li>
    <li><a href="#ÈïúÂÉèÂëΩ‰ª§">ÈïúÂÉèÂëΩ‰ª§</a>
      <ol>
        <li><a href="#ÂàóÂá∫Êú¨Âú∞‰∏ªÊú∫‰∏äÁöÑÈïúÂÉè">ÂàóÂá∫Êú¨Âú∞‰∏ªÊú∫‰∏äÁöÑÈïúÂÉè</a></li>
        <li><a href="#Âú®ËøúÁ®ã‰ªìÂ∫ì‰∏≠ÊêúÁ¥¢ÈïúÂÉè">Âú®ËøúÁ®ã‰ªìÂ∫ì‰∏≠ÊêúÁ¥¢ÈïúÂÉè</a></li>
        <li><a href="#‰∏ãËΩΩÈïúÂÉè">‰∏ãËΩΩÈïúÂÉè</a></li>
        <li><a href="#Êü•ÁúãÂç†ÊçÆÁöÑÁ©∫Èó¥">Êü•ÁúãÂç†ÊçÆÁöÑÁ©∫Èó¥</a></li>
        <li><a href="#Âà†Èô§ÈïúÂÉè">Âà†Èô§ÈïúÂÉè</a></li>
      </ol>
    </li>
    <li><a href="#ÂëΩ‰ª§Ëá™Âä®Ë°•ÂÖ®">ÂëΩ‰ª§Ëá™Âä®Ë°•ÂÖ®</a></li>
  </ol>

  <ol>
    <li><a href="#Êñ∞Âª∫ÂêØÂä®ÂÆπÂô®">Êñ∞Âª∫ÂêØÂä®ÂÆπÂô®</a>
      <ol>
        <li><a href="#ÂêØÂä®‰∫§‰∫íÂºèÂÆπÂô®">ÂêØÂä®‰∫§‰∫íÂºèÂÆπÂô®</a></li>
        <li><a href="#ÂêØÂä®ÂÆàÊä§ÂºèÂÆπÂô®">ÂêØÂä®ÂÆàÊä§ÂºèÂÆπÂô®</a></li>
      </ol>
    </li>
    <li><a href="#ÂàóÂá∫Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®">ÂàóÂá∫Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®</a></li>
    <li><a href="#ÂÆπÂô®ÂÖ∂‰ªñÂêØÂÅúÊìç‰Ωú">ÂÆπÂô®ÂÖ∂‰ªñÂêØÂÅúÊìç‰Ωú</a>
      <ol>
        <li><a href="#ÂêØÂä®Â∑≤ÁªèÂÅúÊ≠¢ÁöÑÂÆπÂô®">ÂêØÂä®Â∑≤ÁªèÂÅúÊ≠¢ÁöÑÂÆπÂô®</a></li>
        <li><a href="#ÈáçÂêØÂÆπÂô®">ÈáçÂêØÂÆπÂô®</a></li>
        <li><a href="#ÂÅúÊ≠¢ÂÆπÂô®">ÂÅúÊ≠¢ÂÆπÂô®</a></li>
        <li><a href="#Âº∫Âà∂ÂÅúÊ≠¢ÂÆπÂô®">Âº∫Âà∂ÂÅúÊ≠¢ÂÆπÂô®</a></li>
      </ol>
    </li>
    <li><a href="#Âà†Èô§ÂÆπÂô®">Âà†Èô§ÂÆπÂô®</a></li>
    <li><a href="#Êü•ÁúãÂÆπÂô®Êó•Âøó">Êü•ÁúãÂÆπÂô®Êó•Âøó</a></li>
    <li><a href="#Êü•ÁúãÂÆπÂô®ÂÜÖËøêË°åÁöÑËøõÁ®ã">Êü•ÁúãÂÆπÂô®ÂÜÖËøêË°åÁöÑËøõÁ®ã</a></li>
    <li><a href="#Êü•ÁúãÂÆπÂô®ÂÜÖÈÉ®ÁªÜËäÇ">Êü•ÁúãÂÆπÂô®ÂÜÖÈÉ®ÁªÜËäÇ</a></li>
    <li><a href="#ËøõÂÖ•Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®">ËøõÂÖ•Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®</a></li>
    <li><a href="#ÂÆπÂô®ÂíåÂÆø‰∏ªÊú∫Êñá‰ª∂Êã∑Ë¥ù">ÂÆπÂô®ÂíåÂÆø‰∏ªÊú∫Êñá‰ª∂Êã∑Ë¥ù</a></li>
    <li><a href="#ÂØºÂÖ•ÂíåÂØºÂá∫ÂÆπÂô®">ÂØºÂÖ•ÂíåÂØºÂá∫ÂÆπÂô®</a></li>
    <li><a href="#Â∞ÜÂÆπÂô®ÁîüÊàêÊñ∞ÈïúÂÉè">Â∞ÜÂÆπÂô®ÁîüÊàêÊñ∞ÈïúÂÉè</a></li>
    <li><a href="#ÂÆπÂô®Êï∞ÊçÆÂç∑">ÂÆπÂô®Êï∞ÊçÆÂç∑</a></li>
    <li><a href="#ÊâÄÊúâÂëΩ‰ª§Á§∫ÊÑèÂõæ">ÊâÄÊúâÂëΩ‰ª§Á§∫ÊÑèÂõæ</a></li>
  </ol>

  <ol>
    <li><a href="#ÈïúÂÉè">ÈïúÂÉè</a></li>
    <li><a href="#docker-ÈïúÂÉèÂä†ËΩΩÂéüÁêÜ">Docker ÈïúÂÉèÂä†ËΩΩÂéüÁêÜ</a>
      <ol>
        <li><a href="#ËÅîÂêàÊñá‰ª∂Á≥ªÁªü">ËÅîÂêàÊñá‰ª∂Á≥ªÁªü</a></li>
        <li><a href="#bootfsÂíårootfs">bootfsÂíårootfs</a></li>
        <li><a href="#ÈïúÂÉèÂàÜÂ±Ç">ÈïúÂÉèÂàÜÂ±Ç</a></li>
      </ol>
    </li>
    <li><a href="#ÈïúÂÉèÂàÜÂ±ÇÁöÑ‰ºòÂäø">ÈïúÂÉèÂàÜÂ±ÇÁöÑ‰ºòÂäø</a></li>
    <li><a href="#ÂÆπÂô®Â±Ç">ÂÆπÂô®Â±Ç</a></li>
  </ol>

  <ol>
    <li><a href="#‰ΩøÁî®nexusÂàõÂª∫dockerÁßÅÊúâ‰ªìÂ∫ì">‰ΩøÁî®nexusÂàõÂª∫dockerÁßÅÊúâ‰ªìÂ∫ì</a></li>
    <li><a href="#dockerÂÆ¢Êà∑Á´ØÁöÑÈïúÂÉèÂØºÂá∫ÂíåÂØºÂÖ•">dockerÂÆ¢Êà∑Á´ØÁöÑÈïúÂÉèÂØºÂá∫ÂíåÂØºÂÖ•</a></li>
    <li><a href="#docker-ÂÆ¢Êà∑Á´ØÂêëÁßÅ‰ªì‰∏ä‰º†ÈïúÂÉè">docker ÂÆ¢Êà∑Á´ØÂêëÁßÅ‰ªì‰∏ä‰º†ÈïúÂÉè</a>
      <ol>
        <li><a href="#ÈÖçÁΩÆdockerÂÖÅËÆ∏Êé•Êî∂httpËØ∑Ê±Ç">ÈÖçÁΩÆdockerÂÖÅËÆ∏Êé•Êî∂<code>http</code>ËØ∑Ê±Ç</a></li>
        <li><a href="#ÂêëÁßÅ‰ªìÊé®ÈÄÅÈïúÂÉè">ÂêëÁßÅ‰ªìÊé®ÈÄÅÈïúÂÉè</a></li>
      </ol>
    </li>
  </ol>

  <ol>
    <li><a href="#docker-registry">Docker Registry</a></li>
    <li><a href="#ÁéØÂ¢ÉÊê≠Âª∫">ÁéØÂ¢ÉÊê≠Âª∫</a></li>
    <li><a href="#ÂêëregistryÁßÅ‰ªì‰∏≠‰∏ä‰º†ÈïúÂÉè">ÂêëRegistryÁßÅ‰ªì‰∏≠‰∏ä‰º†ÈïúÂÉè</a>
      <ol>
        <li><a href="#ÈÖçÁΩÆdockerÂÖÅËÆ∏Êé•Êî∂httpËØ∑Ê±Ç-1">ÈÖçÁΩÆdockerÂÖÅËÆ∏Êé•Êî∂<code>http</code>ËØ∑Ê±Ç</a></li>
        <li><a href="#Êé®ÈÄÅÂà∞ÁßÅ‰ªì">Êé®ÈÄÅÂà∞ÁßÅ‰ªì</a></li>
      </ol>
    </li>
  </ol>

  <ol>
    <li><a href="#docker-ÂÆâË£Ö-mysql">Docker ÂÆâË£Ö Mysql</a></li>
    <li><a href="#mysql-ÂçïÊú∫">Mysql ÂçïÊú∫</a>
      <ol>
        <li><a href="#ÁÆÄÂçïÁâà-mysql-57-ÂÆâË£Ö">ÁÆÄÂçïÁâà Mysql 5.7 ÂÆâË£Ö</a></li>
        <li><a href="#ÂÆûÈôÖÂ∫îÁî®Áâà-mysql-57ÂÆâË£Ö">ÂÆûÈôÖÂ∫îÁî®Áâà Mysql 5.7ÂÆâË£Ö</a></li>
      </ol>
    </li>
    <li><a href="#mysql-‰∏ª‰ªéÂ§çÂà∂ÂÆâË£Ö">Mysql ‰∏ª‰ªéÂ§çÂà∂ÂÆâË£Ö</a></li>
  </ol>

  <ol>
    <li><a href="#dockerÂÆâË£Öredis">DockerÂÆâË£ÖRedis</a></li>
    <li><a href="#ÂçïÊú∫ÁâàÂÆâË£Ö">ÂçïÊú∫ÁâàÂÆâË£Ö</a>
      <ol>
        <li><a href="#ÁÆÄÂçïÁâà-redis">ÁÆÄÂçïÁâà Redis</a></li>
        <li><a href="#ÂÆûÈôÖÂ∫îÁî®Áâàredis">ÂÆûÈôÖÂ∫îÁî®ÁâàRedis</a></li>
      </ol>
    </li>
    <li><a href="#ÈõÜÁæ§Â≠òÂÇ®ÁÆóÊ≥ï">ÈõÜÁæ§Â≠òÂÇ®ÁÆóÊ≥ï</a>
      <ol>
        <li><a href="#ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®ÁÆóÊ≥ï">ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®ÁÆóÊ≥ï</a></li>
        <li><a href="#ÂìàÂ∏åÂèñ‰ΩôÁÆóÊ≥ï">ÂìàÂ∏åÂèñ‰ΩôÁÆóÊ≥ï</a></li>
        <li><a href="#‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ï">‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ï</a></li>
        <li><a href="#ÂìàÂ∏åÊßΩÂàÜÂå∫">ÂìàÂ∏åÊßΩÂàÜÂå∫</a></li>
        <li><a href="#redisÈõÜÁæ§Â≠òÂÇ®Á≠ñÁï•">RedisÈõÜÁæ§Â≠òÂÇ®Á≠ñÁï•</a></li>
      </ol>
    </li>
    <li><a href="#3‰∏ª3‰ªéredisÈõÜÁæ§">3‰∏ª3‰ªéRedisÈõÜÁæ§</a>
      <ol>
        <li><a href="#Êê≠Âª∫">Êê≠Âª∫</a></li>
        <li><a href="#redisÈõÜÁæ§ËØªÂÜôÂá∫Èîô">RedisÈõÜÁæ§ËØªÂÜôÂá∫Èîô</a></li>
        <li><a href="#ÈõÜÁæ§‰ø°ÊÅØÊ£ÄÊü•">ÈõÜÁæ§‰ø°ÊÅØÊ£ÄÊü•</a></li>
      </ol>
    </li>
    <li><a href="#‰∏ª‰ªéÊâ©ÂÆπÁº©ÂÆπ">‰∏ª‰ªéÊâ©ÂÆπÁº©ÂÆπ</a>
      <ol>
        <li><a href="#‰∏ª‰ªéÊâ©ÂÆπ">‰∏ª‰ªéÊâ©ÂÆπ</a></li>
        <li><a href="#‰∏ª‰ªéÁº©ÂÆπ">‰∏ª‰ªéÁº©ÂÆπ</a></li>
      </ol>
    </li>
  </ol>

  <ol>
    <li><a href="#dockerfile">Dockerfile</a></li>
    <li><a href="#ÊûÑÂª∫ËøáÁ®ã">ÊûÑÂª∫ËøáÁ®ã</a></li>
    <li><a href="#dockerfile‰øùÁïôÂ≠ó">Dockerfile‰øùÁïôÂ≠ó</a>
      <ol>
        <li><a href="#from">FROM</a></li>
        <li><a href="#maintainer">MAINTAINER</a></li>
        <li><a href="#run">RUN</a></li>
        <li><a href="#expose">EXPOSE</a></li>
        <li><a href="#workdir">WORKDIR</a></li>
        <li><a href="#user">USER</a></li>
        <li><a href="#env">ENV</a></li>
        <li><a href="#volume">VOLUME</a></li>
        <li><a href="#add">ADD</a></li>
        <li><a href="#copy">COPY</a></li>
        <li><a href="#cmd">CMD</a></li>
        <li><a href="#entrypoint">ENTRYPOINT</a></li>
      </ol>
    </li>
    <li><a href="#ÊûÑÂª∫ÈïúÂÉè">ÊûÑÂª∫ÈïúÂÉè</a></li>
    <li><a href="#ËôöÊÇ¨ÈïúÂÉè">ËôöÊÇ¨ÈïúÂÉè</a></li>
  </ol>

  <ol>
    <li><a href="#Êê≠Âª∫springbootÈ°πÁõÆ">Êê≠Âª∫SpringBootÈ°πÁõÆ</a></li>
    <li><a href="#ÂèëÂ∏ÉÂæÆÊúçÂä°È°πÁõÆÂà∞dockerÂÆπÂô®">ÂèëÂ∏ÉÂæÆÊúçÂä°È°πÁõÆÂà∞DockerÂÆπÂô®</a></li>
  </ol>

  <ol>
    <li><a href="#docker-ÁΩëÁªú">Docker ÁΩëÁªú</a></li>
    <li><a href="#dockerÁΩëÁªúÂëΩ‰ª§">dockerÁΩëÁªúÂëΩ‰ª§</a></li>
    <li><a href="#docker-ÁΩëÁªúÊ®°Âºè">Docker ÁΩëÁªúÊ®°Âºè</a></li>
    <li><a href="#docker0">docker0</a></li>
    <li><a href="#bridgeÊ®°Âºè">bridgeÊ®°Âºè</a></li>
    <li><a href="#hostÊ®°Âºè">hostÊ®°Âºè</a></li>
    <li><a href="#noneÊ®°Âºè">noneÊ®°Âºè</a></li>
    <li><a href="#containerÊ®°Âºè">containerÊ®°Âºè</a></li>
    <li><a href="#Ëá™ÂÆö‰πâÁΩëÁªú">Ëá™ÂÆö‰πâÁΩëÁªú</a></li>
    <li><a href="#linkËøûÊé•">linkËøûÊé•</a></li>
  </ol>

  <ol>
    <li><a href="#docker-compose">Docker-compose</a></li>
    <li><a href="#ÂÆâË£Ödocker-compose">ÂÆâË£ÖDocker-Compose</a></li>
    <li><a href="#Â∏∏Áî®ÂëΩ‰ª§">Â∏∏Áî®ÂëΩ‰ª§</a></li>
    <li><a href="#composeÁºñÊéíÂÆû‰æã">composeÁºñÊéíÂÆû‰æã</a></li>
  </ol>

  <ol>
    <li><a href="#portainerdockerËΩªÈáèÁ∫ßÂèØËßÜÂåñÂ∑•ÂÖ∑">PortainerÔºöDockerËΩªÈáèÁ∫ßÂèØËßÜÂåñÂ∑•ÂÖ∑</a></li>
    <li><a href="#ÂÆâË£Ö">ÂÆâË£Ö</a></li>
  </ol>

  <ol>
    <li><a href="#cig">CIG</a>
      <ol>
        <li><a href="#cadvisor">CAdvisor</a></li>
        <li><a href="#influxdb">InfluxDB</a></li>
        <li><a href="#granfana">Granfana</a></li>
      </ol>
    </li>
    <li><a href="#ÂÆâË£ÖÈÉ®ÁΩ≤">ÂÆâË£ÖÈÉ®ÁΩ≤</a></li>
    <li><a href="#grafanaÈÖçÁΩÆ">GrafanaÈÖçÁΩÆ</a>
      <ol>
        <li><a href="#Ê∑ªÂä†Êï∞ÊçÆÊ∫ê">Ê∑ªÂä†Êï∞ÊçÆÊ∫ê</a></li>
        <li><a href="#Ê∑ªÂä†Â∑•‰ΩúÂè∞">Ê∑ªÂä†Â∑•‰ΩúÂè∞</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/">DockerÁõ∏ÂÖ≥Á¨îËÆ∞</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-04-15</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="01-dockerÊ¶ÇËø∞"><strong>01-DockerÊ¶ÇËø∞</strong>
</h1><h2 id="dockerÁÆÄ‰ªã">DockerÁÆÄ‰ªã
</h2><p>DockerÊòØÂü∫‰∫éGoËØ≠Ë®ÄÂÆûÁé∞ÁöÑ‰∫ëÂºÄÊ∫êÈ°πÁõÆ„ÄÇ</p>
<p>DockerÁöÑ‰∏ªË¶ÅÁõÆÊ†áÊòØÔºö<code>Build, Ship and Run Any App, Anywhere</code>Ôºå‰πüÂ∞±ÊòØÈÄöËøáÂØπÂ∫îÁî®ÁªÑ‰ª∂ÁöÑÂ∞ÅË£Ö„ÄÅÂàÜÂèë„ÄÅÈÉ®ÁΩ≤„ÄÅËøêË°åÁ≠âÁîüÂëΩÂë®ÊúüÁöÑÁÆ°ÁêÜÔºå‰ΩøÁî®Êà∑ÁöÑAPPÂèäÂÖ∂ËøêË°åÁéØÂ¢ÉËÉΩÂÅöÂà∞<strong>‰∏ÄÊ¨°ÈïúÂÉè,Â§ÑÂ§ÑËøêË°å</strong>„ÄÇ</p>
<h2 id="‰º†ÁªüËôöÊãüÊú∫ÂíåÂÆπÂô®">‰º†ÁªüËôöÊãüÊú∫ÂíåÂÆπÂô®
</h2><p>‰º†ÁªüËôöÊãüÊú∫Ôºàvirtual machineÔºâÔºö</p>
<p>‰º†ÁªüËôöÊãüÊú∫ÊäÄÊúØÂü∫‰∫éÂÆâË£ÖÂú®‰∏ªÊìç‰ΩúÁ≥ªÁªü‰∏äÁöÑËôöÊãüÊú∫ÁÆ°ÁêÜÁ≥ªÁªüÔºàÂ¶ÇVirtualBox„ÄÅVMwareÁ≠âÔºâÔºåÂàõÂª∫ËôöÊãüÊú∫ÔºàËôöÊãüÂá∫ÂêÑÁßçÁ°¨‰ª∂ÔºâÔºåÂú®ËôöÊãüÊú∫‰∏äÂÆâË£Ö‰ªéÊìç‰ΩúÁ≥ªÁªüÔºåÂú®‰ªéÊìç‰ΩúÁ≥ªÁªü‰∏≠ÂÆâË£ÖÈÉ®ÁΩ≤ÂêÑÁßçÂ∫îÁî®„ÄÇ</p>
<p>Áº∫ÁÇπÔºöËµÑÊ∫êÂç†Áî®Â§ö„ÄÅÂÜó‰ΩôÊ≠•È™§Â§ö„ÄÅÂêØÂä®ÊÖ¢</p>
<p>LinuxÂÆπÂô®ÔºàLinux ContainerÔºåÁÆÄÁß∞LXCÔºâÔºö</p>
<p>LinuxÂÆπÂô®ÊòØ‰∏éÁ≥ªÁªüÂÖ∂‰ªñÈÉ®ÂàÜÂàÜÈöîÂºÄÁöÑ‰∏ÄÁ≥ªÂàóËøõÁ®ãÔºå‰ªéÂè¶‰∏Ä‰∏™ÈïúÂÉèËøêË°åÔºåÂπ∂Áî±ËØ•ÈïúÂÉèÊèê‰æõÊîØÊåÅËøõÁ®ãÊâÄÈúÄÁöÑÂÖ®ÈÉ®Êñá‰ª∂„ÄÇÂÆπÂô®Êèê‰æõÁöÑÈïúÂÉèÂåÖÂê´‰∫ÜÂ∫îÁî®ÁöÑÊâÄÊúâ‰æùËµñÈ°πÔºåÂõ†ËÄåÂú®‰ªéÂºÄÂèëÂà∞ÊµãËØïÂÜçÂà∞Áîü‰∫ßÁöÑÊï¥‰∏™ËøáÁ®ã‰∏≠ÔºåÂÆÉÈÉΩÂÖ∑ÊúâÂèØÁßªÊ§çÊÄßÂíå‰∏ÄËá¥ÊÄß„ÄÇ</p>
<p>LinuxÂÆπÂô®‰∏çÊòØÊ®°Êãü‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÊìç‰ΩúÁ≥ªÁªüÔºåËÄåÊòØÂØπËøõÁ®ãËøõË°åÈöîÁ¶ª„ÄÇÊúâ‰∫ÜÂÆπÂô®ÔºåÂ∞±ÂèØ‰ª•Â∞ÜËΩØ‰ª∂ËøêË°åÊâÄÈúÄÁöÑÊâÄÊúâËµÑÊ∫êÊâìÂåÖÂà∞‰∏Ä‰∏™ÈöîÁ¶ªÁöÑÂÆπÂô®‰∏≠„ÄÇÂÆπÂô®‰∏éËôöÊãüÊú∫‰∏çÂêåÔºå‰∏çÈúÄË¶ÅÊçÜÁªë‰∏ÄÊï¥Â•óÊìç‰ΩúÁ≥ªÁªüÔºåÂè™ÈúÄË¶ÅËΩØ‰ª∂Â∑•‰ΩúÊâÄÈúÄÁöÑÂ∫ìËµÑÊ∫êÂíåËÆæÁΩÆ„ÄÇÁ≥ªÁªüÂõ†Ê≠§ËÄåÂèòÂæóÈ´òÊïàËΩªÈáèÂπ∂‰øùËØÅÈÉ®ÁΩ≤Âú®‰ªª‰ΩïÁéØÂ¢É‰∏≠ÁöÑËΩØ‰ª∂ÈÉΩËÉΩÂßãÁªàÂ¶Ç‰∏ÄÁöÑËøêË°å„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/virtual-machine-vs-docker-container.jpg"
	width="937"
	height="499"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/virtual-machine-vs-docker-container_hu2953685954180483545.jpg 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/virtual-machine-vs-docker-container_hu16085751589340386713.jpg 1024w"
	loading="lazy"
	
		alt="virtual-machine-vs-docker-container"
	
	
		class="gallery-image" 
		data-flex-grow="187"
		data-flex-basis="450px"
	
></p>
<p>ÂØπÊØîÔºö</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ÁâπÊÄß</th>
<th>ÂÆπÂô®</th>
<th>ËôöÊãüÊú∫</th>
</tr>
</thead>
<tbody>
<tr>
<td>ÂêØÂä®</td>
<td>ÁßíÁ∫ß</td>
<td>ÂàÜÈíüÁ∫ß</td>
</tr>
<tr>
<td>Â§ßÂ∞è</td>
<td>‰∏ÄËà¨‰∏∫Mb</td>
<td>‰∏ÄËà¨‰∏∫Gb</td>
</tr>
<tr>
<td>ÈÄüÂ∫¶</td>
<td>Êé•ËøëÂéüÁîü</td>
<td>ÊØîËæÉÊÖ¢</td>
</tr>
<tr>
<td>Á≥ªÁªüÊîØÊåÅÊï∞Èáè</td>
<td>ÂçïÊú∫ÊîØÊåÅ‰∏äÂçÉ‰∏™ÂÆπÂô®</td>
<td>‰∏ÄËà¨Âá†ÂçÅ‰∏™</td>
</tr>
<tr>
<td><strong>ÈöîÁ¶ªÊÄß</strong></td>
<td><strong>ÈÄöËøánamespaceÂÆûÁé∞ËµÑÊ∫êÈöîÁ¶ªÔºåÈÄöËøácgroupÂÆûÁé∞ÈôêÂà∂ËµÑÊ∫êÁöÑÊúÄÂ§ß‰ΩøÁî®Èáè</strong></td>
<td><strong>ÂÆåÂÖ®ÈöîÁ¶ªÔºåÊØè‰∏™ËôöÊãüÊú∫ÈÉΩÊúâÁã¨Á´ãÁöÑÁ°¨‰ª∂</strong></td>
</tr>
<tr>
<td><strong>ÂÜÖÊ†∏</strong></td>
<td><strong>ÊâÄÊúâÂÆπÂô®ÂÖ±‰∫´ÂÆø‰∏ªÊú∫ÁöÑÂÜÖÊ†∏</strong></td>
<td><strong>ÊØè‰∏™ËôöÊãüÊú∫ÈÉΩÊúâÁã¨Á´ãÁöÑÊìç‰ΩúÁ≥ªÁªüÂíåÂÜÖÊ†∏</strong></td>
</tr>
</tbody>
</table></div>
<h2 id="dockerËøêË°åÈÄüÂ∫¶Âø´ÁöÑÂéüÂõ†">DockerËøêË°åÈÄüÂ∫¶Âø´ÁöÑÂéüÂõ†
</h2><p>DockerÊúâÊØîËôöÊãüÊú∫Êõ¥Â∞ëÁöÑÊäΩË±°Â±ÇÔºö</p>
<p>Áî±‰∫éDocker‰∏çÈúÄË¶ÅHypervisorÔºàËôöÊãüÊú∫ÔºâÂÆûÁé∞Á°¨‰ª∂ËµÑÊ∫êËôöÊãüÂåñÔºåËøêË°åÂú®DockerÂÆπÂô®‰∏äÁöÑÁ®ãÂ∫èÁõ¥Êé•‰ΩøÁî®ÁöÑÈÉΩÊòØÂÆûÈôÖÁâ©ÁêÜÊú∫ÁöÑÁ°¨‰ª∂ËµÑÊ∫êÔºåÂõ†Ê≠§Âú®CPU„ÄÅÂÜÖÂ≠òÂà©Áî®Áéá‰∏ädockerÊúâÊòéÊòæ‰ºòÂäø„ÄÇ</p>
<p>DockerÂà©Áî®ÁöÑÊòØÂÆø‰∏ªÊú∫ÁöÑÂÜÖÊ†∏ÔºåËÄå‰∏çÈúÄË¶ÅÂä†ËΩΩÊìç‰ΩúÁ≥ªÁªüOSÂÜÖÊ†∏Ôºö</p>
<p>ÂΩìÊñ∞Âª∫‰∏Ä‰∏™ÂÆπÂô®Êó∂ÔºåDocker‰∏çÈúÄË¶ÅÂíåËôöÊãüÊú∫‰∏ÄÊ†∑ÈáçÊñ∞Âä†ËΩΩ‰∏Ä‰∏™Êìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏„ÄÇËøõËÄåÈÅøÂÖçÂºïÂØª„ÄÅÂä†ËΩΩÊìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏ËøîÂõûÁ≠âÊØîËæÉËÄóÊó∂ËÄóËµÑÊ∫êÁöÑËøáÁ®ã„ÄÇÂΩìÊñ∞Âª∫‰∏Ä‰∏™ËôöÊãüÊú∫Êó∂ÔºåËôöÊãüÊú∫ËΩØ‰ª∂ÈúÄË¶ÅÂä†ËΩΩOSÔºåËøîÂõûÊñ∞Âª∫ËøáÁ®ãÊòØÂàÜÈíüÁ∫ßÂà´ÁöÑ„ÄÇËÄåDockerÁî±‰∫éÁõ¥Êé•Âà©Áî®ÂÆø‰∏ªÊú∫ÁöÑÊìç‰ΩúÁ≥ªÁªüÔºåÂàôÁúÅÁï•‰∫ÜËøîÂõûËøáÁ®ãÔºåÂõ†Ê≠§Êñ∞Âª∫‰∏Ä‰∏™dockerÂÆπÂô®Âè™ÈúÄË¶ÅÂá†ÁßíÈíü„ÄÇ</p>
<p>DockerÂÆπÂô®ÁöÑÊú¨Ë¥®Â∞±ÊòØ‰∏Ä‰∏™ËøõÁ®ã„ÄÇ</p>
<h2 id="dockerËΩØ‰ª∂">DockerËΩØ‰ª∂
</h2><p>DockerÂπ∂Èùû‰∏Ä‰∏™ÈÄöÁî®ÁöÑÂÆπÂô®Â∑•ÂÖ∑ÔºåÂÆÉ‰æùËµñ‰∫éÂ∑≤ÁªèÂ≠òÂú®Âπ∂ËøêË°åÁöÑLinuxÂÜÖÊ†∏ÁéØÂ¢É„ÄÇÔºàÂú®Windows‰∏äÂÆâË£ÖDockerÊó∂ÈúÄË¶Å‰æùËµñWLSÔºå‰πüÂç≥Windows‰∏ãÁöÑLinuxÂ≠êÁ≥ªÁªüÔºâ„ÄÇ</p>
<p>DockerÂÆûË¥®‰∏äÊòØÂú®Â∑≤ÁªèËøêË°åÁöÑLinux‰∏ãÂà∂ÈÄ†‰∫Ü‰∏Ä‰∏™ÈöîÁ¶ªÁöÑÊñá‰ª∂ÁéØÂ¢ÉÔºåÂõ†Ê≠§ÂÆÉÊâßË°åÁöÑÊïàÁéáÂá†‰πéÁ≠âÂêå‰∫éÊâÄÈÉ®ÁΩ≤ÁöÑLinux‰∏ªÊú∫„ÄÇ</p>
<p>DockerÁöÑÂü∫Êú¨ÁªÑÊàêÈÉ®ÂàÜÔºö</p>
<ul>
<li>
<p>ÈïúÂÉèÔºàimageÔºâ</p>
</li>
<li>
<p>ÂÆπÂô®ÔºàcontainerÔºâ</p>
</li>
<li>
<p>‰ªìÂ∫ìÔºàrepositoryÔºâ</p>
</li>
</ul>
<h3 id="dockerÈïúÂÉè">DockerÈïúÂÉè
</h3><p>DockerÈïúÂÉèÂ∞±ÊòØ‰∏Ä‰∏™Âè™ËØªÁöÑÊ®°Êùø„ÄÇÈïúÂÉèÂèØ‰ª•Áî®Êù•ÂàõÂª∫DockerÂÆπÂô®Ôºå‰∏Ä‰∏™ÈïúÂÉèÂèØ‰ª•ÂàõÂª∫Â§ö‰∏™ÂÆπÂô®„ÄÇ</p>
<h3 id="dockerÂÆπÂô®">DockerÂÆπÂô®
</h3><p>DockerÂà©Áî®ÂÆπÂô®Áã¨Á´ãËøêË°åÁöÑ‰∏Ä‰∏™Êàñ‰∏ÄÁªÑÂ∫îÁî®ÔºåÂ∫îÁî®Á®ãÂ∫èÊàñÊúçÂä°ËøêË°åÂú®ÂÆπÂô®ÈáåÈù¢ÔºåÂÆπÂô®Â∞±Á±ª‰ºº‰∫é‰∏Ä‰∏™ËôöÊãüÂåñÁöÑËøêË°åÁéØÂ¢ÉÔºåÂÆπÂô®ÊòØÁî®ÈïúÂÉèÂàõÂª∫ÁöÑËøêË°åÂÆû‰æã„ÄÇ</p>
<h3 id="docker‰ªìÂ∫ì">Docker‰ªìÂ∫ì
</h3><p>Docker‰ªìÂ∫ìÊòØÈõÜ‰∏≠Â≠òÊîæÈïúÂÉèÊñá‰ª∂ÁöÑÂú∫ÊâÄ„ÄÇ</p>
<p>‰ªìÂ∫ìÂàÜ‰∏∫ÂÖ¨ÂºÄ‰ªìÂ∫ìÂíåÁßÅÊúâ‰ªìÂ∫ì‰∏§Áßç„ÄÇ</p>
<p>ÊúÄÂ§ßÁöÑÂÖ¨ÂºÄ‰ªìÂ∫ìÊòØDockerÂÆòÊñπÁöÑDocker HubÔºöhttps://hub.docker.com/</p>
<h2 id="dockerÊû∂ÊûÑ">DockerÊû∂ÊûÑ
</h2><p>DockerÊòØ‰∏Ä‰∏™ C/SÔºàClient-ServerÔºâ ÁªìÊûÑÁöÑÁ≥ªÁªüÔºåÂêéÁ´ØÊòØ‰∏Ä‰∏™ÊùæËÄ¶ÂêàÊû∂ÊûÑÔºå‰ºóÂ§öÊ®°ÂùóÂêÑÂè∏ÂÖ∂ËÅå„ÄÇ</p>
<p>DockerÂÆàÊä§ËøõÁ®ãËøêË°åÂú®‰∏ªÊú∫‰∏äÔºåÁÑ∂ÂêéÈÄöËøáSocketËøûÊé•‰ªéÂÆ¢Êà∑Á´ØËÆøÈóÆÔºåÂÆàÊä§ËøõÁ®ã‰ªéÂÆπÂô®Êé•Êî∂ÂëΩ‰ª§Âπ∂ÁÆ°ÁêÜËøêË°åÂú®‰∏ªÊú∫‰∏äÁöÑÂÆπÂô®„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/architecture.svg"
	
	
	
	loading="lazy"
	
		alt="architecture"
	
	
></p>
<p>DockerËøêË°åÁöÑÂü∫Êú¨ÊµÅÁ®ã‰∏∫Ôºö</p>
<ol>
<li>
<p>Áî®Êà∑ÊòØ‰ΩøÁî®Docker Client ‰∏é Docker Daemon Âª∫Á´ãÈÄö‰ø°ÔºåÂπ∂ÂèëÈÄÅËØ∑Ê±ÇÁªôÂêéËÄÖ</p>
</li>
<li>
<p>Docker Daemon ‰Ωú‰∏∫ Docker Êû∂ÊûÑÁöÑ‰∏ª‰ΩìÈÉ®ÂàÜÔºåÈ¶ñÂÖàÊèê‰æõ Docker Server ÁöÑÂäüËÉΩ‰ΩøÂÖ∂ÂèØ‰ª•Êé•Êî∂ Docker Client ÁöÑËØ∑Ê±Ç</p>
</li>
<li>
<p>Docker Engine ÊâßË°å Docker ÂÜÖÈÉ®ÁöÑ‰∏ÄÁ≥ªÂàóÂ∑•‰ΩúÔºåÊØè‰∏ÄÈ°πÂ∑•‰ΩúÈÉΩÊòØ‰ª•‰∏Ä‰∏™ Job ÁöÑÂΩ¢ÂºèÂ≠òÂú®</p>
</li>
<li>
<p>Job ÁöÑËøêË°åËøáÁ®ã‰∏≠ÔºåÂΩìÈúÄË¶ÅÂÆπÂô®ÈïúÂÉèÊó∂ÔºåÂàô‰ªé Docker Registry ‰∏≠‰∏ãËΩΩÈïúÂÉèÔºåÂπ∂ÈÄöËøáÈïúÂÉèÁÆ°ÁêÜÈ©±Âä® Graph Driver Â∞Ü‰∏ãËΩΩÈïúÂÉè‰ª• Graph ÁöÑÂΩ¢ÂºèÂ≠òÂÇ®</p>
</li>
<li>
<p>ÂΩìÈúÄË¶Å‰∏∫ Docker ÂàõÂª∫ÁΩëÁªúÁéØÂ¢ÉÊó∂ÔºåÈÄöËøáÁΩëÁªúÁÆ°ÁêÜÈ©±Âä® Network driver ÂàõÂª∫Âπ∂ÈÖçÁΩÆ Docker ÂÆπÂô®ÁΩëÁªúÁéØÂ¢É</p>
</li>
<li>
<p>ÂΩìÈúÄË¶ÅÈôêÂà∂ Docker ÂÆπÂô®ËøêË°åËµÑÊ∫êÊàñÊâßË°åÁî®Êà∑Êåá‰ª§Á≠âÊìç‰ΩúÊó∂ÔºåÂàôÈÄöËøá Exec driver Êù•ÂÆåÊàê</p>
</li>
<li>
<p>Libcontainer ÊòØ‰∏ÄÈ°πÁã¨Á´ãÁöÑÂÆπÂô®ÁÆ°ÁêÜÂåÖÔºåNetwork driver ‰ª•Âèä Exec driver ÈÉΩÊòØÈÄöËøá Libcontainer Êù•ÂÆûÁé∞ÂÖ∑‰ΩìÂØπÂÆπÂô®ËøõË°åÁöÑÊìç‰Ωú</p>
</li>
</ol>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/flow.png"
	width="937"
	height="1295"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/flow_hu6210446523311892339.png 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/flow_hu6167510121319342689.png 1024w"
	loading="lazy"
	
		alt="flow"
	
	
		class="gallery-image" 
		data-flex-grow="72"
		data-flex-basis="173px"
	
></p>
<h1 id="02-dockerÂÆâË£Ö"><strong>02-DockerÂÆâË£Ö</strong>
</h1><h2 id="centosÂÆâË£Ödocker">CentOSÂÆâË£ÖDocker
</h2><p>ÂèÇËÄÉÂÆòÁΩëÔºöhttps://docs.docker.com/engine/install/centos/</p>
<h3 id="Âç∏ËΩΩÊóßÁâàÊú¨">Âç∏ËΩΩÊóßÁâàÊú¨
</h3><p>Â¶ÇÊûú‰πãÂâçÂÆâË£ÖËøáDockerÔºåÈúÄË¶ÅÂÖàÂç∏ËΩΩÊóßÁâàÊú¨Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum remove docker <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-client <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-client-latest <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-common <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-latest <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-latest-logrotate <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-logrotate <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-engine
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊóßÁâàÊú¨ÁöÑDockerÂºïÊìéÂåÖÂèØËÉΩÂè´ÂÅöÔºö<code>docker</code>„ÄÅ<code>docker-engine</code>„ÄÇ</p>
<p>Êñ∞ÁâàÊú¨ÁöÑDockerÂºïÊìéÂåÖÂè´ÂÅöÔºö<code>docker-ce</code></p>
<h3 id="ÈÖçÁΩÆyumËµÑÊ∫êÂ∫ì">ÈÖçÁΩÆyumËµÑÊ∫êÂ∫ì
</h3><p>ÂÆâË£Ö<code>yum-config-manager</code>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># yum-utilÊèê‰æõyum-config-managerÂäüËÉΩ </span>
</span></span><span class="line"><span class="cl">sudo yum install -y yum-utils
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÖçÁΩÆdockerÁöÑËµÑÊ∫êÂ∫ìÂú∞ÂùÄÔºö</p>
<p>ÂÆòÊñπÂú∞ÂùÄÔºöÔºàÊØîËæÉÊÖ¢Ôºå‰∏çÊé®ËçêÔºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Âú®yumËµÑÊ∫êÂ∫ì‰∏≠Ê∑ªÂä†dockerËµÑÊ∫êÂ∫ì</span>
</span></span><span class="line"><span class="cl">sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈòøÈáå‰∫ëÈïúÂÉèÂú∞ÂùÄÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈòøÈáå‰∫ëÂÆòÁΩëÊèê‰æõ‰∫ÜÂæàÂ§öËµÑÊ∫êÈïúÂÉèÔºåÈïúÂÉèÂú∞ÂùÄÔºö<code>https://mirrors.aliyun.com</code>ÔºåËøõÂÖ•‰πãÂêéÂèØ‰ª•ÈÄâÊã©Ëá™Â∑±ÈúÄË¶ÅÁöÑËµÑÊ∫êËøõË°åÈÖçÁΩÆ</p>
<p>ÂàõÂª∫ÁºìÂ≠òÔºàÂèØÈÄâÔºâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yum makecache fast
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂÆâË£ÖdockerÂºïÊìé">ÂÆâË£ÖDockerÂºïÊìé
</h3><p>ÂÆâË£ÖÊúÄÊñ∞ÁâàÊú¨ÁöÑDockerÂºïÊìé„ÄÅDockerÂÆ¢Êà∑Á´ØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># docker-ceÊòØDockerÂºïÊìéÔºådocker-ce-cliÊòØÂÆ¢Êà∑Á´Ø</span>
</span></span><span class="line"><span class="cl">sudo yum install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≠§Êó∂ÔºåÈªòËÆ§ÂÆâË£ÖÁöÑdockerÂºïÊìé„ÄÅÂÆ¢Êà∑Á´ØÈÉΩÊòØÊúÄÊñ∞ÁâàÊú¨„ÄÇ</p>
<p>Â¶ÇÊûúË¶ÅÂÆâË£ÖÊåáÂÆöÁâàÊú¨Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Êü•ËØ¢ÁâàÊú¨ÂàóË°®</span>
</span></span><span class="line"><span class="cl">yum list docker-ce --showduplicates <span class="p">|</span> sort -r
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÊåáÂÆöÁâàÊú¨ÂÆâË£Ö17.09.0.ceÁâà</span>
</span></span><span class="line"><span class="cl"><span class="c1"># sudo yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io docker-compose-plugin</span>
</span></span><span class="line"><span class="cl">sudo yum install docker-ce-17.09.0.ce docker-ce-cli-17.09.0.ce containerd.io docker-compose-plugin
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂêØÂä®dockerÂºïÊìé">ÂêØÂä®dockerÂºïÊìé
</h3><p>Â¶ÇÊûúÊ≤°ÊúâÂêØÂä®DockerÂºïÊìéÔºåÈÇ£‰πàÊâßË°å <code>docker version</code>Êü•ÁúãÁâàÊú¨Âè∑Êó∂ÔºåÂè™ËÉΩÁúãÂà∞ <code>Client: Docker Engine</code>ÔºàDockerÂºïÊìéÂÆ¢Êà∑Á´ØÔºâÁöÑÁâàÊú¨Âè∑„ÄÇ</p>
<p>ÂêØÂä®DockerÂºïÊìéÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Êñ∞ÁâàÊú¨ÁöÑDockerÂ∞±ÊòØ‰∏Ä‰∏™Á≥ªÁªüÊúçÂä°ÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÂêØÂä®Á≥ªÁªüÊúçÂä°ÊñπÂºèÂêØÂä®</span>
</span></span><span class="line"><span class="cl">systemctl start docker
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Ê≠§Êó∂Êü•ÁúãdockerÁâàÊú¨ÔºåÂèØ‰ª•ÁúãÂà∞Server: Docker EngineÔºàDockerÂºïÊìéÔºâÁâàÊú¨Âè∑</span>
</span></span><span class="line"><span class="cl">docker version
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Âç∏ËΩΩdocker">Âç∏ËΩΩDocker
</h2><p>Âç∏ËΩΩDockerÊ≠•È™§Ôºö</p>
<ol>
<li>ÂÖ≥Èó≠ÊúçÂä°</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">systemctl stop docker
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>‰ΩøÁî®<code>yum</code>Âà†Èô§dockerÂºïÊìé</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo yum remove docker-ce docker-ce-cli containerd.io
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>Âà†Èô§ÈïúÂÉè„ÄÅÂÆπÂô®„ÄÅÂç∑„ÄÅËá™ÂÆö‰πâÈÖçÁΩÆÁ≠âÊñá‰ª∂</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"> sudo rm -rf /var/lib/docker
</span></span><span class="line"><span class="cl"> sudo rm -rf /var/lib/containerd
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ËøêË°åhelloworldÊµãËØï">ËøêË°åHelloWorldÊµãËØï
</h2><p>ËøêË°åHelloWorldÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run hello-world
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ubuntuÂÆâË£Ödocker">UbuntuÂÆâË£ÖDocker
</h2><h3 id="Âç∏ËΩΩÊóßÁâàÊú¨-1">Âç∏ËΩΩÊóßÁâàÊú¨
</h3><p>Âç∏ËΩΩÊóßÁâàÊú¨DockerÔºàÂ¶ÇÊûúÂ∑≤ÁªèÂÆâË£ÖÔºâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get remove docker docker-engine docker.io containerd runc
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂÆâË£Ö‰æùËµñ">ÂÆâË£Ö‰æùËµñ
</h3><p>ÂÆâË£ÖÂøÖË¶ÅÁöÑ‰æùËµñÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Ê∑ªÂä†dockerËΩØ‰ª∂Ê∫ê">Ê∑ªÂä†dockerËΩØ‰ª∂Ê∫ê
</h3><p>ÂÆòÁΩëÊ∫êÔºö(‰∏çÊé®ËçêÔºåÂèØËÉΩ‰ºöËøû‰∏ç‰∏äÊä•Èîô)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÂØºÂÖ•Ê∫ê‰ªìÂ∫ìÁöÑ GPG key</span>
</span></span><span class="line"><span class="cl">curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="p">|</span> sudo apt-key add -
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Â∞Ü Docker APT ËΩØ‰ª∂Ê∫êÊ∑ªÂä†Âà∞‰Ω†ÁöÑÁ≥ªÁªü</span>
</span></span><span class="line"><span class="cl">sudo add-apt-repository <span class="s2">&#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu </span><span class="k">$(</span>lsb_release -cs<span class="k">)</span><span class="s2"> stable&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈòøÈáå‰∫ëÊ∫êÔºàÊé®ËçêÔºâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Ê∑ªÂä†Docker GPGÂØÜÈí•</span>
</span></span><span class="line"><span class="cl">curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg <span class="p">|</span> sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Ê∑ªÂä†DockerËΩØ‰ª∂Ê∫ê‰ø°ÊÅØ</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu </span><span class="k">$(</span>lsb_release -cs<span class="k">)</span><span class="s2"> stable&#34;</span> <span class="p">|</span> sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂÆâË£Ödocker">ÂÆâË£Ödocker
</h3><p>Êõ¥Êñ∞ËΩØ‰ª∂Ê∫êÂπ∂ÂÆâË£ÖDockerÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-get install docker-ce docker-ce-cli containerd.io
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂêØÂä®Âπ∂ÊµãËØïdocker">ÂêØÂä®Âπ∂ÊµãËØïDocker
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start docker
</span></span><span class="line"><span class="cl">sudo docker run hello-world
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="03-docker‰∏ãËΩΩÂä†ÈÄü"><strong>03-Docker‰∏ãËΩΩÂä†ÈÄü</strong>
</h1><h2 id="docker‰∏ãËΩΩÂä†ÈÄü">docker‰∏ãËΩΩÂä†ÈÄü
</h2><p>ÊñπÂºè1Ôºö‰ΩøÁî® ÁΩëÊòìÊï∞Â∏Ü„ÄÅÈòøÈáå‰∫ëÁ≠âÂÆπÂô®ÈïúÂÉè‰ªìÂ∫ìËøõË°å‰∏ãËΩΩ„ÄÇ</p>
<p>‰æãÂ¶ÇÔºå‰∏ãËΩΩÁΩëÊòìÊï∞Â∏ÜÈïúÂÉè‰∏≠ÁöÑmysql„ÄÇÔºàÁΩëÊòìÊï∞Â∏ÜÁöÑÂú∞ÂùÄ‰∏∫ <code>hub.c.163.com</code>ÔºåÁΩëÊòìÊï∞Â∏ÜÂØπdockerhubÂÆòÊñπÁöÑÈïúÂÉèÂëΩÂêçÁ©∫Èó¥‰∏∫ <code>library</code>Ôºâ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker pull hub.c.163.com/library/mysql:latest
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊñπÂºè2ÔºöÈÖçÁΩÆÈòøÈáå‰∫ëÂä†ÈÄü„ÄÇ</p>
<p><strong>Ê≥®ÊÑèÔºöËØ•ÊñπÂºèÂΩìÂâç‰ªÖÊîØÊåÅÈòøÈáå‰∫ëÁî®Êà∑‰ΩøÁî®ÂÖ∑Â§áÂÖ¨ÁΩëËÆøÈóÆËÉΩÂäõÁöÑÈòøÈáå‰∫ë‰∫ßÂìÅËøõË°åÈïúÂÉèÂä†ÈÄüÔºå‰∏î‰ªÖÈôê‰∫éÁâπÂÆöËåÉÂõ¥ÂÜÖÁöÑÂÆπÂô®ÈïúÂÉè</strong></p>
<p>ÁôªÂΩïÈòøÈáå‰∫ëÔºåËøõÂÖ• <code>Â∑•‰ΩúÂè∞</code> -&gt; <code>ÂÆπÂô®ÈïúÂÉèÊúçÂä°</code> -&gt; <code>ÈïúÂÉèÂ∑•ÂÖ∑</code> -&gt; <code>ÈïúÂÉèÂä†ÈÄüÂô®</code>„ÄÇ</p>
<p>ÈáåÈù¢Êèê‰æõ‰∫Ü‰∏Ä‰∏™Âä†ÈÄüÂô®Âú∞ÂùÄÔºö<code>https://xxxxx.mirror.aliyuncs.com</code>ÔºåÂ∞ÜËØ•Âú∞ÂùÄÈÖçÁΩÆÂà∞docker‰∏≠Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> /etc/docker
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂàùÊ¨°ËøõÊù•Êó∂Ê≤°Êúâ/etc/docker/daemon.jsonÊñá‰ª∂ÔºåÁõ¥Êé•ÂàõÂª∫ËØ•Êñá‰ª∂Âç≥ÂèØ</span>
</span></span><span class="line"><span class="cl">vi /etc/docker/daemon.json
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®<code>daemon.json</code>‰∏≠ÂÜôÂÖ•‰ª•‰∏ãÂÜÖÂÆπÔºöÔºàÂç≥Âä†ÈÄüÂô®Âú∞ÂùÄÔºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;registry-mirrors&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;https://xxxxx.mirror.aliyuncs.com&#34;</span><span class="p">]</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂà∑Êñ∞ÈÖçÁΩÆ„ÄÅÈáçÂêØdockerÂç≥ÂèØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># centos6 ÁöÑÂëΩ‰ª§</span>
</span></span><span class="line"><span class="cl">sudo chkconfig daemon-reload
</span></span><span class="line"><span class="cl">sudo service docker restart
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># centos7 ÁöÑÂëΩ‰ª§</span>
</span></span><span class="line"><span class="cl">sudo systemctl daemon-reload
</span></span><span class="line"><span class="cl">sudo systemctl restart docker
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩøÁî®ÊñπÂºè2ÂèØ‰ª•Áõ¥Êé•‰∏ãËΩΩÂÆòÊñπÁöÑÈïúÂÉèÔºå‰∏îÈïúÂÉètag‰∏∫ÂÆòÊñπtagÔºå‰∏çÈúÄË¶ÅÂä†‰∏ä‰∫ëÊúçÂä°ÂïÜÁöÑÂú∞ÂùÄ„ÄÇ</p>
<p>‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker pull mysql:latest
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="dockerÈÖçÁΩÆ‰ª£ÁêÜ">DockerÈÖçÁΩÆ‰ª£ÁêÜ
</h2><p>Â¶ÇÊûú‰ΩøÁî®‰∫ÜÁßëÂ≠¶‰∏äÁΩëÔºåÂèØ‰ª•‰∏∫dockerÈÖçÁΩÆ‰ª£ÁêÜ„ÄÇ</p>
<p>Âú®<code>/etc/docker/daemon.json</code>Êñá‰ª∂‰∏≠Âä†ÂÖ•‰ª•‰∏ãÂÜÖÂÆπÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;proxies&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;http-proxy&#34;</span><span class="p">:</span> <span class="s2">&#34;http://127.0.0.1:7890&#34;</span><span class="p">,</span>  <span class="c1">// ‰ª£ÁêÜÂú∞ÂùÄ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;https-proxy&#34;</span><span class="p">:</span> <span class="s2">&#34;http://127.0.0.1:7890&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;no-proxy&#34;</span><span class="p">:</span> <span class="s2">&#34;localhost&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="04-dockerÂ∏∏Áî®ÂëΩ‰ª§"><strong>04-DockerÂ∏∏Áî®ÂëΩ‰ª§</strong>
</h1><h2 id="ÂêØÂä®Á±ªÂëΩ‰ª§">ÂêØÂä®Á±ªÂëΩ‰ª§
</h2><p>ÂêØÂä®dockerÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">systemctl start docker
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÅúÊ≠¢DockerÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">systemctl stop docker
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈáçÂêØDockerÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">systemctl restart docker
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êü•ÁúãÁä∂ÊÄÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">systemctl status docker
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËÆæÁΩÆÂºÄÊú∫Ëá™ÂêØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">systemctl <span class="nb">enable</span> docker
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Â∏ÆÂä©Á±ªÂëΩ‰ª§">Â∏ÆÂä©Á±ªÂëΩ‰ª§
</h2><p>Êü•ÁúãDockerÁâàÊú¨Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker version
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êü•ÁúãDockerÊ¶ÇË¶Å‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker info
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êü•ÁúãDockerÊÄª‰ΩìÂ∏ÆÂä©ÊñáÊ°£Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker --help
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êü•ÁúãdockerÂÖ∑‰ΩìÂëΩ‰ª§Â∏ÆÂä©ÊñáÊ°£Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker ÂÖ∑‰ΩìÂëΩ‰ª§ --help
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÈïúÂÉèÂëΩ‰ª§">ÈïúÂÉèÂëΩ‰ª§
</h2><h3 id="ÂàóÂá∫Êú¨Âú∞‰∏ªÊú∫‰∏äÁöÑÈïúÂÉè">ÂàóÂá∫Êú¨Âú∞‰∏ªÊú∫‰∏äÁöÑÈïúÂÉè
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker images
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèÇÊï∞Ôºö</p>
<ul>
<li>
<p><code>-a</code>ÔºöÂàóÂá∫ÊâÄÊúâÈïúÂÉèÔºàÂê´ÂéÜÂè≤ÈïúÂÉèÔºâ</p>
</li>
<li>
<p><code>-q</code>ÔºöÂè™ÊòæÁ§∫ÈïúÂÉèID</p>
</li>
<li>
<p><code>-f</code>ÔºöËøáÊª§</p>
</li>
</ul>
<h3 id="Âú®ËøúÁ®ã‰ªìÂ∫ì‰∏≠ÊêúÁ¥¢ÈïúÂÉè">Âú®ËøúÁ®ã‰ªìÂ∫ì‰∏≠ÊêúÁ¥¢ÈïúÂÉè
</h3><p>ÔºàÈªòËÆ§Âèñdocker hub‰∏≠ÊêúÁ¥¢Ôºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker search ÈïúÂÉèÂêçÁß∞
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèÇÊï∞Ôºö</p>
<ul>
<li>
<p><code>-f</code>ÔºöËøáÊª§</p>
</li>
<li>
<p><code>--limit Êï∞Èáè</code>ÔºöÂè™Â±ïÁ§∫ÂâçÂá†È°π</p>
</li>
</ul>
<h3 id="‰∏ãËΩΩÈïúÂÉè">‰∏ãËΩΩÈïúÂÉè
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker pull ÈïúÂÉèÂêçÁß∞<span class="o">[</span>:tag<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏çÂä† tag Êó∂ÔºåÈªòËÆ§‰∏ãËΩΩÊúÄÊñ∞ÁöÑÈïúÂÉèÔºàÂç≥tag‰∏∫<code>latest</code>Ôºâ„ÄÇ</p>
<h3 id="Êü•ÁúãÂç†ÊçÆÁöÑÁ©∫Èó¥">Êü•ÁúãÂç†ÊçÆÁöÑÁ©∫Èó¥
</h3><p>Êü•ÁúãÈïúÂÉè/ÂÆπÂô®/Êï∞ÊçÆÂç∑ÊâÄÂç†ÁöÑÁ©∫Èó¥Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker system df
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Âà†Èô§ÈïúÂÉè">Âà†Èô§ÈïúÂÉè
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker rmi ÈïúÂÉèÂêçÁß∞/ID
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•‰ΩøÁî®Á©∫Ê†ºÂàÜÈöîÔºåÂà†Èô§Â§ö‰∏™ÈïúÂÉèÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker rmi ÈïúÂÉè1 ÈïúÂÉè2 ÈïúÂÉè3
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âà†Èô§ÂÖ®ÈÉ®ÈïúÂÉèÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker rmi -f <span class="k">$(</span>docker images -qa<span class="k">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂëΩ‰ª§Ëá™Âä®Ë°•ÂÖ®">ÂëΩ‰ª§Ëá™Âä®Ë°•ÂÖ®
</h2><p>dockerÊîØÊåÅÂëΩ‰ª§Ëá™Âä®Ë°•ÂÖ®ÂäüËÉΩÔºåÂΩìËæìÂÖ•ÈïúÂÉèÂêçÂâçÂá†‰ΩçÊó∂ÔºåÂèØ‰ª•Êåâ<code>tab</code>ÈîÆËá™Âä®Ë°•ÂÖ®ÈïúÂÉèÂêçÁß∞„ÄÅtagÁ≠â„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Â¶ÇÊûúÈïúÂÉè‰∏≠ÊúâubuntuÔºåÊü•ÁúãËæìÂÖ•ubÊåâ‰∏ãtabÊòØÂê¶ÂèØ‰ª•Ë°•ÂÖ®</span>
</span></span><span class="line"><span class="cl">docker run ub
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúÊåâ‰∏ã<code>tab</code>Êó∂Ê≤°ÊúâËá™Âä®Ë°•ÂÖ®ÔºåÂèØ‰ª•Êåâ‰ª•‰∏ãÊ≠•È™§Êìç‰ΩúÔºö</p>
<ol>
<li>Ê£ÄÊü•ÊòØÂê¶ÂÆâË£Ö‰∫Ü<code>bash-completion</code>ÔºàÂëΩ‰ª§Ë°•ÂÖ®Â¢ûÂº∫ÂåÖÔºâ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Ê£ÄÊü•Êúâ /usr/share/bash-completion/bash_completion Ëøô‰∏™Êñá‰ª∂</span>
</span></span><span class="line"><span class="cl">ls /usr/share/bash-completion/bash_completion
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>Â¶ÇÊûúÊúâ<code>/usr/share/bash-completion</code>ÁõÆÂΩïÔºå‰ΩÜÊòØÊ≤°Êúâ<code>/usr/share/bash-completion/bash_completion</code>Êñá‰ª∂Ôºàcentos6‰∏∫<code>/etc/bash_completion</code>Êñá‰ª∂ÔºâÔºåÂàôÈúÄË¶ÅÂÆâË£Ö<code>bash-completion</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">yum -y install bash-completion
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>Ê£ÄÊü•ÊòØÂê¶ÂÆâË£Ö‰∫ÜdockerÁöÑËá™Âä®Ë°•ÂÖ®</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Ê£ÄÊü•/usr/share/bash-completion/completionsÊñá‰ª∂Â§π‰∏ãÊòØÂê¶ÊúâdockerÂºÄÂ§¥ÁöÑËá™Âä®Ë°•ÂÖ®</span>
</span></span><span class="line"><span class="cl"><span class="c1"># dockerÂÆâË£ÖÂÆåÂêé‰ºöÂú®ËØ•Êñá‰ª∂Â§π‰∏ãÁîüÊàêËá™Âä®Ë°•ÂÖ®Êñá‰ª∂docker</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Â¶ÇÊûúÂÆâË£Ö‰∫Üdocker-composeÔºåÂàôËØ•Êñá‰ª∂Â§π‰∏ãËøò‰ºöÊúâ docker-composeÊñá‰ª∂</span>
</span></span><span class="line"><span class="cl">ll /usr/share/bash-completion/completions/docker*
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>Â¶ÇÊûúÂ∑≤ÁªèÂÆâË£Ö‰∫ÜdockerËá™Âä®Ë°•ÂÖ®Ôºå‰ΩøÁî®<code>source</code>ÂëΩ‰ª§‰ΩøÂÖ∂ÁîüÊïà</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">source</span> /usr/share/bash-completion/completions/docker
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>ÂÜçÊ¨°‰ΩøÁî®<code>tab</code>Êü•ÁúãÊòØÂê¶ÂèØ‰ª•Ëá™Âä®Ë°•ÂÖ®</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Â¶ÇÊûúÈïúÂÉè‰∏≠ÊúâubuntuÔºåÊü•ÁúãËæìÂÖ•ubÊåâ‰∏ãtabÊòØÂê¶ÂèØ‰ª•Ë°•ÂÖ®</span>
</span></span><span class="line"><span class="cl">docker run ub
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>Â¶ÇÊûúÊúâÊä•ÈîôÔºå‰∏îÊä•Èîô‰∏≠ÊèêÁ§∫<code>_get_comp_words_by_ref: command not found</code>„ÄÇËØ¥Êòé<code>bash-completion</code>ÁöÑÈÖçÁΩÆÊñá‰ª∂Ê≤°ÊúâÁîüÊïàÔºåÈúÄË¶Å<code>source</code>‰∏Ä‰∏ã</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÂØπ‰∫écentos7Ôºåbash-completionÂÆâË£ÖÁöÑÊòØ2.xÁâàÊú¨ÔºåÈÖçÁΩÆÊñá‰ª∂‰∏∫/usr/share/bash-completion/bash_completion</span>
</span></span><span class="line"><span class="cl"><span class="nb">source</span> /usr/share/bash-completion/bash_completion
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Â¶ÇÊûúÊòØcentos6ÔºåËá™Âä®ÂÆâË£ÖÁöÑbash-completionÊúÄÊñ∞Áâà‰∏∫1.xÁâàÊú¨ÔºåÈÖçÁΩÆÊñá‰ª∂‰∏∫/etc/bash_completion</span>
</span></span><span class="line"><span class="cl"><span class="c1"># bash /etc/bash_completion</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>ÂÜçÊ¨°‰ΩøÁî®<code>tab</code>Êü•ÁúãÊòØÂê¶ÂèØ‰ª•Ëá™Âä®Ë°•ÂÖ®</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Â¶ÇÊûúÈïúÂÉè‰∏≠ÊúâubuntuÔºåÊü•ÁúãËæìÂÖ•ubÊåâ‰∏ãtabÊòØÂê¶ÂèØ‰ª•Ë°•ÂÖ®</span>
</span></span><span class="line"><span class="cl">docker run ub
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="05-ÂÆπÂô®ÂëΩ‰ª§"><strong>05-ÂÆπÂô®ÂëΩ‰ª§</strong>
</h1><h2 id="Êñ∞Âª∫ÂêØÂä®ÂÆπÂô®">Êñ∞Âª∫ÂêØÂä®ÂÆπÂô®
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run <span class="o">[</span>OPTIONS<span class="o">]</span> IMAGE <span class="o">[</span>COMMAND<span class="o">]</span> <span class="o">[</span>ARG...<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â∏∏Áî®ÁöÑÂèÇÊï∞Ôºö</p>
<ul>
<li>
<p><code>--name</code>Ôºö‰∏∫ÂÆπÂô®ÊåáÂÆö‰∏Ä‰∏™ÂêçÁß∞</p>
</li>
<li>
<p><code>-d</code>ÔºöÂêéÂè∞ËøêË°åÂÆπÂô®Âπ∂ËøîÂõûÂÆπÂô®IDÔºå‰πüÂç≥ÂêØÂä®ÂÆàÊä§ÂºèÂÆπÂô®</p>
</li>
<li>
<p><code>-i</code>Ôºö‰ª•‰∫§‰∫íÊ®°ÂºèÔºàinteractiveÔºâËøêË°åÂÆπÂô®ÔºåÈÄöÂ∏∏‰∏é<code>-t</code>ÂêåÊó∂‰ΩøÁî®</p>
</li>
<li>
<p><code>-t</code>Ôºö‰∏∫ÂÆπÂô®ÈáçÊñ∞ÂàÜÈÖç‰∏Ä‰∏™‰º™ËæìÂÖ•ÁªàÁ´ØÔºàttyÔºâÔºåÈÄöÂ∏∏‰∏é<code>-i</code>ÂêåÊó∂‰ΩøÁî®„ÄÇ‰πüÂç≥ÂêØÂä®‰∫§‰∫íÂºèÂÆπÂô®ÔºàÂâçÂè∞Êúâ‰º™ÁªàÁ´ØÔºåÁ≠âÂæÖ‰∫§‰∫íÔºâ</p>
</li>
<li>
<p><code>-e</code>Ôºö‰∏∫ÂÆπÂô®Ê∑ªÂä†ÁéØÂ¢ÉÂèòÈáè</p>
</li>
<li>
<p><code>-P</code>ÔºöÈöèÊú∫Á´ØÂè£Êò†Â∞Ñ„ÄÇÂ∞ÜÂÆπÂô®ÂÜÖÊö¥Èú≤ÁöÑÊâÄÊúâÁ´ØÂè£Êò†Â∞ÑÂà∞ÂÆø‰∏ªÊú∫ÈöèÊú∫Á´ØÂè£</p>
</li>
<li>
<p><code>-p</code>ÔºöÊåáÂÆöÁ´ØÂè£Êò†Â∞Ñ</p>
</li>
</ul>
<p><code>-p</code>ÊåáÂÆöÁ´ØÂè£Êò†Â∞ÑÁöÑÂá†Áßç‰∏çÂêåÂΩ¢ÂºèÔºö</p>
<ul>
<li>
<p><code>-p hostPort:containerPort</code>ÔºöÁ´ØÂè£Êò†Â∞ÑÔºå‰æãÂ¶Ç<code>-p 8080:80</code></p>
</li>
<li>
<p><code>-p ip:hostPort:containerPort</code>ÔºöÈÖçÁΩÆÁõëÂê¨Âú∞ÂùÄÔºå‰æãÂ¶Ç <code>-p 10.0.0.1:8080:80</code></p>
</li>
<li>
<p><code>-p ip::containerPort</code>ÔºöÈöèÊú∫ÂàÜÈÖçÁ´ØÂè£Ôºå‰æãÂ¶Ç <code>-p 10.0.0.1::80</code></p>
</li>
<li>
<p><code>-p hostPort1:containerPort1 -p hostPort2:containerPort2</code>ÔºöÊåáÂÆöÂ§ö‰∏™Á´ØÂè£Êò†Â∞ÑÔºå‰æãÂ¶Ç<code>-p 8080:80 -p 8888:3306</code></p>
</li>
</ul>
<h3 id="ÂêØÂä®‰∫§‰∫íÂºèÂÆπÂô®">ÂêØÂä®‰∫§‰∫íÂºèÂÆπÂô®
</h3><p>‰ª•‰∫§‰∫íÊñπÂºèÂêØÂä®ubuntuÈïúÂÉè</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># -i ‰∫§‰∫íÊ®°Âºè</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -t ÂàÜÈÖç‰∏Ä‰∏™‰º™ËæìÂÖ•ÁªàÁ´Øtty</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ubuntu ÈïúÂÉèÂêçÁß∞</span>
</span></span><span class="line"><span class="cl"><span class="c1"># /bin/bashÔºàÊàñËÄÖbashÔºâ shell‰∫§‰∫íÁöÑÊé•Âè£</span>
</span></span><span class="line"><span class="cl">docker run -it ubuntu /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄÄÂá∫‰∫§‰∫íÊ®°ÂºèÔºö</p>
<p>ÊñπÂºè1Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Âú®‰∫§‰∫íshell‰∏≠exitÂç≥ÂèØÈÄÄÂõûÂÆø‰∏ªÊú∫</span>
</span></span><span class="line"><span class="cl">exit<span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊñπÂºè2Ôºö‰ΩøÁî®Âø´Êç∑ÈîÆ<code>ctrl</code> + <code>P</code> + <code>Q</code></p>
<p>ÊñπÂºè1ÔºöÈÄÄÂá∫ÂêéÔºåÂÆπÂô®‰ºöÂÅúÊ≠¢Ôºõ</p>
<p>ÊñπÂºè2 ÈÄÄÂá∫ÂêéÂÆπÂô®‰æùÁÑ∂Ê≠£Âú®ËøêË°å„ÄÇ</p>
<h3 id="ÂêØÂä®ÂÆàÊä§ÂºèÂÆπÂô®">ÂêØÂä®ÂÆàÊä§ÂºèÂÆπÂô®
</h3><p>Â§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨Á≥ªÁªüdockerÂÆπÂô®ÊúçÂä°Êó∂Âú®ÂêéÂè∞ËøêË°åÁöÑÔºåÂèØ‰ª•ÈÄöËøá<code>-d</code>ÊåáÂÆöÂÆπÂô®ÁöÑÂêéÂè∞ËøêË°åÊ®°ÂºèÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -d ÂÆπÂô®Âêç
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®ÊÑè‰∫ãÈ°πÔºö</p>
<p>Â¶ÇÊûú‰ΩøÁî®<code>docker run -d ubuntu</code>Â∞ùËØïÂêØÂä®ÂÆàÊä§ÂºèÁöÑubuntuÔºå‰ºöÂèëÁé∞ÂÆπÂô®ÂêØÂä®ÂêéÂ∞±Ëá™Âä®ÈÄÄÂá∫‰∫Ü„ÄÇ</p>
<p>Âõ†‰∏∫DockerÂÆπÂô®Â¶ÇÊûúÂú®ÂêéÂè∞ËøêË°åÔºåÂ∞±ÂøÖÈ°ªË¶ÅÊúâ‰∏Ä‰∏™ÂâçÂè∞ËøõÁ®ã„ÄÇÂÆπÂô®ËøêË°åÁöÑÂëΩ‰ª§Â¶ÇÊûú‰∏çÊòØÈÇ£‰∫õ‰∏ÄÁõ¥ÊåÇËµ∑ÁöÑÂëΩ‰ª§Ôºà‰æãÂ¶Ç<code>top</code>„ÄÅ<code>tail</code>ÔºâÔºåÂ∞±‰ºöËá™Âä®ÈÄÄÂá∫„ÄÇ</p>
<h2 id="ÂàóÂá∫Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®">ÂàóÂá∫Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®
</h2><p>ÂàóÂá∫ÊâÄÊúâÊ≠£Âú®ËøêË°åÁöÑÂÆπÂô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker ps <span class="o">[</span>OPTIONS<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â∏∏Áî®ÂèÇÊï∞Ôºö</p>
<ul>
<li>
<p><code>-a</code>ÔºöÂàóÂá∫ÂΩìÂâçÊâÄÊúâÊ≠£Âú®ËøêË°åÁöÑÂÆπÂô®+ÂéÜÂè≤‰∏äËøêË°åËøáÁöÑÂÆπÂô®</p>
</li>
<li>
<p><code>-l</code>ÔºöÊòæÁ§∫ÊúÄËøëÂàõÂª∫ÁöÑÂÆπÂô®</p>
</li>
<li>
<p><code>-n</code>ÔºöÊòæÁ§∫ÊúÄËøën‰∏™ÂàõÂª∫ÁöÑÂÆπÂô®</p>
</li>
<li>
<p><code>-q</code>ÔºöÈùôÈªòÊ®°ÂºèÔºåÂè™ÊòæÁ§∫ÂÆπÂô®ÁºñÂè∑</p>
</li>
</ul>
<h2 id="ÂÆπÂô®ÂÖ∂‰ªñÂêØÂÅúÊìç‰Ωú">ÂÆπÂô®ÂÖ∂‰ªñÂêØÂÅúÊìç‰Ωú
</h2><h3 id="ÂêØÂä®Â∑≤ÁªèÂÅúÊ≠¢ÁöÑÂÆπÂô®">ÂêØÂä®Â∑≤ÁªèÂÅúÊ≠¢ÁöÑÂÆπÂô®
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker start ÂÆπÂô®IDÊàñÂÆπÂô®Âêç
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÈáçÂêØÂÆπÂô®">ÈáçÂêØÂÆπÂô®
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker restart ÂÆπÂô®IDÊàñÂÆπÂô®Âêç
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂÅúÊ≠¢ÂÆπÂô®">ÂÅúÊ≠¢ÂÆπÂô®
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker stop ÂÆπÂô®IDÊàñÂÆπÂô®Âêç
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Âº∫Âà∂ÂÅúÊ≠¢ÂÆπÂô®">Âº∫Âà∂ÂÅúÊ≠¢ÂÆπÂô®
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">kill</span> ÂÆπÂô®IDÊàñÂÆπÂô®Âêç
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Âà†Èô§ÂÆπÂô®">Âà†Èô§ÂÆπÂô®
</h2><p>Âà†Èô§Â∑≤ÁªèÂÅúÊ≠¢ÁöÑÂÆπÂô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker rm ÂÆπÂô®IDÊàñÂÆπÂô®Âêç
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âà†Èô§ÂÆπÂô®ÊòØ <code>docker rm</code>ÔºåÂà†Èô§ÈïúÂÉèÊòØ <code>docker rmi</code>ÔºåÊ≥®ÊÑèÂå∫ÂàÜ„ÄÇ</p>
<p>Âº∫Âà∂Âà†Èô§Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker rm -f ÂÆπÂô®IDÊàñÂÆπÂô®Âêç
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏ÄÊ¨°Âà†Èô§Â§ö‰∏™ÂÆπÂô®ÂÆû‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker rm -f <span class="si">${</span><span class="nv">docker</span><span class="p"> ps -a -q</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÊàñËÄÖ</span>
</span></span><span class="line"><span class="cl">docker ps -a -q <span class="p">|</span> xargs docker rm
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Êü•ÁúãÂÆπÂô®Êó•Âøó">Êü•ÁúãÂÆπÂô®Êó•Âøó
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker logs ÂÆπÂô®IDÊàñÂÆπÂô®Âêç
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Êü•ÁúãÂÆπÂô®ÂÜÖËøêË°åÁöÑËøõÁ®ã">Êü•ÁúãÂÆπÂô®ÂÜÖËøêË°åÁöÑËøõÁ®ã
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker top ÂÆπÂô®IDÊàñÂÆπÂô®Âêç
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Êü•ÁúãÂÆπÂô®ÂÜÖÈÉ®ÁªÜËäÇ">Êü•ÁúãÂÆπÂô®ÂÜÖÈÉ®ÁªÜËäÇ
</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker inspect ÂÆπÂô®IDÊàñÂÆπÂô®Âêç
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ËøõÂÖ•Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®">ËøõÂÖ•Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®
</h2><p>ËøõÂÖ•Ê≠£Âú®ËøêË°åÁöÑÂÆπÂô®ÔºåÂπ∂‰ª•ÂëΩ‰ª§Ë°å‰∫§‰∫íÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it ÂÆπÂô®ID bashShell
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈáçÊñ∞ËøõÂÖ•Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker attach ÂÆπÂô®ID
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>docker exec</code> Âíå <code>docker attach</code> Âå∫Âà´Ôºö</p>
<ul>
<li>
<p><code>attach</code>Áõ¥Êé•ËøõÂÖ•ÂÆπÂô®ÂêØÂä®ÂëΩ‰ª§ÁöÑÁªàÁ´ØÔºå‰∏ç‰ºöÂêØÂä®Êñ∞ÁöÑËøõÁ®ãÔºåÁî®<code>exit</code>ÈÄÄÂá∫‰ºöÂØºËá¥ÂÆπÂô®ÁöÑÂÅúÊ≠¢</p>
</li>
<li>
<p><code>exec</code>ÊòØÂú®ÂÆπÂô®‰∏≠ÊâìÂºÄÊñ∞ÁöÑÁªàÁ´ØÔºåÂπ∂‰∏îÂèØ‰ª•ÂêØÂä®Êñ∞ÁöÑËøõÁ®ãÔºåÁî®<code>exit</code>ÈÄÄÂá∫‰∏ç‰ºöÂØºËá¥ÂÆπÂô®ÁöÑÂÅúÊ≠¢</p>
</li>
</ul>
<p>Â¶ÇÊûúÊúâÂ§ö‰∏™ÁªàÁ´ØÔºåÈÉΩÂØπÂêå‰∏Ä‰∏™ÂÆπÂô®ÊâßË°å‰∫Ü <code>docker attach</code>ÔºåÂ∞±‰ºöÂá∫Áé∞Á±ª‰ººÊäïÂ±èÊòæÁ§∫ÁöÑÊïàÊûú„ÄÇ‰∏Ä‰∏™ÁªàÁ´Ø‰∏≠ËæìÂÖ•ËæìÂá∫ÁöÑÂÜÖÂÆπÔºåÂú®ÂÖ∂‰ªñÁªàÁ´Ø‰∏ä‰πü‰ºöÂêåÊ≠•ÁöÑÊòæÁ§∫„ÄÇ</p>
<h2 id="ÂÆπÂô®ÂíåÂÆø‰∏ªÊú∫Êñá‰ª∂Êã∑Ë¥ù">ÂÆπÂô®ÂíåÂÆø‰∏ªÊú∫Êñá‰ª∂Êã∑Ë¥ù
</h2><p>ÂÆπÂô®ÂÜÖÊñá‰ª∂Êã∑Ë¥ùÂà∞ÂÆø‰∏ªÊú∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker cp ÂÆπÂô®ID:ÂÆπÂô®ÂÜÖË∑ØÂæÑ ÁõÆÁöÑ‰∏ªÊú∫Ë∑ØÂæÑ
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÆø‰∏ªÊú∫Êñá‰ª∂Êã∑Ë¥ùÂà∞ÂÆπÂô®‰∏≠Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker cp ‰∏ªÊú∫Ë∑ØÂæÑ ÂÆπÂô®ID:ÂÆπÂô®ÂÜÖË∑ØÂæÑ
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂØºÂÖ•ÂíåÂØºÂá∫ÂÆπÂô®">ÂØºÂÖ•ÂíåÂØºÂá∫ÂÆπÂô®
</h2><p><code>export</code>ÔºöÂØºÂá∫ÂÆπÂô®ÁöÑÂÜÖÂÆπÊµÅ‰Ωú‰∏∫‰∏Ä‰∏™tarÂΩíÊ°£Êñá‰ª∂ÔºàÂØπÂ∫î<code>import</code>ÂëΩ‰ª§ÔºâÔºõ</p>
<p><code>import</code>Ôºö‰ªétarÂåÖ‰∏≠ÁöÑÂÜÖÂÆπÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊñá‰ª∂Á≥ªÁªüÂÜçÂØºÂÖ•‰∏∫ÈïúÂÉèÔºàÂØπÂ∫î<code>export</code>ÂëΩ‰ª§ÔºâÔºõ</p>
<p>Á§∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÂØºÂá∫</span>
</span></span><span class="line"><span class="cl"><span class="c1"># docker export ÂÆπÂô®ID &gt; tarÊñá‰ª∂Âêç</span>
</span></span><span class="line"><span class="cl">docker <span class="nb">export</span> abc &gt; aaa.tar
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂØºÂÖ•</span>
</span></span><span class="line"><span class="cl"><span class="c1"># cat tarÊñá‰ª∂ | docker import - Ëá™ÂÆö‰πâÈïúÂÉèÁî®Êà∑/Ëá™ÂÆö‰πâÈïúÂÉèÂêç:Ëá™ÂÆö‰πâÈïúÂÉèÁâàÊú¨Âè∑</span>
</span></span><span class="line"><span class="cl">cat aaa.tar <span class="p">|</span> docker import - test/mytest:1.0.1
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Â∞ÜÂÆπÂô®ÁîüÊàêÊñ∞ÈïúÂÉè">Â∞ÜÂÆπÂô®ÁîüÊàêÊñ∞ÈïúÂÉè
</h2><p><code>docker commit</code>Êèê‰∫§ÂÆπÂô®ÂâØÊú¨‰Ωø‰πãÊàê‰∏∫‰∏Ä‰∏™Êñ∞ÁöÑÈïúÂÉè„ÄÇ</p>
<p>docker ÂêØÂä®‰∏Ä‰∏™ÈïúÂÉèÂÆπÂô®ÂêéÔºå ÂèØ‰ª•Âú®ÈáåÈù¢ÊâßË°å‰∏Ä‰∫õÂëΩ‰ª§Êìç‰ΩúÔºåÁÑ∂Âêé‰ΩøÁî®<code>docker commit</code>Â∞ÜÊñ∞ÁöÑËøô‰∏™ÂÆπÂô®Âø´ÁÖßÁîüÊàê‰∏Ä‰∏™ÈïúÂÉè„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker commit -m<span class="o">=</span><span class="s2">&#34;Êèê‰∫§ÁöÑÊèèËø∞‰ø°ÊÅØ&#34;</span> -a<span class="o">=</span><span class="s2">&#34;‰ΩúËÄÖ&#34;</span> ÂÆπÂô®ID Ë¶ÅÂàõÂª∫ÁöÑÁõÆÊ†áÈïúÂÉèÂêç:<span class="o">[</span>tag<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>DockerÊåÇËΩΩ‰∏ªÊú∫ÁõÆÂΩïÔºåÂèØËÉΩ‰ºöÂá∫Áé∞Êä•ÈîôÔºö<code>cannot open directory .: Perission denied</code>„ÄÇ</p>
<p>Ëß£ÂÜ≥ÊñπÊ°àÔºöÂú®ÂëΩ‰ª§‰∏≠Âä†ÂÖ•ÂèÇÊï∞ <code>--privileged=true</code>„ÄÇ</p>
<p>CentOS7ÂÆâÂÖ®Ê®°ÂùóÊØî‰πãÂâçÁ≥ªÁªüÁâàÊú¨Âä†Âº∫Ôºå‰∏çÂÆâÂÖ®ÁöÑ‰ºöÂÖàÁ¶ÅÊ≠¢ÔºåÁõÆÂΩïÊåÇËΩΩÁöÑÊÉÖÂÜµË¢´ÈªòËÆ§‰∏∫‰∏çÂÆâÂÖ®ÁöÑË°å‰∏∫ÔºåÂú®SELinuxÈáåÈù¢ÊåÇËΩΩÁõÆÂΩïË¢´Á¶ÅÊ≠¢Êéâ‰∫Ü„ÄÇÂ¶ÇÊûúË¶ÅÂºÄÂêØÔºå‰∏ÄËà¨‰ΩøÁî® <code>--privileged=true</code>ÔºåÊâ©Â§ßÂÆπÂô®ÁöÑÊùÉÈôêËß£ÂÜ≥ÊåÇËΩΩÊ≤°ÊúâÊùÉÈôêÁöÑÈóÆÈ¢ò„ÄÇ‰πüÂç≥‰ΩøÁî®ËØ•ÂèÇÊï∞ÔºåÂÆπÂô®ÂÜÖÁöÑrootÊâçÊã•ÊúâÁúüÊ≠£ÁöÑrootÊùÉÈôêÔºåÂê¶ÂàôÂÆπÂô®ÂÜÖÁöÑrootÂè™ÊòØÂ§ñÈÉ®ÁöÑ‰∏Ä‰∏™ÊôÆÈÄöÁî®Êà∑ÊùÉÈôê„ÄÇ</p>
<h2 id="ÂÆπÂô®Êï∞ÊçÆÂç∑">ÂÆπÂô®Êï∞ÊçÆÂç∑
</h2><p>Âç∑Â∞±ÊòØÁõÆÂΩïÊàñÊñá‰ª∂ÔºåÂ≠òÂú®‰∫é‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÆπÂô®‰∏≠ÔºåÁî±dockerÊåÇËΩΩÂà∞ÂÆπÂô®Ôºå‰ΩÜ‰∏çÂ±û‰∫éËÅîÂêàÊñá‰ª∂Á≥ªÁªüÔºåÂõ†Ê≠§ËÉΩÂ§üÁªïËøáUnionFSÔºåÊèê‰æõ‰∏Ä‰∫õÁî®‰∫éÊåÅÁª≠Â≠òÂÇ®ÊàñÂÖ±‰∫´Êï∞ÊçÆ„ÄÇ</p>
<p>ÁâπÊÄßÔºöÂç∑ËÆæËÆ°ÁöÑÁõÆÁöÑÂ∞±ÊòØÊï∞ÊçÆÁöÑÊåÅ‰πÖÂåñÔºåÂÆåÂÖ®Áã¨Á´ã‰∫éÂÆπÂô®ÁöÑÁîüÂ≠òÂë®ÊúüÔºåÂõ†Ê≠§Docker‰∏ç‰ºöÂú®ÂÆπÂô®Âà†Èô§Êó∂Âà†Èô§ÂÖ∂ÊåÇËΩΩÁöÑÊï∞ÊçÆÂç∑„ÄÇ</p>
<p>ÁâπÁÇπÔºö</p>
<ul>
<li>
<p>Êï∞ÊçÆÂç∑ÂèØ‰ª•Âú®ÂÆπÂô®‰πãÈó¥ÂÖ±‰∫´ÊàñÈáçÁî®Êï∞ÊçÆ</p>
</li>
<li>
<p>Âç∑‰∏≠ÁöÑÊõ¥ÊîπÂèØ‰ª•Áõ¥Êé•ÂÆûÊñΩÁîüÊïà</p>
</li>
<li>
<p>Êï∞ÊçÆÂç∑‰∏≠ÁöÑÊõ¥Êîπ‰∏ç‰ºöÂåÖÂê´Âú®ÈïúÂÉèÁöÑÊõ¥Êñ∞‰∏≠</p>
</li>
<li>
<p>Êï∞ÊçÆÂç∑ÁöÑÁîüÂëΩÂë®Êúü‰∏ÄÁõ¥ÊåÅÁª≠Âà∞Ê≤°ÊúâÂÆπÂô®‰ΩøÁî®ÂÆÉ‰∏∫Ê≠¢</p>
</li>
</ul>
<p>ËøêË°å‰∏Ä‰∏™Â∏¶ÊúâÂÆπÂô®Âç∑Â≠òÂÇ®ÂäüËÉΩÁöÑÂÆπÂô®ÂÆû‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -it --privileged<span class="o">=</span><span class="nb">true</span> -v ÂÆø‰∏ªÊú∫ÁªùÂØπË∑ØÂæÑÁõÆÂΩï:ÂÆπÂô®ÂÜÖÁõÆÂΩï<span class="o">[</span>rw <span class="p">|</span> ro<span class="o">]</span> ÈïúÂÉèÂêç
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•‰ΩøÁî®<code>docker inspect</code>Êü•ÁúãÂÆπÂô®ÁªëÂÆöÁöÑÊï∞ÊçÆÂç∑„ÄÇ</p>
<p>ÊùÉÈôêÔºö</p>
<ul>
<li>
<p><code>rw</code>ÔºöËØªÂÜô</p>
</li>
<li>
<p><code>ro</code>ÔºöÂè™ËØª„ÄÇÂ¶ÇÊûúÂÆø‰∏ªÊú∫ÂÜôÂÖ•ÂÜÖÂÆπÔºåÂèØ‰ª•ÂêåÊ≠•ÁªôÂÆπÂô®ÂÜÖÔºåÂÆπÂô®ÂÜÖÂèØ‰ª•ËØªÂèñ„ÄÇ</p>
</li>
</ul>
<p>ÂÆπÂô®Âç∑ÁöÑÁªßÊâøÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÂêØÂä®‰∏Ä‰∏™ÂÆπÂô®</span>
</span></span><span class="line"><span class="cl">docker run -it --privileged<span class="o">=</span><span class="nb">true</span> /tmp/test:/tmp/docker --name u1 ubuntu /bin/bash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ‰ΩøÁî® --volumes-from ÁªßÊâø u1ÁöÑÂÆπÂô®Âç∑Êò†Â∞ÑÈÖçÁΩÆ</span>
</span></span><span class="line"><span class="cl">docker run -it --privileged<span class="o">=</span><span class="nb">true</span> --volumes-from u1 --name u2 ubuntu
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÊâÄÊúâÂëΩ‰ª§Á§∫ÊÑèÂõæ">ÊâÄÊúâÂëΩ‰ª§Á§∫ÊÑèÂõæ
</h2><p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/Docker-Command-Diagram.png"
	width="1024"
	height="768"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/Docker-Command-Diagram_hu7209810290307319200.png 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/Docker-Command-Diagram_hu2838129469340573726.png 1024w"
	loading="lazy"
	
		alt="Docker-Command-Diagram"
	
	
		class="gallery-image" 
		data-flex-grow="133"
		data-flex-basis="320px"
	
></p>
<h1 id="06-dockerÈïúÂÉè"><strong>06-DockerÈïúÂÉè</strong>
</h1><h2 id="ÈïúÂÉè">ÈïúÂÉè
</h2><p>ÈïúÂÉèÊòØ‰∏ÄÁßçËΩªÈáèÁ∫ß„ÄÅÂèØÊâßË°åÁöÑÁã¨Á´ãËΩØ‰ª∂ÂåÖÔºåÂÆÉÂåÖÂê´ËøêË°åÊüê‰∏™ËΩØ‰ª∂ÊâÄÈúÄÁöÑÊâÄÊúâÂÜÖÂÆπÔºåÊàë‰ª¨ÊääÂ∫îÁî®Á®ãÂ∫èÂíåÈÖçÁΩÆ‰æùËµñÊâìÂåÖÂ•ΩË°åÁ®ã‰∏Ä‰∏™ÂèØ‰∫§‰ªòÁöÑËøêË°åÁéØÂ¢ÉÔºàÂåÖÊã¨‰ª£Á†Å„ÄÅËøêË°åÊó∂ÈúÄË¶ÅÁöÑÂ∫ì„ÄÅÁéØÂ¢ÉÂèòÈáèÂíåÈÖçÁΩÆÊñá‰ª∂Á≠âÔºâÔºåËøô‰∏™ÊâìÂåÖÂ•ΩÁöÑËøêË°åÁéØÂ¢ÉÂ∞±ÊòØimageÈïúÂÉèÊñá‰ª∂„ÄÇ</p>
<h2 id="docker-ÈïúÂÉèÂä†ËΩΩÂéüÁêÜ">Docker ÈïúÂÉèÂä†ËΩΩÂéüÁêÜ
</h2><h3 id="ËÅîÂêàÊñá‰ª∂Á≥ªÁªü">ËÅîÂêàÊñá‰ª∂Á≥ªÁªü
</h3><p>Docker ‰∏≠ÁöÑÊñá‰ª∂Â≠òÂÇ®È©±Âä®Âè´ÂÅö storage driver„ÄÇ</p>
<p>Docker ÊúÄÊó©ÊîØÊåÅÁöÑstotage driverÊòØ AUFSÔºåÂÆÉÂÆûÈôÖ‰∏äÁî±‰∏ÄÂ±Ç‰∏ÄÂ±ÇÁöÑÊñá‰ª∂Á≥ªÁªüÁªÑÊàêÔºåËøôÁßçÂ±ÇÁ∫ßÁöÑÊñá‰ª∂Á≥ªÁªüÂè´UnionFS„ÄÇ</p>
<p>ËÅîÂêàÊñá‰ª∂Á≥ªÁªüÔºàUnionFSÔºâÔºöUnion Êñá‰ª∂Á≥ªÁªüÔºåÊòØ‰∏ÄÁßçÂàÜÂ±Ç„ÄÅËΩªÈáèÁ∫ßÂπ∂‰∏îÈ´òÊÄßËÉΩÁöÑÊñá‰ª∂Á≥ªÁªüÔºåÂÆÉÊîØÊåÅÂØπÊñá‰ª∂Á≥ªÁªüÁöÑ‰øÆÊîπ‰Ωú‰∏∫‰∏ÄÊ¨°Êèê‰∫§Êù•‰∏ÄÂ±ÇÂ±ÇÁöÑÂè†Âä†ÔºåÂêåÊó∂ÂèØ‰ª•Â∞Ü‰∏çÂêåÁõÆÂΩïÊåÇËΩΩÂà∞Âêå‰∏Ä‰∏™ËôöÊãüÊñá‰ª∂Á≥ªÁªü‰∏ãÔºàunite serveral directories into a single virtual filesystemÔºâ„ÄÇ</p>
<p>UnionÊñá‰ª∂Á≥ªÁªüÊòØDockerÈïúÂÉèÁöÑÂü∫Á°Ä„ÄÇÈïúÂÉèÂèØ‰ª•ÈÄöËøáÂàÜÂ±ÇÊù•ËøõË°åÈõÜÊàêÔºåÂü∫‰∫éÂü∫Á°ÄÈïúÂÉèÂèØ‰ª•Âà∂‰ΩúÂÖ∑‰ΩìÁöÑÂ∫îÁî®ÈïúÂÉè„ÄÇ</p>
<p>ÁâπÊÄßÔºö‰∏ÄÊ¨°ÂêåÊó∂Âä†ËΩΩÂ§ö‰∏™Êñá‰ª∂Á≥ªÁªüÔºå‰ΩÜ‰ªéÂ§ñÈù¢ÁúãËµ∑Êù•ÔºåÂè™ËÉΩÁúãÂà∞‰∏Ä‰∏™Êñá‰ª∂Á≥ªÁªüÔºåËÅîÂêàÂä†ËΩΩ‰ºöÊääÂêÑÂ±ÇÊñá‰ª∂Á≥ªÁªüÂè†Âä†Ëµ∑Êù•ÔºåËøôÊ†∑ÊúÄÁªàÁöÑÊñá‰ª∂Á≥ªÁªü‰ºöÂåÖÂê´ÊâÄÊúâÂ∫ïÂ±ÇÁöÑÊñá‰ª∂ÂíåÁõÆÂΩï„ÄÇ</p>
<p>ÂêéÊù•Âá∫Áé∞ÁöÑdockerÁâàÊú¨‰∏≠ÔºåÈô§‰∫ÜAUFSÔºåËøòÊîØÊåÅOverlayFS„ÄÅBtrfs„ÄÅDevice Mapper„ÄÅVFS„ÄÅZFSÁ≠âstorage driver„ÄÇ</p>
<h3 id="bootfsÂíårootfs">bootfsÂíårootfs
</h3><p>bootfsÔºàboot file systemÔºâ‰∏ªË¶ÅÂåÖÂê´ bootloader Âíå kernelÔºåbootloader‰∏ªË¶ÅÊòØÂºïÂØºÂä†ËΩΩ kernelÔºåLinuxÂàöÂêØÂä®Êó∂‰ºöÂä†ËΩΩbootfsÊñá‰ª∂Á≥ªÁªü„ÄÇ</p>
<p>Âú®DockerÈïúÂÉèÁöÑÊúÄÂ∫ïÂ±ÇÊòØÂºïÂØºÊñá‰ª∂Á≥ªÁªübootfs„ÄÇËøô‰∏ÄÂ±Ç‰∏éÊàë‰ª¨ÂÖ∏ÂûãÁöÑLinux/UnixÁ≥ªÁªüÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂåÖÂê´bootÂä†ËΩΩÂô®ÂíåÂÜÖÊ†∏„ÄÇÂΩìbootÂä†ËΩΩÂÆåÊàê‰πãÂêéÊï¥‰∏™ÂÜÖÊ†∏Â∞±ÈÉΩÂú®ÂÜÖÂ≠ò‰∏≠‰∫ÜÔºåÊ≠§Êó∂ÂÜÖÂ≠òÁöÑ‰ΩøÁî®ÊùÉÂ∑≤ÁªèÁî± bootfs ËΩ¨‰∫§ÁªôÂÜÖÊ†∏ÔºåÊ≠§Êó∂Á≥ªÁªü‰πü‰ºöÂç∏ËΩΩ bootfs„ÄÇ</p>
<p>rootfsÔºàroot file systemÔºâÔºåÂú®bootfs‰πã‰∏äÔºåÂåÖÂê´ÁöÑÂ∞±ÊòØÂÖ∏ÂûãLinuxÁ≥ªÁªü‰∏≠ÁöÑ <code>/dev</code>„ÄÅ<code>/proc</code>„ÄÅ<code>/bin</code>„ÄÅ<code>/etc</code>Á≠âÊ†áÂáÜÁõÆÂΩïÂíåÊñá‰ª∂„ÄÇrootfsÂ∞±ÊòØÂêÑÁßç‰∏çÂêåÁöÑÊìç‰ΩúÁ≥ªÁªüÂèëË°åÁâàÔºåÊØîÂ¶ÇUbuntu„ÄÅCentOSÁ≠â„ÄÇ</p>
<p>dockerÈïúÂÉèÂ∫ïÂ±ÇÂ±ÇÊ¨°Ôºö</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/layer01.jpg"
	width="633"
	height="468"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/layer01_hu12499913941508150826.jpg 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/layer01_hu7237665284351715241.jpg 1024w"
	loading="lazy"
	
		alt="layer01"
	
	
		class="gallery-image" 
		data-flex-grow="135"
		data-flex-basis="324px"
	
></p>
<p>ÂØπ‰∫é‰∏Ä‰∏™Á≤æÁÆÄÁöÑOSÔºårootfsÂèØ‰ª•ÂæàÂ∞èÔºåÂè™ÈúÄË¶ÅÂåÖÊã¨ÊúÄÂü∫Êú¨ÁöÑÂëΩ‰ª§„ÄÅÂ∑•ÂÖ∑ÂíåÁ®ãÂ∫èÂ∫ìÂ∞±ÂèØ‰ª•‰∫ÜÔºåÂõ†‰∏∫Â∫ïÂ±ÇÁõ¥Êé•‰ΩøÁî®HostÁöÑKernelÔºåËá™Â∑±Âè™ÈúÄË¶ÅÊèê‰æõrootfsÂ∞±ÂèØ‰ª•„ÄÇÊâÄ‰ª•ÔºåÂØπ‰∫é‰∏çÂêåÁöÑLinuxÂèëË°åÁâàÔºåbootfsÂü∫Êú¨ÊòØ‰∏ÄËá¥ÁöÑÔºårootfs‰ºöÊúâÂ∑ÆÂà´Ôºå‰∏çÂêåÁöÑÂèëË°åÁâàÂèØ‰ª•ÂÖ±Áî®bootfs„ÄÇ</p>
<p>ÊúâÂ∑ÆÂà´ÁöÑrootfsÔºö</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/layer02.jpg"
	width="637"
	height="437"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/layer02_hu13619571272626573117.jpg 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/layer02_hu14456280541078403519.jpg 1024w"
	loading="lazy"
	
		alt="layer02"
	
	
		class="gallery-image" 
		data-flex-grow="145"
		data-flex-basis="349px"
	
></p>
<h3 id="ÈïúÂÉèÂàÜÂ±Ç">ÈïúÂÉèÂàÜÂ±Ç
</h3><p>DockerÊîØÊåÅÊâ©Â±ïÁé∞ÊúâÈïúÂÉèÔºåÂàõÂª∫Êñ∞ÁöÑÈïúÂÉè„ÄÇÊñ∞ÈïúÂÉèÊòØ‰ªébaseÈïúÂÉè‰∏ÄÂ±Ç‰∏ÄÂ±ÇÂè†Âä†ÁîüÊàêÁöÑ„ÄÇ</p>
<p>‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># Version: 0.0.1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> debian  # Áõ¥Êé•Âú®debain baseÈïúÂÉè‰∏äÊûÑÂª∫</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">MAINTAINER</span><span class="s"> mylinux</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y emacs <span class="c1"># ÂÆâË£Öemacs</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get install -y apache2 <span class="c1"># ÂÆâË£Öapache2</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;/bin/bash&#34;</span><span class="p">]</span> <span class="c1"># ÂÆπÂô®ÂêØÂä®Êó∂ËøêË°åbash</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÈïúÂÉèÂàõÂª∫ËøáÁ®ãÔºö</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/layer03.png"
	width="2144"
	height="696"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/layer03_hu11200481854660346429.png 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/layer03_hu11656135983662875512.png 1024w"
	loading="lazy"
	
		alt="layer03"
	
	
		class="gallery-image" 
		data-flex-grow="308"
		data-flex-basis="739px"
	
></p>
<h2 id="ÈïúÂÉèÂàÜÂ±ÇÁöÑ‰ºòÂäø">ÈïúÂÉèÂàÜÂ±ÇÁöÑ‰ºòÂäø
</h2><p>ÈïúÂÉèÂàÜÂ±ÇÁöÑ‰∏Ä‰∏™ÊúÄÂ§ßÂ•ΩÂ§ÑÂ∞±ÊòØÂÖ±‰∫´ËµÑÊ∫êÔºåÊñπ‰æøÂ§çÂà∂ËøÅÁßªÔºåÊñπ‰æøÂ§çÁî®„ÄÇ</p>
<h2 id="ÂÆπÂô®Â±Ç">ÂÆπÂô®Â±Ç
</h2><p>ÂΩìÂÆπÂô®ÂêØÂä®Êó∂Ôºå‰∏Ä‰∏™Êñ∞ÁöÑ<strong>ÂèØÂÜôÂ±Ç</strong>Â∞ÜË¢´Âä†ËΩΩÂà∞ÈïúÂÉèÁöÑÈ°∂ÈÉ®ÔºåËøô‰∏ÄÂ±ÇÈÄöÂ∏∏Ë¢´Áß∞‰∏∫<code>ÂÆπÂô®Â±Ç</code>ÔºåÂÆπÂô®Â±Ç‰πã‰∏ãÁöÑÈÉΩÂè´<code>ÈïúÂÉèÂ±Ç</code>„ÄÇ</p>
<p>ÊâÄÊúâÂØπÂÆπÂô®ÁöÑÊîπÂä®ÔºåÊó†ËÆ∫Ê∑ªÂä†„ÄÅÂà†Èô§„ÄÅËøòÊòØ‰øÆÊîπÊñá‰ª∂ÈÉΩÂè™‰ºöÂèëÁîüÂú®ÂÆπÂô®Â±Ç‰∏≠„ÄÇ</p>
<p>Âè™ÊúâÂÆπÂô®Â±ÇÊòØÂèØÂÜôÁöÑÔºåÂÆπÂô®Â±Ç‰∏ãÈù¢ÁöÑÊâÄÊúâÈïúÂÉèÂ±ÇÈÉΩÊòØÂè™ËØªÁöÑ„ÄÇ</p>
<p>Â¶ÇÂõæÔºö</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/layer04.jpg"
	width="800"
	height="600"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/layer04_hu15356079341779747914.jpg 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/layer04_hu12433220794110476370.jpg 1024w"
	loading="lazy"
	
		alt="layer04"
	
	
		class="gallery-image" 
		data-flex-grow="133"
		data-flex-basis="320px"
	
></p>
<h1 id="07-nexusÊê≠Âª∫dockerÁßÅ‰ªì"><strong>07-nexusÊê≠Âª∫dockerÁßÅ‰ªì</strong>
</h1><h2 id="‰ΩøÁî®nexusÂàõÂª∫dockerÁßÅÊúâ‰ªìÂ∫ì">‰ΩøÁî®nexusÂàõÂª∫dockerÁßÅÊúâ‰ªìÂ∫ì
</h2><p>NexusÁöÑÂÆâË£ÖËØ∑ÂèÇËÄÉËØ•ÊñáÊ°£Ôºöhttps://www.yuque.com/tmfl/pom/uumrx2</p>
<p>NexusÈÖçÁΩÆDocker‰ªìÂ∫ìÊ≠•È™§Ôºõ</p>
<ol>
<li>
<p>nexusÈªòËÆ§dockerÊòØÂ§±ÊïàÁöÑÔºåÈúÄË¶Å Âú®<code>security</code> &ndash;&gt; <code>Realms</code>ÔºåÂ∞ÜdockerÈÖçÁΩÆÊàê<code>Active</code></p>
</li>
<li>
<p>Âú® <code>Repository</code> ÁöÑ <code>Blob Store</code> ‰∏≠ÂàõÂª∫‰∏Ä‰∏™Áî®‰∫éÂ≠òÊîædockerÈïúÂÉèÁöÑÂ≠òÂÇ®„ÄÇÂÜÖÁΩëÊ≤°Êúâ<code>S3</code>ÁöÑËØùÔºåÊää<code>Type</code>ÈÖçÁΩÆ‰∏∫<code>file</code>Â∞±Ë°å„ÄÇ</p>
</li>
</ol>
<blockquote>
<p>S3ÔºöSimple Storage ServiceÔºåÁÆÄÂçïÂØπË±°Â≠òÂÇ®ÊúçÂä°ÔºåÂç≥‰∫ëÂ≠òÂÇ®„ÄÇ</p>
</blockquote>
<ol start="3">
<li>Âú® <code>Repository</code> ÁöÑ <code>Repositories</code> ‰∏≠ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑËµÑÊ∫êÂ∫ìÔºåÁ±ªÂûã‰∏∫ <code>docker-hosted</code>„ÄÇ</li>
</ol>
<p>ÂàõÂª∫ÁöÑ <code>docker-hosted</code>ËµÑÊ∫êÂ∫ìÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆÔºö</p>
<ol>
<li>
<p><code>Name</code>ÔºöÊåáÂÆöËØ•ËµÑÊ∫êÂ∫ìÁöÑÂêçÁß∞Ôºå‰æãÂ¶ÇÂ∞±Âè´ <code>docker-hosted</code></p>
</li>
<li>
<p><code>Online</code>ÔºöÈªòËÆ§ÂãæÈÄâÂç≥ÂèØ</p>
</li>
<li>
<p><code>HTTP</code>Ôºö‰∏é‰∏ãÈù¢ÁöÑHTTPSÔºåËá≥Â∞ëÈúÄË¶ÅÂãæÈÄâÂÖ∂‰∏≠‰∏Ä‰∏™ÈÄâÊã©Ê°ÜÔºåÂπ∂ÈÖçÁΩÆ‰∏Ä‰∏™Âíånexus‰∏çÂêåÁöÑÁ´ØÂè£Âè∑Ôºå‰æãÂ¶Ç <code>8881</code>„ÄÇÂ∞ÜÊù•dockerÂÆ¢Êà∑Á´ØÂêëÈïúÂÉè‰∏≠ÂøÉ‰∏ä‰º†ÈïúÂÉèÊó∂ÔºåÈúÄË¶ÅÂêëËØ•Á´ØÂè£Âè∑ËøõË°å‰∏ä‰º†„ÄÇ</p>
</li>
<li>
<p><code>HTTPS</code>ÔºöÂ¶ÇÊûúÊúçÂä°Âô®ÂèØ‰ª•ÂºÄÂêØhttpsÊúçÂä°ÔºåÂàô‰πüÂèØ‰ª•ÂãæÈÄâ<code>HTTPS</code>ÔºåÁÑ∂ÂêéÈÖçÁΩÆ‰∏Ä‰∏™Á´ØÂè£Âè∑ÔºåÊé•Êî∂dockerÂÆ¢Êà∑Á´Ø‰∏ä‰º†‰∏äÊù•ÁöÑÈïúÂÉè„ÄÇ</p>
</li>
<li>
<p><code>Allow anonymous docker pull</code>ÔºöÂÖÅËÆ∏ÂåøÂêç‰∏ä‰º†ÔºåÈªòËÆ§‰∏çÂãæÈÄâ</p>
</li>
<li>
<p><code>Enable docker V1 API</code>ÔºöÊòØÂê¶ÂêØÁî® dockerÊó©Êúü<code>V1</code>ÁâàÊú¨ÁöÑAPIÔºåÈªòËÆ§‰∏çÂãæÈÄâÔºåÂç≥Âè™ÂêØÁî®<code>V2 API</code>Ôºö<code>http://xxx.xxx.xxx.xxx:8881/v2/</code></p>
</li>
<li>
<p><code>Blob Store</code>ÔºöÈÄâÊã©‰∏äÈù¢ÂàõÂª∫ÁöÑdockerÈïúÂÉèÁöÑÂ≠òÂÇ®`</p>
</li>
<li>
<p><code>Deployment Policy</code>ÔºöÊòØÂê¶ÂÖÅËÆ∏ÈáçÂ§ç‰∏ä‰º†Âêå‰∏Ä‰∏™ËµÑÊ∫êÔºåÈªòËÆ§ÂÖÅËÆ∏</p>
</li>
</ol>
<p>ÈÖçÁΩÆÂ•Ω‰πãÂêéÔºå‰øÆÊîπÈò≤ÁÅ´Â¢ôËÆæÁΩÆÔºåÂºÄÂêØÂàöÂàöÈÖçÁΩÆÁöÑ<code>8881</code> Á´ØÂè£Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">vim /etc/sysconfig/iptables
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê∑ªÂä†Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">-A INPUT -p tcp -m tcp --dport 8881 -j ACCEPT
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈáçÂêØiptablesÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">service iptables restart
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="dockerÂÆ¢Êà∑Á´ØÁöÑÈïúÂÉèÂØºÂá∫ÂíåÂØºÂÖ•">dockerÂÆ¢Êà∑Á´ØÁöÑÈïúÂÉèÂØºÂá∫ÂíåÂØºÂÖ•
</h2><p>ÈïúÂÉè‰∏ãËΩΩÂíåÂØºÂá∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ‰∏ãËΩΩÈïúÂÉè</span>
</span></span><span class="line"><span class="cl">docker pull mysql:8.0.28
</span></span><span class="line"><span class="cl"><span class="c1"># Â∞ÜÈïúÂÉèÂØºÂá∫ÊàêÊú¨Âú∞tarÊñá‰ª∂</span>
</span></span><span class="line"><span class="cl">docker save -o mysql-8.0.28.tar mysql:8.0.28
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈïúÂÉèÁöÑÂØºÂÖ•Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Â∞ÜÊú¨Âú∞Êñá‰ª∂ÂØºÂÖ•Âà∞dockerÈïúÂÉè‰∏≠Ôºàdocker‰ºöËá™Âä®Ëß£ÊûêÂá∫Êñá‰ª∂‰∏≠ÁöÑtagÔºåÊó†ÈúÄÊâãÂä®ÊåáÂÆöÔºâ</span>
</span></span><span class="line"><span class="cl">docker load &lt; mysql-8.0.28.tar
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="docker-ÂÆ¢Êà∑Á´ØÂêëÁßÅ‰ªì‰∏ä‰º†ÈïúÂÉè">docker ÂÆ¢Êà∑Á´ØÂêëÁßÅ‰ªì‰∏ä‰º†ÈïúÂÉè
</h2><h3 id="ÈÖçÁΩÆdockerÂÖÅËÆ∏Êé•Êî∂httpËØ∑Ê±Ç">ÈÖçÁΩÆdockerÂÖÅËÆ∏Êé•Êî∂<code>http</code>ËØ∑Ê±Ç
</h3><p>dockerÈªòËÆ§Âè™Êé•Êî∂<code>https</code>ËØ∑Ê±ÇÔºåËÄåÊàë‰ª¨ÁöÑ<code>nexus</code>ÁßÅ‰ªìÂ¶ÇÊûúÈÖçÁΩÆÁöÑÊòØ<code>HTTP</code>Êé•Âè£ÁöÑËØùÔºådockerÁõ¥Êé•Ëøû‰ºöÊä•ÈîôÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">server gave HTTP response to HTTPS client
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈúÄË¶ÅÈÖçÁΩÆdockerÂÖÅËÆ∏ËøûÊé•Êàë‰ª¨ÁßÅ‰ªìÁöÑ<code>http</code>„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">vim /usr/lib/systemd/system/docker.service
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ÂÖ∂‰∏≠ÁöÑ<code>ExecStart</code> ÈÄâÈ°πÂêéÈù¢ÔºåÊ∑ªÂä† <code>--insecure-registry {docker ÁßÅÊúâÈïúÂÉèÂ∫ì IP} --ipv6=false</code>„ÄÇ</p>
<p>‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">[Service]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#  ÂâçÈù¢ÁöÑ-HÂèÇÊï∞ÂèØËÉΩ‰∏çÂêåÔºå‰∏çÈúÄË¶ÅÁÆ°ÔºåÂè™ÈúÄÂú®ÊúÄÂêéÈù¢Âä†‰∏äÊàë‰ª¨ÁöÑÁßÅ‰ªìÂú∞ÂùÄÂç≥ÂèØÔºö--insecure-registry 192.168.x.xxx:8881 --ipv6=false
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix://var/run/docker.sock --insecure-registry 192.168.x.xxx:8881 --ipv6=false
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÈáçÂêØdockerÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># centos6 ÁöÑÂëΩ‰ª§</span>
</span></span><span class="line"><span class="cl">sudo chkconfig daemon-reload
</span></span><span class="line"><span class="cl">sudo service docker restart
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># centos7 ÁöÑÂëΩ‰ª§</span>
</span></span><span class="line"><span class="cl">sudo systemctl daemon-reload
</span></span><span class="line"><span class="cl">sudo systemctl restart docker
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰πüÂèØ‰ª•Âú®<code>/etc/docker/daemon.json</code> ‰∏≠ËøõË°åÈÖçÁΩÆÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;insecure-reigstries&#34;</span><span class="p">:[</span><span class="s2">&#34;192.168.xxx.xxx:8881&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂêëÁßÅ‰ªìÊé®ÈÄÅÈïúÂÉè">ÂêëÁßÅ‰ªìÊé®ÈÄÅÈïúÂÉè
</h3><ol>
<li>Â¶ÇÊûúÁßÅ‰ªì‰∏çÂÖÅËÆ∏ÂåøÂêç‰∏ä‰º†ÈïúÂÉèÔºåÂàôÈúÄË¶ÅÂÖàËøõË°åÁôªÈôÜ„ÄÇÔºà‰∏ÄËà¨ÁßÅ‰ªìÈÉΩ‰∏çÂÖÅËÆ∏ÂåøÂêç‰∏ä‰º†Ôºå<code>nexus</code>ÈªòËÆ§ÂåøÂêç‰∏ä‰º†‰πüÊ≤°ÊúâÂãæÈÄâÔºâ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">  <span class="c1"># --usernameÂêéÈù¢‰∏∫nexusÁî®Êà∑ÂêçÔºåÊâßË°åÂëΩ‰ª§Âêé‰ºöÊèêÁ§∫ËæìÂÖ•ÂØÜÁ†Å</span>
</span></span><span class="line"><span class="cl">  docker login --username<span class="o">=</span>admin http://192.168.xxx.xxx:8881
</span></span><span class="line"><span class="cl">  <span class="c1"># ÁôªÂΩï‰πãÂêéÔºå‰ºöÂú® $HOME/.docker/config.json ‰∏≠ËÆ∞ÂΩï‰∏ãÁôªÂΩïÁöÑÁî®Êà∑‰ø°ÊÅØÔºå‰πãÂêé‰æø‰∏çÈúÄË¶ÅÂÜçËøõË°åÁôªÈôÜÊìç‰Ωú</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># Â¶ÇÊûúË¶ÅÂèñÊ∂àÁôªÂΩïÔºåÂàôÂè™ÈúÄÊâßË°å‰ª•‰∏ãÂëΩ‰ª§</span>
</span></span><span class="line"><span class="cl">  <span class="c1"># docker logout http://192.168.xxx.xxx:8881</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>Â∞ÜË¶Å‰∏ä‰º†ÁöÑÈïúÂÉèÈáçÊñ∞ËÆæÁΩÆ<code>Tag</code>„ÄÇ
dockerÊåâÁÖßÈïúÂÉèÂêçÁß∞Âå∫ÂàÜ‰∏ä‰º†ÁöÑËµÑÊ∫êÂ∫ì„ÄÇ
‰æãÂ¶ÇÔºö
<code>mysql:8.0.28</code>‰ºöË¢´‰∏ä‰º†Âà∞dockerÂÆòÊñπ<code>dockerhub</code>Ôºõ
<code>tengyer/helloworld:lasted</code>‰ºöË¢´‰∏ä‰º†Âà∞dockerhubÁöÑ<code>tengyer</code>ÂëΩÂêçÁ©∫Èó¥‰∏≠Ôºõ
<code>registry.cn-hangzhou.aliyuncs.com/ÂëΩÂêçÁ©∫Èó¥/ÈïúÂÉèÂêçÁß∞:[ÈïúÂÉèÁâàÊú¨Âè∑]</code> ‰ºö‰∏ä‰º†Âà∞ÈòøÈáå‰∫ëÊåáÂÆöÂëΩÂêçÁ©∫Èó¥‰∏≠Ôºõ
<code>ccr.ccs.tencentyun.com/ÂëΩÂêçÁ©∫Èó¥/hello-world</code>Ôºö‰ºö‰∏ä‰º†Âà∞ËÖæËÆØ‰∫ëÊåáÂÆöÂëΩÂêçÁ©∫Èó¥‰∏≠Ôºõ
<code>hub.c.163.com/ÂëΩÂêçÁ©∫Èó¥/hello-world</code>Ôºö‰ºö‰∏ä‰º†Âà∞ÁΩëÊòìÊï∞Â∏ÜÊåáÂÆöÂëΩÂêçÁ©∫Èó¥‰∏≠Ôºõ
ÊâÄ‰ª•ÔºåÊàë‰ª¨Â¶ÇÊûúË¶Å‰∏ä‰º†Âà∞Êàë‰ª¨ÁöÑÁßÅ‰ªìÔºåÈúÄË¶ÅÂ∞Ü<code>Tag</code>‰øÆÊîπ‰∏∫<code>xxx.xxx.xxx.xxx:8881/ÂëΩÂêçÁ©∫Èó¥/mysql:5.0.27</code>Ê†ºÂºèÔºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Â∞Ümysql:8.0.28Â§çÂà∂Âá∫‰∏Ä‰∏™ÁßÅ‰ªìÊ†ºÂºèÁöÑTag</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ËØ•Êìç‰ΩúÂú® docker images‰∏≠‰ºöÂ§öÂá∫‰∏Ä‰∏™Â§çÂà∂Âá∫Êù•ÁöÑtagÔºå‰ΩÜÊòØImageIdÂíåÂéüÂßãÁöÑÁõ∏Âêå</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Âä†‰∏™officialÂëΩÂêçÁ©∫Èó¥ÔºåÊñπ‰æøÂå∫ÂàÜËøô‰∏™ÈïúÂÉèÊòØ‰ªéÂÆòÊñπÈïúÂÉè‰∏ãËΩΩ‰∏ãÊù•ÁöÑÔºå‰∏çÂä†ÂëΩÂêçÁ©∫Èó¥‰πüÂèØ‰ª•‰∏ä‰º†</span>
</span></span><span class="line"><span class="cl">docker tag <span class="o">[</span>ImageId<span class="o">]</span> xxx.xxx.xxx.xxx:8881/official/mysql:8.0.28
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>Â∞Ü‰øÆÊîπÂ•Ω<code>Tag</code>ÁöÑÈïúÂÉèËøõË°å‰∏ä‰º†Ôºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker push xxx.xxx.xxx.xxx:8881/official/mysql:8.0.28
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="08-registryÊê≠Âª∫dockerÁßÅ‰ªì"><strong>08-RegistryÊê≠Âª∫dockerÁßÅ‰ªì</strong>
</h1><h2 id="docker-registry">Docker Registry
</h2><p>Docker RegistryÊòØÂÆòÊñπÊèê‰æõÁöÑÂ∑•ÂÖ∑ÔºåÁî®‰∫éÊûÑÂª∫ÁßÅÊúâÈïúÂÉè‰ªìÂ∫ì„ÄÇ</p>
<h2 id="ÁéØÂ¢ÉÊê≠Âª∫">ÁéØÂ¢ÉÊê≠Âª∫
</h2><p>Docker Registry‰πüÊòØDocker HubÊèê‰æõÁöÑ‰∏Ä‰∏™ÈïúÂÉèÔºåÂèØ‰ª•Áõ¥Êé•ÊãâÂèñËøêË°å„ÄÇ</p>
<p>Ê≠•È™§Ôºö</p>
<ol>
<li>ÊãâÂèñÈïúÂÉè</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker pull registry
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>ÂêØÂä®Docker Registry</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -d -p 5000:5000 -v /app/myregistry/:/tmp/registry --privileged<span class="o">=</span><span class="nb">true</span> registry
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>È™åËØÅÔºàÊü•ÁúãÁßÅÊúç‰∏≠ÁöÑÊâÄÊúâÈïúÂÉèÔºâ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl http://192.168.xxx.xxx:5000/v2/_catalog
</span></span><span class="line"><span class="cl">Registry‰ºöËøîÂõûjsonÊ†ºÂºèÁöÑÊâÄÊúâÈïúÂÉèÁõÆÂΩï  
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂêëregistryÁßÅ‰ªì‰∏≠‰∏ä‰º†ÈïúÂÉè">ÂêëRegistryÁßÅ‰ªì‰∏≠‰∏ä‰º†ÈïúÂÉè
</h2><h3 id="ÈÖçÁΩÆdockerÂÖÅËÆ∏Êé•Êî∂httpËØ∑Ê±Ç-1">ÈÖçÁΩÆdockerÂÖÅËÆ∏Êé•Êî∂<code>http</code>ËØ∑Ê±Ç
</h3><p>ÔºàÈÖçÁΩÆÊñπÂºèÂíå‰∏ä‰º†Âà∞nexusÁßÅ‰ªìÁõ∏ÂêåÔºâ„ÄÇ</p>
<p>‰øÆÊîπ<code>/etc/docker/daemon.json</code>ÔºåÊ∑ªÂä†<code>insecure-registries</code>ÂÖÅËÆ∏httpÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;registry-mirros&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;https://xxxx.mirror.aliyuncs.com&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;insecure-registries&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;192.168.xxx.xxx:5000&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÈáçÂêØdockerÔºöÔºàÊñ∞ÁâàÊú¨ÁöÑdocker‰ºöÁ´ãÂç≥ÁîüÊïàÔºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># centos6 ÁöÑÂëΩ‰ª§</span>
</span></span><span class="line"><span class="cl">sudo chkconfig daemon-reload
</span></span><span class="line"><span class="cl">sudo service docker restart
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># centos7 ÁöÑÂëΩ‰ª§</span>
</span></span><span class="line"><span class="cl">sudo systemctl daemon-reload
</span></span><span class="line"><span class="cl">sudo systemctl restart docker
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Êé®ÈÄÅÂà∞ÁßÅ‰ªì">Êé®ÈÄÅÂà∞ÁßÅ‰ªì
</h3><p>Ê≠•È™§Ôºö</p>
<ol>
<li>Ê∑ªÂä†‰∏Ä‰∏™ÂØπÂ∫îÁßÅ‰ªìÂú∞ÂùÄÁöÑtag</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker tag lee/myubuntu:1.0.1 192.168.xxx.xxx:5000/lee/myubuntu:1.0.1
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>pushÂà∞ÁßÅ‰ªì</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker push 192.168.xxx.xxx:5000/lee/myubuntu:1.0.1
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>Êü•ÁúãÁßÅ‰ªì‰∏≠ÈïúÂÉèÁõÆÂΩïÈ™åËØÅ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl http://192.168.xxx.xxx:5000/v2/_catalog
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊãâÂèñÈ™åËØÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker pull 192.169.xxx.xxx:5000/lee/myubuntu:1.0.1
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="09-dockerÂÆâË£Ömysql"><strong>09-DockerÂÆâË£ÖMysql</strong>
</h1><h2 id="docker-ÂÆâË£Ö-mysql">Docker ÂÆâË£Ö Mysql
</h2><p>‰ª•ÂÆâË£Ö Mysql 5.7‰∏∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker pull mysql:5.7
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="mysql-ÂçïÊú∫">Mysql ÂçïÊú∫
</h2><h3 id="ÁÆÄÂçïÁâà-mysql-57-ÂÆâË£Ö">ÁÆÄÂçïÁâà Mysql 5.7 ÂÆâË£Ö
</h3><p>ÁÆÄÂçïÁöÑÂêØÂä®MysqlÂÆπÂô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÈúÄË¶Å‰ΩøÁî® -e ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè MYSQL_ROOT_PASSWORDÔºàmysql rootÁî®Êà∑ÁöÑÂØÜÁ†ÅÔºâ</span>
</span></span><span class="line"><span class="cl">docker run -p 3306:3306 -e <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>root -d mysql:5.7
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÆÄÂçïÁâàÁöÑMysql‰ºöÂ≠òÂú®‰ª•‰∏ãÈóÆÈ¢òÔºö</p>
<ul>
<li>
<p>‰∏≠Êñá‰π±Á†Å</p>
</li>
<li>
<p>Ê≤°ÊúâÂÆπÂô®Âç∑Êò†Â∞Ñ</p>
</li>
</ul>
<p>ÂêØÂä®dockerÂÆπÂô®ÂêéÔºåÂèØ‰ª•Ê≠£Â∏∏ÁöÑËøûÊé•„ÄÅÂàõÂª∫Êï∞ÊçÆÂ∫ìÔºåÂàõÂª∫Ë°®ÔºåÊèíÂÖ•Êï∞ÊçÆ„ÄÇ‰ΩÜÊòØÊèíÂÖ•‰∏≠ÊñáÂàô‰ºöÊä•Èîô„ÄÇ</p>
<p>‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- ÂàõÂª∫db01Êï∞ÊçÆÂ∫ì
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">db01</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- ÂàáÊç¢Âà∞db01;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">use</span><span class="w"> </span><span class="n">db01</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- ÂàõÂª∫Ë°®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t1</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- ÊèíÂÖ•Ëã±ÊñáÂèØ‰ª•Ê≠£Â∏∏ÊèíÂÖ•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;abc&#39;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- ÊèíÂÖ•‰∏≠ÊñáÊä•Èîô
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Âº†‰∏â&#39;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊòØÂõ†‰∏∫dockerÈªòËÆ§ÁöÑÂ≠óÁ¨¶ÈõÜÁöÑÈóÆÈ¢òÔºåÂèØ‰ª•Âú®mysql‰∏≠‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Êü•ÁúãÊï∞ÊçÆÂ∫ìÂ≠óÁ¨¶ÈõÜÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">show</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;character%&#39;</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøîÂõûÁöÑÂ≠óÁ¨¶ÈõÜ‰∏≠Ôºå<code>character_set_database</code>„ÄÅ<code>character_set_server</code>Á≠âÈÉΩ‰∏∫<code>latin1</code>Â≠óÁ¨¶ÈõÜÔºåÊâÄ‰ª•‰ºöÊä•Èîô„ÄÇ</p>
<p>ËÄå‰∏îÂõ†‰∏∫ÂêØÂä®ÂÆπÂô®Êó∂Ê≤°ÊúâÈÖçÁΩÆÂÆπÂô®Âç∑Êò†Â∞ÑÔºåÂΩìÂÆπÂô®ÊÑèÂ§ñË¢´Âà†Êó∂ÔºåÊï∞ÊçÆÊó†Ê≥ïÊâæÂõû„ÄÇ</p>
<h3 id="ÂÆûÈôÖÂ∫îÁî®Áâà-mysql-57ÂÆâË£Ö">ÂÆûÈôÖÂ∫îÁî®Áâà Mysql 5.7ÂÆâË£Ö
</h3><p>ÂêØÂä® Mysql ÂÆπÂô®ÔºåÂπ∂ÈÖçÁΩÆÂÆπÂô®Âç∑Êò†Â∞ÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -d -p 33506:3306 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           --privileged<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -v /app/mysql/log:/var/log/mysql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -v /app/mysql/data:/var/lib/mysql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -v /app/mysql/conf:/etc/mysql/conf.d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -e <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>lj@0322.. <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           --name mysql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           mysql:5.7
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®<code>/app/mysql/conf</code>‰∏ãÊñ∞Âª∫ <code>my.cnf</code>ÔºåÈÄöËøáÂÆπÂô®Âç∑ÂêåÊ≠•ÁªômysqlÂÆû‰æãÔºåËß£ÂÜ≥‰∏≠Êñá‰π±Á†ÅÈóÆÈ¢òÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">[client]
</span></span><span class="line"><span class="cl">default_character_set=utf8
</span></span><span class="line"><span class="cl">[mysqld]
</span></span><span class="line"><span class="cl">collation_server = utf8_general_ci
</span></span><span class="line"><span class="cl">character_set_server = utf8
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈáçÂêØmysqlÂÆπÂô®Ôºå‰ΩøÂæóÂÆπÂô®ÈáçÊñ∞Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker restart mysql
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≠§Êó∂‰æøËß£ÂÜ≥‰∫Ü‰∏≠Êñá‰π±Á†ÅÔºà‰∏≠ÊñáÊèíÂÖ•Êä•ÈîôÔºâÈóÆÈ¢ò„ÄÇ</p>
<p>ËÄå‰∏îÂõ†‰∏∫ÂêØÂä®Êó∂Â∞ÜÂÆπÂô®ÂÅö‰∫ÜÂÆπÂô®Âç∑Êò†Â∞ÑÔºåÂ∞ÜmysqlÁöÑÈÖçÁΩÆÔºàÊò†Â∞ÑÂà∞<code>/app/mysql/conf</code>Ôºâ„ÄÅÊï∞ÊçÆÔºàÊò†Â∞ÑÂà∞<code>/app/mysql/data</code>Ôºâ„ÄÅÊó•ÂøóÔºàÊò†Â∞ÑÂà∞<code>/app/mysql/log</code>ÔºâÈÉΩÊò†Â∞ÑÂà∞‰∫ÜÂÆø‰∏ªÊú∫ÂÆûÈôÖÁõÆÂΩïÔºåÊâÄ‰ª•Âç≥‰ΩøÂà†Èô§‰∫ÜÂÆπÂô®Ôºå‰πü‰∏ç‰ºö‰∫ßÁîüÂ§™Â§ßÂΩ±Âìç„ÄÇÂè™ÈúÄË¶ÅÂÜçÊâßË°å‰∏Ä‰∏ãÂêØÂä®MysqlÂÆπÂô®ÂëΩ‰ª§ÔºåÂÆπÂô®Âç∑ËøòÊåâÁõ∏Âêå‰ΩçÁΩÆËøõË°åÊò†Â∞ÑÔºåÊâÄÊúâÁöÑÊï∞ÊçÆ‰æøÈÉΩÂèØ‰ª•Ê≠£Â∏∏ÊÅ¢Â§ç„ÄÇ</p>
<h2 id="mysql-‰∏ª‰ªéÂ§çÂà∂ÂÆâË£Ö">Mysql ‰∏ª‰ªéÂ§çÂà∂ÂÆâË£Ö
</h2><p>ÂÆâË£Ö‰∏ªÊúçÂä°Âô®ÂÆπÂô®ÂÆû‰æãÔºàÁ´ØÂè£Âè∑3307ÔºâÔºö</p>
<ol>
<li>ÂêØÂä®ÂÆπÂô®ÂÆû‰æã</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -p 3307:3306 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           --name mysql-master <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           --privileged<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -v /app/mysql-master/log:/var/log/mysql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -v /app/mysql-master/data:/var/lib/mysql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -v /app/mysql-master/conf:/etc/mysql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -e <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>root <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -d mysql:5.7
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>ËøõÂÖ•<code>/app/mysql-master/conf</code>ÔºåÊñ∞Âª∫<code>my.cnf</code>ÈÖçÁΩÆÊñá‰ª∂Ôºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">[mysqld]
</span></span><span class="line"><span class="cl">## ËÆæÁΩÆserver_id, Âêå‰∏Ä‰∏™Â±ÄÂüüÁΩë‰∏≠ÈúÄË¶ÅÂîØ‰∏Ä
</span></span><span class="line"><span class="cl">server_id=101
</span></span><span class="line"><span class="cl">## ÊåáÂÆö‰∏çÈúÄË¶ÅÂêåÊ≠•ÁöÑÊï∞ÊçÆÂ∫ìÂêçÁß∞
</span></span><span class="line"><span class="cl">binlog-ignore-db=mysql
</span></span><span class="line"><span class="cl">## ÂºÄÂêØ‰∫åËøõÂà∂Êó•ÂøóÂäüËÉΩ
</span></span><span class="line"><span class="cl">log-bin=mall-mysql-bin
</span></span><span class="line"><span class="cl">## ËÆæÁΩÆ‰∫åËøõÂà∂Êó•Âøó‰ΩøÁî®ÂÜÖÂ≠òÂ§ßÂ∞èÔºà‰∫ãÂä°Ôºâ
</span></span><span class="line"><span class="cl">binlog_cache_size=1M
</span></span><span class="line"><span class="cl">## ËÆæÁΩÆ‰ΩøÁî®ÁöÑ‰∫åËøõÂà∂Êó•ÂøóÊ†ºÂºèÔºàmixed,statement,rowÔºâ
</span></span><span class="line"><span class="cl">binlog_format=mixed
</span></span><span class="line"><span class="cl">## ‰∫åËøõÂà∂Êó•ÂøóËøáÊúüÊ∏ÖÁêÜÊó∂Èó¥„ÄÇÈªòËÆ§ÂÄº‰∏∫0ÔºåË°®Á§∫‰∏çËá™Âä®Ê∏ÖÁêÜ
</span></span><span class="line"><span class="cl">expire_logs_days=7
</span></span><span class="line"><span class="cl">## Ë∑≥Ëøá‰∏ª‰ªéÂ§çÂà∂‰∏≠ÈÅáÂà∞ÁöÑÊâÄÊúâÈîôËØØÊàñÊåáÂÆöÁ±ªÂûãÁöÑÈîôËØØÔºåÈÅøÂÖçslaveÁ´ØÂ§çÂà∂‰∏≠Êñ≠
</span></span><span class="line"><span class="cl">## Â¶ÇÔºö1062ÈîôËØØÊòØÊåá‰∏Ä‰∫õ‰∏ªÈîÆÈáçÂ§çÔºå1032ÈîôËØØÊòØÂõ†‰∏∫‰∏ª‰ªéÊï∞ÊçÆÂ∫ìÊï∞ÊçÆ‰∏ç‰∏ÄËá¥
</span></span><span class="line"><span class="cl">slave_skip_errors=1062
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>ÈáçÂêØÂÆπÂô®ÂÆû‰æã</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker restart mysql-master
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>ËøõÂÖ•ÂÆπÂô®ÂÆû‰æãÂÜÖ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it mysql-master /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>ÁôªÂΩïmysqlÔºåÂàõÂª∫Êï∞ÊçÆÂêåÊ≠•Áî®Êà∑</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- È¶ñÂÖà‰ΩøÁî® mysql -uroot -p ÁôªÂΩïmysql
</span></span></span><span class="line"><span class="cl"><span class="c1">-- ÂàõÂª∫Êï∞ÊçÆÂêåÊ≠•Áî®Êà∑
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="s1">&#39;slave&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="n">identified</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;123456&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- ÊéàÊùÉ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">grant</span><span class="w"> </span><span class="n">replication</span><span class="w"> </span><span class="n">slave</span><span class="p">,</span><span class="w"> </span><span class="n">replication</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="o">*</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="s1">&#39;slave&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">flush</span><span class="w"> </span><span class="k">privileges</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÆâË£Ö‰ªéÊúçÂä°Âô®ÂÆπÂô®ÂÆû‰æãÔºàÁ´ØÂè£Âè∑3308ÔºâÔºö</p>
<ol>
<li>ÂêØÂä®ÂÆπÂô®ÊúçÂä°Ôºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -p 3308:3306 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           --name mysql-slave <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           --privileged<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -v /app/mysql-slave/log:/var/log/mysql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -v /app/mysql-slave/data:/var/lib/mysql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -v /app/mysql-slave/conf:/etc/mysql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -e <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>root <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -d mysql:5.7
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>ËøõÂÖ•<code>/app/mysql-slave/conf</code>ÁõÆÂΩïÔºåÂàõÂª∫<code>my.cnf</code>ÈÖçÁΩÆÊñá‰ª∂Ôºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">[mysqld]
</span></span><span class="line"><span class="cl">## ËÆæÁΩÆserver_id, Âêå‰∏Ä‰∏™Â±ÄÂüüÁΩëÂÜÖÈúÄË¶ÅÂîØ‰∏Ä
</span></span><span class="line"><span class="cl">server_id=102
</span></span><span class="line"><span class="cl">## ÊåáÂÆö‰∏çÈúÄË¶ÅÂêåÊ≠•ÁöÑÊï∞ÊçÆÂ∫ìÂêçÁß∞
</span></span><span class="line"><span class="cl">binlog-ignore-db=mysql
</span></span><span class="line"><span class="cl">## ÂºÄÂêØ‰∫åËøõÂà∂Êó•ÂøóÂäüËÉΩÔºå‰ª•Â§áslave‰Ωú‰∏∫ÂÖ∂ÂÆÉÊï∞ÊçÆÂ∫ìÂÆû‰æãÁöÑMasterÊó∂‰ΩøÁî®
</span></span><span class="line"><span class="cl">log-bin=mall-mysql-slave1-bin
</span></span><span class="line"><span class="cl">## ËÆæÁΩÆ‰∫åËøõÂà∂Êó•Âøó‰ΩøÁî®ÂÜÖÂ≠òÂ§ßÂ∞èÔºà‰∫ãÂä°Ôºâ
</span></span><span class="line"><span class="cl">binlog_cache_size=1M
</span></span><span class="line"><span class="cl">## ËÆæÁΩÆ‰ΩøÁî®ÁöÑ‰∫åËøõÂà∂Êó•ÂøóÊ†ºÂºèÔºàmixed,statement,rowÔºâ
</span></span><span class="line"><span class="cl">binlog_format=mixed
</span></span><span class="line"><span class="cl">## ‰∫åËøõÂà∂Êó•ÂøóËøáÊúüÊ∏ÖÁêÜÊó∂Èó¥„ÄÇÈªòËÆ§ÂÄº‰∏∫0ÔºåË°®Á§∫‰∏çËá™Âä®Ê∏ÖÁêÜ
</span></span><span class="line"><span class="cl">expire_logs_days=7
</span></span><span class="line"><span class="cl">## Ë∑≥Ëøá‰∏ª‰ªéÂ§çÂà∂‰∏≠ÈÅáÂà∞ÁöÑÊâÄÊúâÈîôËØØÊàñÊåáÂÆöÁ±ªÂûãÁöÑÈîôËØØÔºåÈÅøÂÖçslaveÁ´ØÂ§çÂà∂‰∏≠Êñ≠
</span></span><span class="line"><span class="cl">## Â¶ÇÔºö1062ÈîôËØØÊòØÊåá‰∏Ä‰∫õ‰∏ªÈîÆÈáçÂ§çÔºå1032ÊòØÂõ†‰∏∫‰∏ª‰ªéÊï∞ÊçÆÂ∫ìÊï∞ÊçÆ‰∏ç‰∏ÄËá¥
</span></span><span class="line"><span class="cl">slave_skip_errors=1062
</span></span><span class="line"><span class="cl">## relay_logÈÖçÁΩÆ‰∏≠ÁªßÊó•Âøó
</span></span><span class="line"><span class="cl">relay_log=mall-mysql-relay-bin
</span></span><span class="line"><span class="cl">## log_slave_updatesË°®Á§∫slaveÂ∞ÜÂ§çÂà∂‰∫ã‰ª∂ÂÜôËøõËá™Â∑±ÁöÑ‰∫åËøõÂà∂Êó•Âøó
</span></span><span class="line"><span class="cl">log_slave_updates=1
</span></span><span class="line"><span class="cl">## slaveËÆæÁΩÆÂè™ËØªÔºàÂÖ∑ÊúâsuperÊùÉÈôêÁöÑÁî®Êà∑Èô§Â§ñÔºâ
</span></span><span class="line"><span class="cl">read_only=1
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>‰øÆÊîπÂÆåÈÖçÁΩÆÈúÄË¶ÅÈáçÂêØslaveÂÆπÂô®ÂÆû‰æã</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker restart mysql-slave
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®‰∏ªÊï∞ÊçÆÂ∫ì‰∏≠Êü•Áúã‰∏ª‰ªéÂêåÊ≠•Áä∂ÊÄÅÔºö</p>
<ol>
<li>ËøõÂÖ•‰∏ªÊï∞ÊçÆÂ∫ìÂÆπÂô®Ôºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it mysql-master /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>ËøõÂÖ•Mysql</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">mysql -uroot -p
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>Êü•Áúã‰∏ª‰ªéÂêåÊ≠•Áä∂ÊÄÅ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">show</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">status</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">‰∏ªË¶ÅÊü•ÁúãËøîÂõûÁªìÊûúÁöÑÊñá‰ª∂Âêç</span><span class="o">`</span><span class="n">File</span><span class="o">`</span><span class="err">„ÄÅÂΩìÂâç‰ΩçÁΩÆ</span><span class="o">`</span><span class="k">Position</span><span class="o">`</span><span class="w"> 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøõÂÖ•‰ªéÊï∞ÊçÆÂ∫ìÂÆπÂô®ÔºåÈÖçÁΩÆ‰∏ª‰ªéÂ§çÂà∂Ôºö</p>
<ol>
<li>ËøõÂÖ•‰ªéÊï∞ÊçÆÂ∫ìÂÆπÂô®Ôºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it mysql-slave /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>ËøõÂÖ•Êï∞ÊçÆÂ∫ì</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">mysql -uroot -p
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>ÈÖçÁΩÆ‰ªéÊï∞ÊçÆÂ∫ìÊâÄÂ±ûÁöÑ‰∏ªÊï∞ÊçÆÂ∫ìÔºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- Ê†ºÂºèÔºö
</span></span></span><span class="line"><span class="cl"><span class="c1">-- change master to master_host=&#39;ÂÆø‰∏ªÊú∫ip&#39;,master_user=&#39;‰∏ªÊï∞ÊçÆÂ∫ìÈÖçÁΩÆÁöÑ‰∏ª‰ªéÂ§çÂà∂Áî®Êà∑Âêç&#39;,master_password=&#39;‰∏ªÊï∞ÊçÆÂ∫ìÈÖçÁΩÆÁöÑ‰∏ª‰ªéÂ§çÂà∂Áî®Êà∑ÂØÜÁ†Å&#39;,master_port=ÂÆø‰∏ªÊú∫‰∏ªÊï∞ÊçÆÂ∫ìÁ´ØÂè£,master_log_file=&#39;‰∏ªÊï∞ÊçÆÂ∫ì‰∏ª‰ªéÂêåÊ≠•Áä∂ÊÄÅÁöÑÊñá‰ª∂ÂêçFile&#39;,master_log_pos=‰∏ªÊï∞ÊçÆÂ∫ì‰∏ª‰ªéÂêåÊ≠•Áä∂ÊÄÅÁöÑPosition,master_connect_retry=ËøûÊé•Â§±Ë¥•ÈáçËØïÊó∂Èó¥Èó¥ÈöîÔºàÁßíÔºâ;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">change</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">master_host</span><span class="o">=</span><span class="s1">&#39;192.168.xxx.xxx&#39;</span><span class="p">,</span><span class="n">master_user</span><span class="o">=</span><span class="s1">&#39;slave&#39;</span><span class="p">,</span><span class="n">master_password</span><span class="o">=</span><span class="s1">&#39;123456&#39;</span><span class="p">,</span><span class="n">master_port</span><span class="o">=</span><span class="mi">3307</span><span class="p">,</span><span class="n">master_log_file</span><span class="o">=</span><span class="s1">&#39;mall-mysql-bin.000001&#39;</span><span class="p">,</span><span class="n">master_log_pos</span><span class="o">=</span><span class="mi">769</span><span class="p">,</span><span class="n">master_connect_retry</span><span class="o">=</span><span class="mi">30</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>Êü•Áúã‰∏ª‰ªéÂêåÊ≠•Áä∂ÊÄÅÔºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">#</span><span class="w"> </span><span class="err">\</span><span class="k">G</span><span class="w"> </span><span class="err">ÂèØ‰ª•Â∞ÜÊ®™ÂêëÁöÑÁªìÊûúÈõÜË°®Ê†ºËΩ¨Êç¢ÊàêÁ∫µÂêëÂ±ïÁ§∫„ÄÇ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">slave</span><span class="w"> </span><span class="n">statusÁöÑÂ≠óÊÆµÊØîËæÉÂ§ö</span><span class="err">ÔºåÁ∫µÂêëÂ±ïÁ§∫ÊØîÂèãÂ•Ω</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">show</span><span class="w"> </span><span class="n">slave</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="err">\</span><span class="k">G</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Èô§‰∫ÜÂ±ïÁ§∫ÂàöÂàöÈÖçÁΩÆÁöÑ‰∏ªÊï∞ÊçÆÂ∫ì‰ø°ÊÅØÂ§ñÔºå‰∏ªË¶ÅÂÖ≥Ê≥® <code>Slave_IO_Running</code>„ÄÅ<code>Slave_SQL_Running</code>„ÄÇÁõÆÂâç‰∏§‰∏™ÂÄºÂ∫îËØ•ÈÉΩ‰∏∫ <code>No</code>ÔºåË°®Á§∫ËøòÊ≤°ÊúâÂºÄÂßã„ÄÇ</p>
<ol start="5">
<li>ÂºÄÂêØ‰∏ª‰ªéÂêåÊ≠•Ôºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">start</span><span class="w"> </span><span class="n">slave</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="6">
<li>ÂÜçÊ¨°Êü•Áúã‰∏ª‰ªéÂêåÊ≠•Áä∂ÊÄÅÔºå<code>Slave_IO_Running</code>„ÄÅ<code>Slave_SQL_Running</code>ÈÉΩÂèò‰∏∫<code>Yes</code>„ÄÇ</li>
</ol>
<p>‰∏ª‰ªéÂ§çÂà∂ÊµãËØïÔºö</p>
<ol>
<li>Âú®‰∏ªÊï∞ÊçÆÂ∫ì‰∏äÊñ∞Âª∫Â∫ì„ÄÅ‰ΩøÁî®Â∫ì„ÄÅÊñ∞Âª∫Ë°®„ÄÅÊèíÂÖ•Êï∞ÊçÆ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">db01</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">db01</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;abc&#39;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>Âú®‰ªéÊï∞ÊçÆÂ∫ì‰∏ä‰ΩøÁî®Â∫ì„ÄÅÊü•ÁúãËÆ∞ÂΩï</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">show</span><span class="w"> </span><span class="n">databases</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">db01</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t1</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h1 id="10-dockerÂÆâË£Öredis"><strong>10-DockerÂÆâË£ÖRedis</strong>
</h1><h2 id="dockerÂÆâË£Öredis">DockerÂÆâË£ÖRedis
</h2><p>‰ª• Redis 6.0.8 ‰∏∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker pull redis:6.0.8
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂçïÊú∫ÁâàÂÆâË£Ö">ÂçïÊú∫ÁâàÂÆâË£Ö
</h2><h3 id="ÁÆÄÂçïÁâà-redis">ÁÆÄÂçïÁâà Redis
</h3><p>ÁÆÄÂçïÁöÑÂêØÂä®RedisÂÆπÂô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -p 6379:6379 -d redis:6.0.8
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÆÄÂçïÁâàÊ≤°ÊúâÈÖçÁΩÆÂÆπÂô®Âç∑Êò†Â∞ÑÔºåÂΩìÂÆπÂô®Ë¢´Âà†Èô§Êó∂Êï∞ÊçÆÊó†Ê≥ïÊÅ¢Â§ç„ÄÇ</p>
<h3 id="ÂÆûÈôÖÂ∫îÁî®Áâàredis">ÂÆûÈôÖÂ∫îÁî®ÁâàRedis
</h3><p>ÈÖçÁΩÆÊñá‰ª∂„ÄÅÊï∞ÊçÆÊñá‰ª∂ÈÉΩÂíåÂÆπÂô®Âç∑ËøõË°åÊò†Â∞Ñ„ÄÇ</p>
<p>Ê≠•È™§Ôºö</p>
<ol>
<li>ÂÆø‰∏ªÊú∫ÂàõÂª∫ÁõÆÂΩï<code>/app/redis</code></li>
<li>Âú®<code>/app/redis</code>‰∏ãÂàõÂª∫Êñá‰ª∂<code>redis.conf</code>Ôºå‰∏ªË¶Å‰øÆÊîπ‰ª•‰∏ãÂá†È°πÈÖçÁΩÆ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl"># ÂºÄÂêØÂØÜÁ†ÅÈ™åËØÅÔºàÂèØÈÄâÔºâ
</span></span><span class="line"><span class="cl">requirepass 123
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># ÂÖÅËÆ∏redisÂ§ñÂú∞ËøûÊé•ÔºåÈúÄË¶ÅÊ≥®ÈáäÊéâÁªëÂÆöÁöÑIP
</span></span><span class="line"><span class="cl"># bind 127.0.0.1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># ÂÖ≥Èó≠‰øùÊä§Ê®°ÂºèÔºàÂèØÈÄâÔºâ
</span></span><span class="line"><span class="cl">protected-mode no
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Ê≥®ÈáäÊéâdaemonize yesÔºåÊàñËÄÖÈÖçÁΩÆÊàê daemonize no„ÄÇÂõ†‰∏∫ËØ•ÈÖçÁΩÆÂíå docker run‰∏≠ÁöÑ -d ÂèÇÊï∞ÂÜ≤Á™ÅÔºå‰ºöÂØºËá¥ÂÆπÂô®‰∏ÄÁõ¥ÂêØÂä®Â§±Ë¥•
</span></span><span class="line"><span class="cl">daemonize no
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># ÂºÄÂêØredisÊï∞ÊçÆÊåÅ‰πÖÂåñÔºå ÔºàÂèØÈÄâÔºâ
</span></span><span class="line"><span class="cl">appendonly yes  
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âç≥ÊúÄÂêéÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏∫Ôºö</p>
<ol start="3">
<li>ÂêØÂä®dockerÂÆπÂô®ÔºöÔºàÂõ†‰∏∫Ë¶Å‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÊâÄ‰ª•ÈúÄË¶ÅÊåáÂÆöÂÆπÂô®ËøêË°åÁöÑÂëΩ‰ª§‰∏∫<code>redis-server ÂÆπÂô®ÂÜÖÈÖçÁΩÆÊñá‰ª∂Ë∑ØÂæÑ</code>Ôºâ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -d -p 63789:6379 --name redis --privileged<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -v /app/redis/redis.conf:/etc/redis/redis.conf <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           -v /app/redis/data:/data <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           redis:6.0.8 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>           redis-server /etc/redis/redis.conf
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÈõÜÁæ§Â≠òÂÇ®ÁÆóÊ≥ï">ÈõÜÁæ§Â≠òÂÇ®ÁÆóÊ≥ï
</h2><h3 id="ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®ÁÆóÊ≥ï">ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®ÁÆóÊ≥ï
</h3><p>ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®ÁöÑÂ∏∏ËßÅÁÆóÊ≥ïÔºö</p>
<ul>
<li>
<p>ÂìàÂ∏åÂèñ‰ΩôÁÆóÊ≥ïÂàÜÂå∫</p>
</li>
<li>
<p>‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÂàÜÂå∫</p>
</li>
<li>
<p>ÂìàÂ∏åÊßΩÁÆóÊ≥ïÂàÜÂå∫</p>
</li>
</ul>
<h3 id="ÂìàÂ∏åÂèñ‰ΩôÁÆóÊ≥ï">ÂìàÂ∏åÂèñ‰ΩôÁÆóÊ≥ï
</h3><p>ÁÆóÊ≥ïÊèèËø∞Ôºö<code>hash(key) % N</code>ÔºàÂÖ∂‰∏≠Ôºå<code>key</code>ÊòØË¶ÅÂ≠òÂÖ•RedisÁöÑÈîÆÂêçÔºå<code>N</code>ÊòØRedisÈõÜÁæ§ÁöÑÊú∫Âô®Âè∞Êï∞Ôºâ„ÄÇÁî®Êà∑ÊØèÊ¨°ËØªÂÜôÊìç‰ΩúÔºåÈÉΩÊòØÊ†πÊçÆ‰º†ÂÖ•ÁöÑÈîÆÂêçÁªèËøáÂìàÂ∏åËøêÁÆóÔºåÂØπÊú∫Âô®Âè∞Êï∞Âèñ‰ΩôÂÜ≥ÂÆöËØ•ÈîÆÂ≠òÂÇ®Âú®Âì™Âè∞ÊúçÂä°Âô®‰∏ä„ÄÇ</p>
<p>‰ºòÁÇπÔºöÁÆÄÂçïÁõ¥Êé•ÊúâÊïàÔºåÂè™ÈúÄË¶ÅÈ¢Ñ‰º∞Â•ΩÊï∞ÊçÆËßÑÂàíÂ•ΩËäÇÁÇπÔºåÂ∞±ËÉΩ‰øùËØÅ‰∏ÄÊÆµÊó∂Èó¥ÁöÑÊï∞ÊçÆÊîØÊíë„ÄÇ‰ΩøÁî®HashÁÆóÊ≥ïËÆ©Âõ∫ÂÆöÁöÑ‰∏ÄÈÉ®ÂàÜËØ∑Ê±ÇËêΩÂà∞Âêå‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÔºåËøôÊ†∑ÊØèÂè∞ÊúçÂä°Âô®Âõ∫ÂÆöÂ§ÑÁêÜ‰∏ÄÈÉ®ÂàÜËØ∑Ê±ÇÔºàÂπ∂Áª¥Êä§Ëøô‰∫õËØ∑Ê±ÇÁöÑ‰ø°ÊÅØÔºâÔºåËµ∑Âà∞Ë¥üËΩΩÂùáË°°+ÂàÜËÄåÊ≤ª‰πãÁöÑ‰ΩúÁî®„ÄÇ</p>
<p>Áº∫ÁÇπÔºöÂéüÊù•ËßÑÂàíÂ•ΩÁöÑËäÇÁÇπÔºåÂ¶ÇÊûúËøõË°å‰∫ÜÊâ©ÂÆπÊàñËÄÖÁº©ÂÆπÔºåÂØºËá¥ËäÇÁÇπÊúâÂèòÂä®ÔºåÊò†Â∞ÑÂÖ≥Á≥ªÈúÄË¶ÅÈáçÊñ∞ËøõË°åËÆ°ÁÆó„ÄÇÂú®ÊúçÂä°Âô®‰∏™Êï∞Âõ∫ÂÆö‰∏çÂèòÊó∂Ê≤°ÈóÆÈ¢òÔºåÂ¶ÇÊûúÈúÄË¶ÅÂºπÊÄßÊâ©ÂÆπÊàñËÄÖÊïÖÈöúÂÅúÊú∫ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂéüÊù•ÂèñÊ®°ÂÖ¨Âºè‰∏≠ÁöÑ <code>N</code>Â∞±‰ºöÂèëÁîüÂèòÂåñÔºåÊ≠§Êó∂ÁªèËøáÂèñÊ®°ËøêÁÆóÁöÑÁªìÊûúÂ∞±‰ºöÂèëÁîüÂæàÂ§ßÂèòÂåñÔºåÂØºËá¥Ê†πÊçÆÂÖ¨ÂºèËé∑ÂèñÁöÑÊúçÂä°Âô®ÂèòÂæó‰∏çÂèØÊéß„ÄÇ</p>
<h3 id="‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ï">‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ï
</h3><p>ÁÆóÊ≥ïËÉåÊôØÔºö‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÊòØ<strong>‰∏∫‰∫ÜËß£ÂÜ≥ÂìàÂ∏åÂèñ‰ΩôÁÆóÊ≥ï‰∏≠ÁöÑÂàÜÂ∏ÉÂºèÁºìÂ≠òÊï∞ÊçÆÂèòÂä®ÂíåÊò†Â∞ÑÈóÆÈ¢ò</strong>„ÄÇÂΩìÊúçÂä°Âô®‰∏™Êï∞ÂèëÁîüÂèòÂåñÊó∂ÔºåÂ∞ΩÈáèÂáèÂ∞ëÂΩ±ÂìçÂà∞ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Âô®ÁöÑÊò†Â∞ÑÂÖ≥Á≥ª„ÄÇ</p>
<p>ÁÆóÊ≥ïÊèèËø∞Ôºö</p>
<p>‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÂøÖÁÑ∂Êúâ‰∏™hashÂáΩÊï∞Âπ∂ÊåâÁÖßÁÆóÊ≥ï‰∫ßÁîüHashÂÄºÔºåËøô‰∏™ÁÆóÊ≥ïÁöÑÊâÄÊúâÂèØËÉΩÂìàÂ∏åÂÄº‰ºöÊûÑÊàê‰∏Ä‰∏™ÂÖ®ÈáèÈõÜÔºåËøô‰∏™ÈõÜÂêàÂèØ‰ª•Êàê‰∏∫‰∏Ä‰∏™HashÂå∫Èó¥<code>[0, 2^32 - 1]</code>ÔºåËøôÊòØ‰∏Ä‰∏™Á∫øÊÄßÁ©∫Èó¥„ÄÇ‰ΩÜÊòØÂú®Ëøô‰∏™ÁÆóÊ≥ï‰∏≠ÔºåÊàë‰ª¨ÈÄöËøáÈÄÇÂΩìÁöÑÈÄªËæëÊéßÂà∂Â∞ÜÂÆÉÈ¶ñÂ∞æÁõ∏ËøûÔºà<code>0 = 2^32</code>ÔºâÔºåËøôÊ†∑ËÆ©ÂÆÉÈÄªËæë‰∏äÂΩ¢Êàê‰∫Ü‰∏Ä‰∏™ÁéØÂΩ¢Á©∫Èó¥„ÄÇ</p>
<p>ÂÆÉ‰πüÊòØÊåâÁÖß‰ΩøÁî®ÂèñÊ®°ÁöÑÊñπÂºè„ÄÇÂâçÈù¢ÁöÑÂìàÂ∏åÂèñ‰ΩôÁÆóÊ≥ïÊòØÂØπËäÇÁÇπ‰∏™Êï∞ËøõË°åÂèñÊ®°ÔºåËÄå‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÊòØÂØπ <code>2^32</code>ÂèñÊ®°„ÄÇ</p>
<p>ÁÆÄÂçïÊù•ËØ¥Ôºå‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ïÂ∞ÜÊï¥‰∏™ÂìàÂ∏åÂÄºÁ©∫Èó¥ÁªÑÊàê‰∏Ä‰∏™ËôöÊãüÁöÑÂúÜÁéØ„ÄÇÂ¶ÇÂÅáËÆæÊüê‰∏™ÂìàÂ∏åÂáΩÊï∞<code>H</code>ÁöÑÂÄºÁ©∫Èó¥‰∏∫ <code>0</code>Âà∞<code>2^32 - 1</code>ÔºàÂç≥ÂìàÂ∏åÂÄºÊòØ‰∏Ä‰∏™32‰ΩçÊó†Á¨¶Âè∑Êï¥ÂΩ¢ÔºâÔºåÊï¥‰∏™ÂìàÂ∏åÁéØÂ¶Ç‰∏ãÂõæÔºöÊï¥‰∏™Á©∫Èó¥ÊåâÈ°∫Êó∂ÈíàÊñπÂêëÁªÑÁªáÔºåÂúÜÁéØÁöÑÊ≠£‰∏äÊñπÁöÑÁÇπ‰ª£Ë°®0Ôºå0ÁÇπÂè≥‰æßÁöÑÁ¨¨‰∏Ä‰∏™ÁÇπ‰ª£Ë°®1Ôºå‰ª•Ê≠§Á±ªÊé®Ôºå2„ÄÅ3„ÄÅ4&hellip;&hellip;.Áõ¥Âà∞<code>2^32 - 1</code>Ôºå‰πüÂ∞±ÊòØËØ¥0ÁÇπÂ∑¶‰æßÁöÑÁ¨¨‰∏Ä‰∏™ÁÇπ‰ª£Ë°® <code>2^32 - 1</code>„ÄÇ0 Âíå <code>2^32 - 1</code>Âú®Èõ∂ÁÇπÈíüÊñπÂêëÈáçÂêàÔºåÊàë‰ª¨ÊääËøô‰∏™Áî± <code>2^32</code>‰∏™ÁÇπÁªÑÊàêÁöÑÂúÜÁéØÁß∞‰∏∫HashÁéØ„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash01.jpg"
	width="413"
	height="439"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash01_hu13685704357302040426.jpg 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash01_hu904947526921931736.jpg 1024w"
	loading="lazy"
	
		alt="hash01"
	
	
		class="gallery-image" 
		data-flex-grow="94"
		data-flex-basis="225px"
	
></p>
<p>Êúâ‰∫ÜÂìàÂ∏åÁéØ‰πãÂêéÔºåËøòÈúÄË¶ÅËøõË°åËäÇÁÇπÊò†Â∞ÑÔºåÂ∞ÜÈõÜÁæ§‰∏≠ÂêÑ‰∏™IPËäÇÁÇπÊò†Â∞ÑÂà∞ÁéØ‰∏äÁöÑÊüê‰∏Ä‰∏™‰ΩçÁΩÆ„ÄÇ</p>
<p>Â∞ÜÂêÑ‰∏™ÊúçÂä°Âô®‰ΩøÁî®HashËøõË°å‰∏Ä‰∏™ÂìàÂ∏åÔºåÂÖ∑‰ΩìÂèØ‰ª•ÈÄâÊã©ÊúçÂä°Âô®ÁöÑIPÊàñ‰∏ªÊú∫Âêç‰Ωú‰∏∫ÂÖ≥ÈîÆÂ≠óËøõË°åÂìàÂ∏å„ÄÇËøôÊ†∑ÊØèÂè∞Êú∫Âô®Â∞±ËÉΩÁ°ÆÂÆöÂÖ∂Âú®ÂìàÂ∏åÁéØ‰∏äÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<p>ÂÅáÂ¶Ç4‰∏™ËäÇÁÇπNodeA„ÄÅB„ÄÅC„ÄÅDÔºåÁªèËøáIPÂú∞ÂùÄÁöÑÂìàÂ∏åÂáΩÊï∞ËÆ°ÁÆóÔºà<code>hash(ip)</code>ÔºâÔºå‰ΩøÁî®IPÂú∞ÂùÄÂìàÂ∏åÂÄºÂêéÂú®ÁéØÁ©∫Èó¥ÁöÑ‰ΩçÁΩÆÂ¶Ç‰∏ãÔºö</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash02.jpg"
	width="653"
	height="682"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash02_hu2360171310765157114.jpg 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash02_hu8269989832877052150.jpg 1024w"
	loading="lazy"
	
		alt="hash02"
	
	
		class="gallery-image" 
		data-flex-grow="95"
		data-flex-basis="229px"
	
></p>
<p><code>key</code>ËêΩÂà∞ÊúçÂä°Âô®ÁöÑËêΩÈîÆËßÑÂàô„ÄÇÂΩìÊàë‰ª¨ÈúÄË¶ÅÂ≠òÂÇ®‰∏Ä‰∏™<code>key</code>ÈîÆÂÄºÂØπÊó∂ÔºåÈ¶ñÂÖàËÆ°ÁÆó<code>key</code>ÁöÑ<code>hash</code>ÂÄºÔºà<code>hash(key)</code>ÔºâÔºåÂ∞ÜËøô‰∏™<code>key</code>‰ΩøÁî®Áõ∏ÂêåÁöÑÂáΩÊï∞hashÔºåËÆ°ÁÆóÂá∫ÂìàÂ∏åÂÄºÂπ∂Á°ÆÂÆöÊ≠§Êï∞ÊçÆÂú®ÁéØ‰∏äÁöÑ‰ΩçÁΩÆÔºå‰ªéÊ≠§‰ΩçÁΩÆÊ≤øÁéØÈ°∫Êó∂Èíà‚ÄúË°åËµ∞‚ÄùÔºåÁ¨¨‰∏ÄÂè∞ÈÅáÂà∞ÁöÑÊúçÂä°Âô®Â∞±ÊòØÂÖ∂Â∫îËØ•ÂÆö‰ΩçÂà∞ÁöÑÊúçÂä°Âô®ÔºåÂπ∂Â∞ÜËØ•ÈîÆÂÄºÂØπÂ≠òÂÇ®Â≠óËØ•ËäÇÁÇπ‰∏ä„ÄÇ</p>
<p>ÂÅáÂ¶ÇÊàë‰ª¨ÊúâObjectA„ÄÅB„ÄÅC„ÄÅDÂõõ‰∏™Êï∞ÊçÆÂØπË±°ÔºåÁªèËøáÂìàÂ∏åËÆ°ÁÆóÂêéÔºåÂú®ÁéØÁ©∫Èó¥‰∏äÁöÑ‰ΩçÁΩÆÂ¶Ç‰∏ãÔºöÊ†πÊçÆ‰∏ÄËá¥ÊÄßhashÁÆóÊ≥ïÔºåÊï∞ÊçÆA‰ºöË¢´ÂÆö‰ΩçÂà∞NodeA‰∏äÔºåBË¢´ÂÆö‰ΩçÂà∞NodeB‰∏äÔºåCË¢´ÂÆö‰ΩçÂà∞NodeC‰∏äÔºåDË¢´ÂÆö‰ΩçÂà∞NodeD‰∏ä„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash03.jpg"
	width="640"
	height="657"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash03_hu2849148150806299457.jpg 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash03_hu11975313045933705383.jpg 1024w"
	loading="lazy"
	
		alt="hash03"
	
	
		class="gallery-image" 
		data-flex-grow="97"
		data-flex-basis="233px"
	
></p>
<p>ÂÅáËÆæNodeCÂÆïÊú∫ÔºåÂèØ‰ª•ÁúãÂà∞Ê≠§Êó∂ÂØπË±°A„ÄÅB„ÄÅD‰∏ç‰ºöÂèóÂà∞ÂΩ±ÂìçÔºåÂè™ÊúâCÂØπË±°Ë¢´ÈáçÊñ∞ÂÆö‰ΩçÂà∞NodeD„ÄÇ</p>
<p>‰∏ÄËà¨ÁöÑÔºåÂú®‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ï‰∏≠ÔºåÂ¶ÇÊûú‰∏ÄÂè∞ÊúçÂä°Âô®‰∏çÂèØÁî®ÔºåÂàôÂèóÂΩ±ÂìçÁöÑÊï∞ÊçÆ‰ªÖ‰ªÖÊòØÊ≠§ÊúçÂä°Âô®Âà∞ÂÖ∂ÁéØÁ©∫Èó¥‰∏≠Ââç‰∏ÄÂè∞ÊúçÂä°Âô®ÔºàÂç≥Ê≤øÁùÄÈÄÜÊó∂ÈíàÊñπÂêëË°åËµ∞ÈÅáÂà∞ÁöÑÁ¨¨‰∏ÄÂè∞ÊúçÂä°Âô®Ôºâ‰πãÈó¥ÁöÑÊï∞ÊçÆÔºåÂÖ∂‰ªñ‰∏ç‰ºöÂèóÂà∞ÂΩ±Âìç„ÄÇ</p>
<p>Âç≥ÔºöÂÅáËÆæNodeCÂÆïÊú∫ÔºåÂè™‰ºöÂΩ±ÂìçÂà∞HashÂÆö‰ΩçÂà∞NodeBÂà∞NodeC‰πãÈó¥ÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏îËøô‰∫õÊï∞ÊçÆ‰ºöË¢´ËΩ¨ÁßªÂà∞NodeDËøõË°åÂ≠òÂÇ®„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash04.jpg"
	width="421"
	height="435"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash04_hu1037251975870481196.jpg 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash04_hu16055805743191088506.jpg 1024w"
	loading="lazy"
	
		alt="hash04"
	
	
		class="gallery-image" 
		data-flex-grow="96"
		data-flex-basis="232px"
	
></p>
<p>ÂÅáÂ¶ÇÈúÄË¶ÅÊâ©ÂÆπÂ¢ûÂä†‰∏ÄÂè∞ËäÇÁÇπNodeXÔºåNodeXÁöÑ<code>hash(ip)</code>‰Ωç‰∫éNodeBÂíåNodeC‰πãÈó¥ÔºåÈÇ£ÂèóÂà∞ÂΩ±ÂìçÁöÑÂ∞±ÊòØNodeB Âà∞ NodeX ‰πãÈó¥ÁöÑÊï∞ÊçÆ„ÄÇÈáçÊñ∞Â∞ÜBÂà∞XÁöÑÊï∞ÊçÆÂΩïÂÖ•Âà∞XËäÇÁÇπ‰∏äÂç≥ÂèØÔºå‰∏ç‰ºöÂØºËá¥HashÂèñ‰ΩôÂÖ®ÈÉ®Êï∞ÊçÆÈáçÊñ∞Ê¥óÁâåÁöÑÂêéÊûú„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash05.jpg"
	width="635"
	height="660"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash05_hu2170455223849715486.jpg 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash05_hu9824778234852266788.jpg 1024w"
	loading="lazy"
	
		alt="hash05"
	
	
		class="gallery-image" 
		data-flex-grow="96"
		data-flex-basis="230px"
	
></p>
<p>‰ΩÜÊòØHashÁéØ‰ºöÂ≠òÂú®Êï∞ÊçÆÂÄæÊñúÈóÆÈ¢ò„ÄÇ</p>
<p>‰∏ÄËá¥ÊÄßHashÁÆóÊ≥ïÂú®ÊúçÂä°ËäÇÁÇπÂ§™Â∞ëÊó∂ÔºåÂÆπÊòìÂõ†‰∏∫ËäÇÁÇπÂàÜÂ∏É‰∏çÂùáÂåÄËÄåÈÄ†ÊàêÊï∞ÊçÆÂÄæÊñúÔºàË¢´ÁºìÂ≠òÁöÑÂØπË±°ÈÉΩÈõÜ‰∏≠Âà∞Êüê‰∏ÄÂè∞ÊàñÊüêÂá†Âè∞ÊúçÂä°Âô®Ôºâ„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash06.webp"
	width="444"
	height="473"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash06_hu2732235108979521478.webp 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash06_hu12244106516663788417.webp 1024w"
	loading="lazy"
	
		alt="hash06"
	
	
		class="gallery-image" 
		data-flex-grow="93"
		data-flex-basis="225px"
	
></p>
<p>‰∏∫‰∫ÜËß£ÂÜ≥Êï∞ÊçÆÂÄæÊñúÈóÆÈ¢òÔºå‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÂºïÂÖ•‰∫ÜËôöÊãüËäÇÁÇπÊú∫Âà∂„ÄÇ</p>
<p>ÂØπÊØè‰∏Ä‰∏™ÊúçÂä°ËäÇÁÇπËÆ°ÁÆóÂ§ö‰∏™ÂìàÂ∏åÔºåÊØè‰∏™ËÆ°ÁÆóÁªìÊûú‰ΩçÁΩÆÈÉΩÊîæÁΩÆ‰∏Ä‰∏™Ê≠§ÊúçÂä°ËäÇÁÇπÔºåÁß∞‰∏∫ËôöÊãüËäÇÁÇπ„ÄÇÂÖ∑‰ΩìÂÅöÊ≥ïÂèØ‰ª•ÂÖàÁ°ÆÂÆöÊØè‰∏™Áâ©ÁêÜËäÇÁÇπÂÖ≥ËÅîÁöÑËôöÊãüËäÇÁÇπÊï∞ÈáèÔºåÁÑ∂ÂêéÂú®IPÊàñ‰∏ªÊú∫ÂêçÂêéÈù¢Âä†‰∏äÁºñÂè∑„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÂèØ‰ª•ÂØπNodeAËäÇÁÇπËôöÊãüÂá∫ NodeA#1„ÄÅNodeA#2„ÄÅNodeA#3ÔºåÂØπNodeBËôöÊãüÂá∫NodeB#1„ÄÅNodeB#2„ÄÅNodeB#3ÁöÑËäÇÁÇπÔºåÂΩ¢ÊàêÂÖ≠‰∏™ËôöÊãüËäÇÁÇπ„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash07.jpg"
	width="638"
	height="666"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash07_hu17833186865241087784.jpg 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/hash07_hu3244121677151060295.jpg 1024w"
	loading="lazy"
	
		alt="hash07"
	
	
		class="gallery-image" 
		data-flex-grow="95"
		data-flex-basis="229px"
	
></p>
<p>‰ºòÁÇπÔºöÂä†ÂÖ•ÂíåÂà†Èô§ËäÇÁÇπÊó∂ÔºåÂè™‰ºöÂΩ±ÂìçÂìàÂ∏åÁéØ‰∏≠È°∫Êó∂ÈíàÊñπÂêëÁõ∏ÈÇªËäÇÁÇπÔºåÂØπÂÖ∂‰ªñËäÇÁÇπÊó†ÂΩ±Âìç„ÄÇ</p>
<p>Áº∫ÁÇπÔºöÊï∞ÊçÆÁöÑÂàÜÂ∏ÉÂíåËäÇÁÇπÁöÑ‰ΩçÁΩÆÊúâÂÖ≥ÔºåÂõ†‰∏∫Ëøô‰∫õËäÇÁÇπ‰∏çÊòØÂùáÂåÄÂàÜÂ∏ÉÂú®ÂìàÂ∏åÁéØ‰∏äÁöÑÔºåÊâÄ‰ª•Âú®Êï∞ÊçÆËøõË°åÂ≠òÂÇ®Êó∂Ëææ‰∏çÂà∞ÂùáÂåÄÈÉ®ÂàÜÁöÑÊïàÊûú„ÄÇ</p>
<h3 id="ÂìàÂ∏åÊßΩÂàÜÂå∫">ÂìàÂ∏åÊßΩÂàÜÂå∫
</h3><p>ÂìàÂ∏åÊßΩÂàÜÂå∫ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥‰∏ÄËá¥ÊÄßÂìàÂ∏åÁÆóÊ≥ïÁöÑÊï∞ÊçÆÂÄæÊñúÈóÆÈ¢ò„ÄÇ</p>
<p>ÂìàÂ∏åÊßΩÂÆûË¥®‰∏äÂ∞±ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÊï∞ÁªÑ <code>[0, 2^14 - 1]</code>ÂΩ¢ÊàêÁöÑ hash slotÁ©∫Èó¥„ÄÇ</p>
<p>ÁõÆÁöÑÊòØ‰∏∫‰∫ÜËß£ÂÜ≥ÂùáÂåÄÂàÜÈÖçÁöÑÈóÆÈ¢ò„ÄÇÂú®Êï∞ÊçÆÂíåËäÇÁÇπ‰πãÈó¥ÂèàÂä†ÂÖ•‰∫Ü‰∏ÄÂ±ÇÔºåÊääËøôÂ±ÇÁß∞‰πã‰∏∫ÊßΩÔºàslotÔºâÔºåÁî®‰∫éÁÆ°ÁêÜÊï∞ÊçÆÂíåËäÇÁÇπ‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÇÂ∞±Áõ∏ÂΩì‰∫éËäÇÁÇπ‰∏äÊîæÁöÑÊòØÊßΩÔºåÊßΩÈáåÈù¢ÊîæÁöÑÊòØÊï∞ÊçÆ„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/slot01.png"
	width="723"
	height="218"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/slot01_hu4202728621939854112.png 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/slot01_hu7015128119803337554.png 1024w"
	loading="lazy"
	
		alt="slot01"
	
	
		class="gallery-image" 
		data-flex-grow="331"
		data-flex-basis="795px"
	
></p>
<p>ÊßΩËß£ÂÜ≥ÁöÑÊòØÁ≤íÂ∫¶ÈóÆÈ¢òÔºåÁõ∏ÂΩì‰∫éÊääÁ≤íÂ∫¶ÂèòÂ§ß‰∫ÜÔºåËøôÊ†∑‰æø‰∫éÊï∞ÊçÆÁßªÂä®„ÄÇ</p>
<p>ÂìàÂ∏åËß£ÂÜ≥ÁöÑÊòØÊò†Â∞ÑÈóÆÈ¢òÔºå‰ΩøÁî®<code>key</code>ÁöÑÂìàÂ∏åÂÄºÊù•ËÆ°ÁÆóÊâÄÂú®ÁöÑÊßΩÔºå‰æø‰∫éÊï∞ÊçÆÂàÜÈÖç„ÄÇ</p>
<p>‰∏Ä‰∏™ÈõÜÁæ§Âè™ËÉΩÊúâ 16394‰∏™ÊßΩÔºåÁºñÂè∑ 0 - 16383Ôºà<code>2^14 - 1</code>Ôºâ„ÄÇËøô‰∫õÊßΩ‰ºöÂàÜÈÖçÁªôÈõÜÁæ§‰∏≠ÊâÄÊúâÁöÑ‰∏ªËäÇÁÇπÔºåÂàÜÈÖçÁ≠ñÁï•Ê≤°ÊúâË¶ÅÊ±Ç„ÄÇÂèØ‰ª•ÊåáÂÆöÂì™‰∫õÁºñÂè∑ÁöÑÊßΩÂàÜÈÖçÁªôÂì™‰∏™‰∏ªËäÇÁÇπÔºåÈõÜÁæ§‰ºöËÆ∞ÂΩïËäÇÁÇπÂíåÊßΩÁöÑÂØπÂ∫îÂÖ≥Á≥ª„ÄÇ</p>
<p>Ëß£ÂÜ≥‰∫ÜËäÇÁÇπÂíåÊßΩÁöÑÂÖ≥Á≥ªÂêéÔºåÊé•‰∏ãÊù•Â∞±ÈúÄË¶ÅÂØπ<code>key</code>Ê±ÇÂìàÂ∏åÂÄºÔºåÁÑ∂ÂêéÂØπ16384Âèñ‰ΩôÔºåÊ†πÊçÆ‰ΩôÊï∞ÂÜ≥ÂÆö<code>key</code>ËêΩÂà∞Âì™‰∏™ÊßΩÈáå„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">slot = CRC16(key) % 16384
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ª•ÊßΩ‰∏∫Âçï‰ΩçÁßªÂä®Êï∞ÊçÆÔºåÂõ†‰∏∫ÊßΩÁöÑÊï∞ÁõÆÊòØÂõ∫ÂÆöÁöÑÔºåÂ§ÑÁêÜËµ∑Êù•ÊØîËæÉÂÆπÊòìÔºåËøôÊ†∑Êï∞ÊçÆÁßªÂä®ÈóÆÈ¢òÂ∞±Ëß£ÂÜ≥‰∫Ü„ÄÇ</p>
<h3 id="redisÈõÜÁæ§Â≠òÂÇ®Á≠ñÁï•">RedisÈõÜÁæ§Â≠òÂÇ®Á≠ñÁï•
</h3><p>RedisÈõÜÁæ§‰ΩøÁî®ÁöÑÂ∞±ÊòØÂìàÂ∏åÊßΩ„ÄÇRedisÈõÜÁæ§Êúâ16384‰∏™ÂìàÂ∏åÊßΩÔºåÊØè‰∏™<code>key</code>ÈÄöËøá<code>CRC16</code>Ê†°È™åÂêéÂØπ16384ÂèñÊ®°Êù•ÂÜ≥ÂÆöÊîæÁΩÆÂú®Âì™‰∏™ÊßΩÔºåÈõÜÁæ§ÁöÑÊØè‰∏™ËäÇÁÇπË¥üË¥£‰∏ÄÈÉ®ÂàÜhashÊßΩ„ÄÇ</p>
<p>ÂìàÂ∏åÊßΩÊï∞Èáè16384Ôºà<code>2^14</code>ÔºâÁöÑÂÜ≥ÂÆöÂéüÂõ†Ôºö</p>
<p><code>CRC16</code>ÁÆóÊ≥ï‰∫ßÁîüÁöÑhashÂÄºÊúâ 16bitÔºåËØ•ÁÆóÊ≥ïÂèØ‰ª•‰∫ßÁîü <code>2^16</code> = 65536‰∏™ÂÄº„ÄÇ‰ΩÜÊòØ‰∏∫‰∫ÜÂøÉË∑≥Êñπ‰æøÂíåÊï∞ÊçÆ‰º†ËæìÊúÄÂ§ßÂåñÔºåÊßΩÁöÑÊï∞ÈáèÂè™ËÉΩÊúâ <code>2^14</code>‰∏™„ÄÇ</p>
<ol>
<li>Â¶ÇÊûúÊßΩ‰ΩçÊï∞Èáè‰∏∫65535‰∏™ÔºåÈÇ£‰πàÂèëÈÄÅÂøÉË∑≥‰ø°ÊÅØÁöÑÊ∂àÊÅØÂ§¥Â∞ÜËææÂà∞ 8kÔºåÂèëÈÄÅÁöÑÂøÉË∑≥ÂåÖËøá‰∫éÂ∫ûÂ§ß„ÄÇÂú®Ê∂àÊÅØÂ§¥‰∏≠ÊúÄÂç†Á©∫Èó¥ÁöÑÊòØ <code>myslots[CLUSTER_SLOTS/8]</code>„ÄÇÂΩìÊßΩ‰Ωç‰∏∫65536Êó∂ÔºåËøôÂùóÁöÑÂ§ßÂ∞èÊòØ Ôºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">65536 √∑ 8 √∑ 1024 = 8Kb
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊØèÁßí‰∏≠redisËäÇÁÇπÈúÄË¶ÅÂèëÈÄÅ‰∏ÄÂÆöÊï∞ÈáèÁöÑpingÊ∂àÊÅØ‰Ωú‰∏∫ÂøÉË∑≥ÔºåÂ¶ÇÊûúÊßΩ‰Ωç‰∏∫65536ÔºåÈÇ£‰πàËøô‰∏™pingÊ∂àÊÅØÂ§¥Â∞±‰ºöÂ§™Â§ßÊµ™Ë¥πÂ∏¶ÂÆΩ„ÄÇ</p>
<ol start="2">
<li>
<p>redisÈõÜÁæ§ÁöÑ‰∏ªËäÇÁÇπÊï∞ÈáèÂü∫Êú¨‰∏çÂèØËÉΩË∂ÖËøá1000‰∏™„ÄÇÈõÜÁæ§ËäÇÁÇπË∂äÂ§öÔºåÂøÉË∑≥ÂåÖÁöÑÊ∂àÊÅØ‰ΩìÂÜÖÊê∫Â∏¶ÁöÑÊï∞ÊçÆË∂äÂ§ö„ÄÇÂ¶ÇÊûúËäÇÁÇπË∂ÖËøá1000‰∏™Ôºå‰πü‰ºöÂØºËá¥ÁΩëÁªúÊã•Â†µ„ÄÇÂõ†Ê≠§redis‰ΩúËÄÖ‰∏çÂª∫ËÆÆredis clusterËäÇÁÇπË∂ÖËøá1000‰∏™„ÄÇÂØπ‰∫éËäÇÁÇπÊï∞Âú®1000‰ª•ÂÜÖÁöÑredis clusterÈõÜÁæ§Ôºå16384‰∏™ÊßΩ‰ΩçË∂≥Â§ü‰∫ÜÔºåÊ≤°ÊúâÂøÖË¶ÅÊâ©Â±ïÂà∞65536‰∏™„ÄÇ</p>
</li>
<li>
<p>ÊßΩ‰ΩçË∂äÂ∞èÔºåËäÇÁÇπÂ∞ëÁöÑÊÉÖÂÜµ‰∏ãÂéãÁº©ÊØîË∂äÈ´òÔºåÂÆπÊòì‰º†Ëæì„ÄÇRedis‰∏ªËäÇÁÇπÁöÑÈÖçÁΩÆ‰ø°ÊÅØ‰∏≠ÂÆÉÈîÅË¥üË¥£ÁöÑÂìàÂ∏åÊßΩÊòØÈÄöËøá‰∏ÄÂº†bitmapÁöÑÂΩ¢ÂºèÊù•‰øùÂ≠òÁöÑÔºåÂú®‰º†ËæìËøáÁ®ã‰∏≠‰ºöÂØπbitmapËøõË°åÂéãÁº©Ôºå‰ΩÜÊòØÂ¶ÇÊûúbitmapÁöÑÂ°´ÂÖÖÁéá <code>slots / N</code>ÔºàN‰∏∫ËäÇÁÇπÊï∞ÔºâÂæàÈ´òÁöÑËØùÔºåbitmapÁöÑÂéãÁº©ÁéáÂ∞±Âæà‰Ωé„ÄÇÂ¶ÇÊûúËäÇÁÇπÊï∞ÂæàÂ∞ëÔºåËÄåÂìàÂ∏åÊßΩÊï∞ÂæàÂ§öÁöÑËØùÔºåbitmapÁöÑÂéãÁº©ÁéáÂ∞±Âæà‰Ωé„ÄÇ</p>
</li>
</ol>
<blockquote>
<p>ÂéüÊñáÔºö</p>
<p>Ê≠£Â∏∏ÁöÑÂøÉË∑≥Êï∞ÊçÆÂåÖÂ∏¶ÊúâËäÇÁÇπÁöÑÂÆåÊï¥ÈÖçÁΩÆÔºå‰ΩøÂæóÂèØ‰ª•Áî®ÂπÇÁ≠âÊñπÂºèÁî®ÊóßÁöÑËäÇÁÇπÊõøÊç¢ÊóßËäÇÁÇπÔºå‰ª•‰æøÊõ¥Êñ∞ÊóßÁöÑÈÖçÁΩÆ„ÄÇËøôÊÑèÂë≥ÁùÄÂÆÉ‰ª¨ÂåÖÂê´ÂéüÂßãËäÇÁÇπÁöÑÊèíÊßΩÈÖçÁΩÆÔºåËØ•ËäÇÁÇπ‰ΩøÁî® 2k ÁöÑÁ©∫Èó¥Âíå 16k ÁöÑÊèíÊßΩÔºåËÄå‰∏çÊòØ‰ΩøÁî® 8k ÁöÑÁ©∫Èó¥Ôºà‰ΩøÁî®65kÁöÑÊèíÊßΩÔºâ„ÄÇ</p>
<p>ÂêåÊó∂ÔºåÂõ†‰∏∫ÂÖ∂‰ªñËÆæËÆ°ÊäòË°∑ÔºåRedisÈõÜÁæ§ÁöÑ‰∏ªËäÇÁÇπ‰∏çÂ§™ÂèØËÉΩÊâ©Â±ïÂà∞1000‰∏™‰ª•‰∏ä</p>
</blockquote>
<p>RedisÈõÜÁæ§‰∏≠ÂÜÖÁΩÆ‰∫Ü16384‰∏™ÂìàÂ∏åÊßΩÔºåredis‰ºöÊ†πÊçÆËäÇÁÇπÊï∞ÈáèÂ§ßËá¥ÂùáÁ≠âÁöÑÂ∞ÜÂìàÂ∏åÊßΩÊò†Â∞ÑÂà∞‰∏çÂêåÁöÑËäÇÁÇπ„ÄÇÂΩìÈúÄË¶ÅÂú®RedisÈõÜÁæ§‰∏≠ÊîæÁΩÆ‰∏Ä‰∏™<code>Key-Value</code>Êó∂ÔºåredisÂÖàÂØπ<code>key</code>‰ΩøÁî® <code>CRC16</code> ÁÆóÊ≥ïÁÆóÂá∫‰∏Ä‰∏™ÁªìÊûúÔºåÁÑ∂ÂêéÊääÁªìÊûúÂØπ 16384 Âèñ‰ΩôÔºåËøôÊ†∑ÊØè‰∏™<code>key</code>ÈÉΩ‰ºöÂØπÂ∫î‰∏Ä‰∏™ÁºñÂè∑Âú®0-16383‰πãÈó¥ÁöÑÂìàÂ∏åÊßΩÔºå‰πüÂ∞±ÊòØÊò†Â∞ÑÂà∞Êüê‰∏™ËäÇÁÇπ‰∏ä„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/slot02.png"
	width="693"
	height="499"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/slot02_hu1628074592932486108.png 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/slot02_hu10241368228933932198.png 1024w"
	loading="lazy"
	
		alt="slot02"
	
	
		class="gallery-image" 
		data-flex-grow="138"
		data-flex-basis="333px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// import io.lettuce.core.cluster.SlotHash;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">SlotHash</span><span class="p">.</span><span class="na">getSlot</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="p">));</span><span class="w">  </span><span class="c1">// ËÆ°ÁÆóÁªìÊûú6373ÔºåÂ≠òÂÖ•‰∏äÂõæÁöÑNode2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">SlotHash</span><span class="p">.</span><span class="na">getSlot</span><span class="p">(</span><span class="sc">&#39;B&#39;</span><span class="p">));</span><span class="w">  </span><span class="c1">// ËÆ°ÁÆóÁªìÊûú10374ÔºåÂ≠òÂÖ•‰∏äÂõæÁöÑNode2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">SlotHash</span><span class="p">.</span><span class="na">getSlot</span><span class="p">(</span><span class="sc">&#39;C&#39;</span><span class="p">));</span><span class="w">  </span><span class="c1">// ËÆ°ÁÆóÁªìÊûú14503ÔºåÂ≠òÂÖ•‰∏äÂõæÁöÑNode3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">SlotHash</span><span class="p">.</span><span class="na">getSlot</span><span class="p">(</span><span class="err">&#39;</span><span class="n">Hello</span><span class="err">&#39;</span><span class="p">));</span><span class="w">  </span><span class="c1">// ËÆ°ÁÆóÁªìÊûú866ÔºåÂ≠òÂÖ•‰∏äÂõæÁöÑNode1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3‰∏ª3‰ªéredisÈõÜÁæ§">3‰∏ª3‰ªéRedisÈõÜÁæ§
</h2><h3 id="Êê≠Âª∫">Êê≠Âª∫
</h3><p>‰ΩøÁî®dockerÊê≠Âª∫3‰∏ª3‰ªéÁöÑRedisÈõÜÁæ§ÔºåÊØèÂè∞‰∏ªÊú∫ÈÉΩÂØπÂ∫î‰∏ÄÂè∞‰ªéÊú∫„ÄÇ</p>
<p>ÂêØÂä®6Âè∞redisÂÆπÂô®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÂêØÂä®Á¨¨1Âè∞ËäÇÁÇπ</span>
</span></span><span class="line"><span class="cl"><span class="c1"># --net host ‰ΩøÁî®ÂÆø‰∏ªÊú∫ÁöÑIPÂíåÁ´ØÂè£ÔºåÈªòËÆ§</span>
</span></span><span class="line"><span class="cl"><span class="c1"># --cluster-enabled yes ÂºÄÂêØredisÈõÜÁæ§</span>
</span></span><span class="line"><span class="cl"><span class="c1"># --appendonly yes ÂºÄÂêØredisÊåÅ‰πÖÂåñ</span>
</span></span><span class="line"><span class="cl"><span class="c1"># --port 6381 ÈÖçÁΩÆredisÁ´ØÂè£Âè∑</span>
</span></span><span class="line"><span class="cl">docker run -d --name redis-node-1 --net host --privileged<span class="o">=</span><span class="nb">true</span> -v /app/redis-cluster/share/redis-node-1:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port <span class="m">6381</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂêØÂä®Á¨¨2Âè∞ËäÇÁÇπ</span>
</span></span><span class="line"><span class="cl">docker run -d --name redis-node-2 --net host --privileged<span class="o">=</span><span class="nb">true</span> -v /app/redis-cluster/share/redis-node-2:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port <span class="m">6382</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂêØÂä®Á¨¨3Âè∞ËäÇÁÇπ</span>
</span></span><span class="line"><span class="cl">docker run -d --name redis-node-3 --net host --privileged<span class="o">=</span><span class="nb">true</span> -v /app/redis-cluster/share/redis-node-3:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port <span class="m">6383</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂêØÂä®Á¨¨4Âè∞ËäÇÁÇπ</span>
</span></span><span class="line"><span class="cl">docker run -d --name redis-node-4 --net host --privileged<span class="o">=</span><span class="nb">true</span> -v /app/redis-cluster/share/redis-node-4:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port <span class="m">6384</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂêØÂä®Á¨¨5Âè∞ËäÇÁÇπ</span>
</span></span><span class="line"><span class="cl">docker run -d --name redis-node-5 --net host --privileged<span class="o">=</span><span class="nb">true</span> -v /app/redis-cluster/share/redis-node-5:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port <span class="m">6385</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂêØÂä®Á¨¨6Âè∞ËäÇÁÇπ</span>
</span></span><span class="line"><span class="cl">docker run -d --name redis-node-6 --net host --privileged<span class="o">=</span><span class="nb">true</span> -v /app/redis-cluster/share/redis-node-6:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port <span class="m">6386</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊûÑÂª∫‰∏ª‰ªéÂÖ≥Á≥ªÔºö</p>
<ol>
<li>ËøõÂÖ•ËäÇÁÇπ1ÔºàÊàñÂÖ∂‰∏≠‰ªªÊÑè‰∏Ä‰∏™ËäÇÁÇπÔºâ:</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it redis-node-1 /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>ÊûÑÂª∫‰∏ª‰ªéÂÖ≥Á≥ªÔºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÂÆø‰∏ªÊú∫IP:Á´ØÂè£</span>
</span></span><span class="line"><span class="cl">redis-cli --cluster create 192.168.xxx.xxx:6381 192.168.xxx.xxx:6382 192.168.xxx.xxx:6383 192.168.xxx.xxx:6384 192.168.xxx.xxx:6385 192.168.xxx.xxx:6386 --cluster-replicas <span class="m">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>
<p>redisÂ∞ùËØïËá™Âä®ËøõË°å‰∏ª‰ªéËäÇÁÇπÂàÜÈÖç</p>
</li>
<li>
<p>Âõ†‰∏∫Êàë‰ª¨ÁöÑdockerÂÆπÂô®IPÁõ∏ÂêåÔºåÊâÄ‰ª•‰ºöÂá∫Áé∞Ë≠¶ÂëäÔºåÂèØ‰ª•Áõ¥Êé•ÂøΩÁï•ËØ•Ë≠¶Âëä</p>
</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">[WARNING] Some slaves are in the same host as their master
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>redisËá™Âä®ÂàÜÈÖçÁªìÊûúÂÆåÊàêÂêéÔºåÈúÄË¶ÅËæìÂÖ• <code>Yes</code> Á°ÆËÆ§ÈÖçÁΩÆ‰ø°ÊÅØÔºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">M: f451eb48bbc0a7c31c7da022ffe80cc1696e0f37 192.168.xxx.xxx:6381
</span></span><span class="line"><span class="cl">   slots:[0-5460] (5461 slots) master
</span></span><span class="line"><span class="cl">M: 05984211b8c38222a73abeff1d4e459c0fe1efbc 192.168.xxx.xxx:6382
</span></span><span class="line"><span class="cl">   slots:[5461-10922] (5462 slots) master
</span></span><span class="line"><span class="cl">M: 1fc935c12b1d34a7df50aed643c195eb29bb3435 192.168.xxx.xxx:6383
</span></span><span class="line"><span class="cl">   slots:[10923-16383] (5461 slots) master
</span></span><span class="line"><span class="cl">S: f8d0de47114bf33438747acd713cce4e412ae721 192.168.xxx.xxx:6384
</span></span><span class="line"><span class="cl">   replicates 1fc935c12b1d34a7df50aed643c195eb29bb3435
</span></span><span class="line"><span class="cl">S: de0b393c17e452d856f6de2b348e9ca4e5aa4002 192.168.xxx.xxx:6385
</span></span><span class="line"><span class="cl">   replicates f451eb48bbc0a7c31c7da022ffe80cc1696e0f37
</span></span><span class="line"><span class="cl">S: 0c0767e13a09ee48541738d4163592cd9842c143 192.168.xxx.xxx:6386
</span></span><span class="line"><span class="cl">   replicates 05984211b8c38222a73abeff1d4e459c0fe1efbc
</span></span><span class="line"><span class="cl">Can I set the above configuration? (type &#39;yes&#39; to accept):
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="6">
<li>ËæìÂÖ•<code>Yes</code>Á°ÆËÆ§ÂêéÔºåredis‰ºöÂêëÂÖ∂‰ªñËäÇÁÇπÂèëÈÄÅ‰ø°ÊÅØÂä†ÂÖ•ÈõÜÁæ§ÔºåÂπ∂ÂàÜÈÖçÂìàÂ∏åÊßΩÔºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">&gt;&gt;&gt; Nodes configuration updated
</span></span><span class="line"><span class="cl">&gt;&gt;&gt; Assign a different config epoch to each node
</span></span><span class="line"><span class="cl">&gt;&gt;&gt; Sending CLUSTER MEET messages to join the cluster
</span></span><span class="line"><span class="cl">Waiting for the cluster to join
</span></span><span class="line"><span class="cl">.....
</span></span><span class="line"><span class="cl">&gt;&gt;&gt; Performing Cluster Check (using node 192.168.xxx.xxx:6381)
</span></span><span class="line"><span class="cl">M: f451eb48bbc0a7c31c7da022ffe80cc1696e0f37 192.168.xxx.xxx:6381
</span></span><span class="line"><span class="cl">   slots:[0-5460] (5461 slots) master
</span></span><span class="line"><span class="cl">   1 additional replica(s)
</span></span><span class="line"><span class="cl">M: 1fc935c12b1d34a7df50aed643c195eb29bb3435 192.168.xxx.xxx:6383
</span></span><span class="line"><span class="cl">   slots:[10923-16383] (5461 slots) master
</span></span><span class="line"><span class="cl">   1 additional replica(s)
</span></span><span class="line"><span class="cl">M: 05984211b8c38222a73abeff1d4e459c0fe1efbc 192.168.xxx.xxx:6382
</span></span><span class="line"><span class="cl">   slots:[5461-10922] (5462 slots) master
</span></span><span class="line"><span class="cl">   1 additional replica(s)
</span></span><span class="line"><span class="cl">S: 0c0767e13a09ee48541738d4163592cd9842c143 192.168.xxx.xxx:6386
</span></span><span class="line"><span class="cl">   slots: (0 slots) slave
</span></span><span class="line"><span class="cl">   replicates 05984211b8c38222a73abeff1d4e459c0fe1efbc
</span></span><span class="line"><span class="cl">S: f8d0de47114bf33438747acd713cce4e412ae721 192.168.xxx.xxx:6384
</span></span><span class="line"><span class="cl">   slots: (0 slots) slave
</span></span><span class="line"><span class="cl">   replicates 1fc935c12b1d34a7df50aed643c195eb29bb3435
</span></span><span class="line"><span class="cl">S: de0b393c17e452d856f6de2b348e9ca4e5aa4002 192.168.xxx.xxx:6385
</span></span><span class="line"><span class="cl">   slots: (0 slots) slave
</span></span><span class="line"><span class="cl">   replicates f451eb48bbc0a7c31c7da022ffe80cc1696e0f37
</span></span><span class="line"><span class="cl">[OK] All nodes agree about slots configuration.
</span></span><span class="line"><span class="cl">&gt;&gt;&gt; Check for open slots...
</span></span><span class="line"><span class="cl">&gt;&gt;&gt; Check slots coverage...
</span></span><span class="line"><span class="cl">[OK] All 16384 slots covered.
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êü•ÁúãÈõÜÁæ§Áä∂ÊÄÅÔºö</p>
<ol>
<li>ËøõÂÖ•ÂÆπÂô®ËäÇÁÇπ1ÔºàÊàñÈõÜÁæ§‰∏≠ÂÖ∂‰ªñËäÇÁÇπÔºâÔºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it redis-node-1 /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>‰ΩøÁî®<code>redis-cli</code>ËøûÊé•Âà∞<code>6381</code>ËäÇÁÇπÔºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redis-cli -p <span class="m">6381</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>‰ΩøÁî®<code>redis</code>ÁöÑÁõ∏ÂÖ≥ÂëΩ‰ª§Êü•ÁúãÈõÜÁæ§Áä∂ÊÄÅÔºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cluster info
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰∏≠ÔºåÂàÜÈÖçÁöÑÂìàÂ∏åÊßΩÊï∞Èáè <code>cluster_slots_assigned</code>‰∏∫16384ÔºåÈõÜÁæ§ËäÇÁÇπÊï∞Èáè<code>cluster_known_nodes</code>‰∏∫6</p>
<ol start="4">
<li>Êü•ÁúãÈõÜÁæ§ËäÇÁÇπ‰ø°ÊÅØ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cluster nodes
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="redisÈõÜÁæ§ËØªÂÜôÂá∫Èîô">RedisÈõÜÁæ§ËØªÂÜôÂá∫Èîô
</h3><p>ÂΩì‰ΩøÁî® <code>redis-cli</code>ËøûÊé•redisÈõÜÁæ§Êó∂ÔºåÈúÄË¶ÅÊ∑ªÂä† <code>-c</code>ÂèÇÊï∞ÔºåÂê¶ÂàôÂèØËÉΩ‰ºöÂá∫Áé∞ËØªÂÜôÂá∫Èîô„ÄÇ</p>
<p>Á§∫‰æãÔºö</p>
<ol>
<li>ËøõÂÖ•ÂÆπÂô®ËäÇÁÇπ1</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it redis-node-1 /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>‰ΩøÁî®<code>redis-cli</code>ËøûÊé•Ôºå‰∏çÂä†<code>-c</code>ÂèÇÊï∞Êó∂</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redis-cli -p <span class="m">6381</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>Ê≠§Êó∂Âêëredis‰∏≠Ê∑ªÂä†ÈîÆÂÄºÂØπÔºåÂèØËÉΩ‰ºöÊàêÂäüÔºå‰πüÂèØËÉΩ‰ºöÂ§±Ë¥•</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> k1 v1
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êä•ÈîôÔºö<code>k1</code>ÁªèËøáËÆ°ÁÆóÂæóÂà∞ÁöÑÂìàÂ∏åÊßΩ‰∏∫12706Ôºå‰ΩÜÊòØÂΩìÂâçËøûÊé•ÁöÑredis-server‰∏∫<code>6381</code>ÔºàÂç≥ËäÇÁÇπ1ÔºâÔºåÂÆÉÁöÑÂìàÂ∏åÊßΩ‰∏∫Ôºö<code>[0,5460]</code>ÔºàÂú®ÂàõÂª∫ÊûÑÂª∫‰∏ª‰ªéÂÖ≥Á≥ªÊó∂redisÊúâÊèêÁ§∫Ôºå‰πüÂèØ‰ª•ÈÄöËøá <code>cluster nodes</code>Êü•ÁúãÔºâÔºåÊâÄ‰ª•‰ºöÂõ†‰∏∫Â≠ò‰∏çËøõÂéªËÄåÊä•Èîô„ÄÇ
ÊâßË°å <code>set k2 v2</code>ÂèØ‰ª•ÊàêÂäüÔºåÂõ†‰∏∫<code>k2</code>ËÆ°ÁÆóÂá∫ÁöÑÂìàÂ∏åÊßΩÂú®<code>[0-5460]</code>Âå∫Èó¥‰∏≠„ÄÇ</p>
<ol start="4">
<li>‰ΩøÁî®<code>-c</code>ÂèÇÊï∞ÁöÑ<code>redis-cli</code>ÂëΩ‰ª§ËøûÊé•Âç≥ÂèØ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redis-cli -p <span class="m">6381</span> -c
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>Ê≠§Êó∂ÂèØ‰ª•Ê≠£Â∏∏ÁöÑÊèíÂÖ•ÊâÄÊúâÊï∞ÊçÆ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> k1 v1
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ºöÊúâÊèêÁ§∫‰ø°ÊÅØÔºåÂìàÂ∏åÊßΩ‰∏∫12706ÔºåÈáçÂÆöÂêëÂà∞<code>6383</code>ÔºàÂç≥ËäÇÁÇπ3ÔºåÂìàÂ∏åÊßΩ<code>[10923, 16383]</code>ÔºâÔºö</p>
<h3 id="ÈõÜÁæ§‰ø°ÊÅØÊ£ÄÊü•">ÈõÜÁæ§‰ø°ÊÅØÊ£ÄÊü•
</h3><p>Ê£ÄÊü•Êü•ÁúãÈõÜÁæ§‰ø°ÊÅØÔºö</p>
<ol>
<li>ËøõÂÖ•ÂÆπÂô®ËäÇÁÇπ1</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it redis-node-1 /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>ËøõË°åÈõÜÁæ§‰ø°ÊÅØÊ£ÄÊü•</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ËæìÂÖ•‰ªªÊÑè‰∏ÄÂè∞‰∏ªËäÇÁÇπÂú∞ÂùÄÈÉΩÂèØ‰ª•ËøõË°åÈõÜÁæ§Ê£ÄÊü•</span>
</span></span><span class="line"><span class="cl">redis-cli --cluster check 192.168.xxx.xxx:6381
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøîÂõûÁöÑÊ£ÄÊü•ÁªìÊûúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">ÂΩìÂâçÈõÜÁæ§‰∏≠ÂêÑ‰∏™ËäÇÁÇπÂ≠òÂÇ®ÁöÑkeyÁöÑÊï∞Èáè
</span></span><span class="line"><span class="cl">192.168.xxx.xxx:6381 (f451eb48...) -&gt; 0 keys | 5461 slots | 1 slaves.
</span></span><span class="line"><span class="cl">192.168.xxx.xxx:6383 (1fc935c1...) -&gt; 1 keys | 5461 slots | 1 slaves.
</span></span><span class="line"><span class="cl">192.168.xxx.xxx:6382 (05984211...) -&gt; 0 keys | 5462 slots | 1 slaves.
</span></span><span class="line"><span class="cl">[OK] 1 keys in 3 masters.  
</span></span><span class="line"><span class="cl">0.00 keys per slot on average.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">‰∏ª‰ªéÊú∫Âô®‰ø°ÊÅØ
</span></span><span class="line"><span class="cl">&gt;&gt;&gt; Performing Cluster Check (using node 192.168.xxx.xxx:6381)
</span></span><span class="line"><span class="cl">M: f451eb48bbc0a7c31c7da022ffe80cc1696e0f37 192.168.xxx.xxx:6381
</span></span><span class="line"><span class="cl">   slots:[0-5460] (5461 slots) master
</span></span><span class="line"><span class="cl">   1 additional replica(s)
</span></span><span class="line"><span class="cl">M: 1fc935c12b1d34a7df50aed643c195eb29bb3435 192.168.xxx.xxx:6383
</span></span><span class="line"><span class="cl">   slots:[10923-16383] (5461 slots) master
</span></span><span class="line"><span class="cl">   1 additional replica(s)
</span></span><span class="line"><span class="cl">M: 05984211b8c38222a73abeff1d4e459c0fe1efbc 192.168.xxx.xxx:6382
</span></span><span class="line"><span class="cl">   slots:[5461-10922] (5462 slots) master
</span></span><span class="line"><span class="cl">   1 additional replica(s)
</span></span><span class="line"><span class="cl">S: 0c0767e13a09ee48541738d4163592cd9842c143 192.168.xxx.xxx:6386
</span></span><span class="line"><span class="cl">   slots: (0 slots) slave
</span></span><span class="line"><span class="cl">   replicates 05984211b8c38222a73abeff1d4e459c0fe1efbc
</span></span><span class="line"><span class="cl">S: f8d0de47114bf33438747acd713cce4e412ae721 192.168.xxx.xxx:6384
</span></span><span class="line"><span class="cl">   slots: (0 slots) slave
</span></span><span class="line"><span class="cl">   replicates 1fc935c12b1d34a7df50aed643c195eb29bb3435
</span></span><span class="line"><span class="cl">S: de0b393c17e452d856f6de2b348e9ca4e5aa4002 192.168.xxx.xxx:6385
</span></span><span class="line"><span class="cl">   slots: (0 slots) slave
</span></span><span class="line"><span class="cl">   replicates f451eb48bbc0a7c31c7da022ffe80cc1696e0f37
</span></span><span class="line"><span class="cl">[OK] All nodes agree about slots configuration.
</span></span><span class="line"><span class="cl">&gt;&gt;&gt; Check for open slots...
</span></span><span class="line"><span class="cl">&gt;&gt;&gt; Check slots coverage...
</span></span><span class="line"><span class="cl">[OK] All 16384 slots covered.
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="‰∏ª‰ªéÊâ©ÂÆπÁº©ÂÆπ">‰∏ª‰ªéÊâ©ÂÆπÁº©ÂÆπ
</h2><h3 id="‰∏ª‰ªéÊâ©ÂÆπ">‰∏ª‰ªéÊâ©ÂÆπ
</h3><p>ÂÅáÂ¶ÇÂõ†‰∏∫‰∏öÂä°ÈáèÊøÄÂ¢ûÔºåÈúÄË¶ÅÂêëÂΩìÂâç3‰∏ª3‰ªéÁöÑÈõÜÁæ§‰∏≠ÂÜçÂä†ÂÖ•1‰∏ª1‰ªé‰∏§‰∏™ËäÇÁÇπ„ÄÇ</p>
<p>Ê≠•È™§Ôºö</p>
<ol>
<li>ÂêØÂä®2Âè∞Êñ∞ÁöÑÂÆπÂô®ËäÇÁÇπ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÂêØÂä®Á¨¨7Âè∞ËäÇÁÇπ</span>
</span></span><span class="line"><span class="cl">docker run -d --name redis-node-7 --net host --privileged<span class="o">=</span><span class="nb">true</span> -v /app/redis-cluster/share/redis-node-7:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port <span class="m">6387</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂêØÂä®Á¨¨8Âè∞ËäÇÁÇπ</span>
</span></span><span class="line"><span class="cl">docker run -d --name redis-node-8 --net host --privileged<span class="o">=</span><span class="nb">true</span> -v /app/redis-cluster/share/redis-node-8:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port <span class="m">6388</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>ËøõÂÖ•6387ÔºàËäÇÁÇπ7ÔºâÂÆπÂô®ÂÜÖÈÉ®</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it redis-node-7 /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>Â∞Ü6387‰Ωú‰∏∫masterÂä†ÂÖ•ÈõÜÁæ§</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># redis-cli --cluster add-node Êú¨ËäÇÁÇπÂú∞ÂùÄ Ë¶ÅÂä†ÂÖ•ÁöÑÈõÜÁæ§‰∏≠ÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™ËäÇÁÇπÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">redis-cli --cluster add-node 192.168.xxx.xxx:6387 192.168.xxx.xxx:6381
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>Ê£ÄÊü•ÂΩìÂâçÈõÜÁæ§Áä∂ÊÄÅ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redis-cli --cluster check 192.168.xxx.xxx:6381
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•ÂèëÁé∞Ôºå6371ËäÇÁÇπÂ∑≤Áªè‰Ωú‰∏∫masterÂä†ÂÖ•‰∫ÜÈõÜÁæ§Ôºå‰ΩÜÊòØËØ•ËäÇÁÇπÊ≤°ÊúâË¢´ÂàÜÈÖçÊßΩ‰Ωç„ÄÇ</p>
<ol start="5">
<li>ÈáçÊñ∞ÂàÜÈÖçÈõÜÁæ§ÁöÑÊßΩ‰Ωç</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redis-cli --cluster reshard 192.168.xxx.xxx:6381
</span></span></code></pre></td></tr></table>
</div>
</div><p>redisÁªèËøáÊßΩ‰ΩçÊ£ÄÊü•ÂêéÔºå‰ºöÊèêÁ§∫ÈúÄË¶ÅÂàÜÈÖçÁöÑÊßΩ‰ΩçÊï∞ÈáèÔºö
‰æãÂ¶ÇÔºåÊàë‰ª¨Áé∞Âú®ÊòØ4Âè∞masterÔºåÊàë‰ª¨ÊÉ≥Ë¶ÅÁªônode7ÂàÜÈÖç4096‰∏™ÊßΩ‰ΩçÔºåËøôÊ†∑ÊØè‰∏™ËäÇÁÇπÈÉΩÊòØ4096‰∏™ÊßΩ‰Ωç„ÄÇ
ËæìÂÖ•<code>4096</code>ÂêéÔºå‰ºöËÆ©ËæìÂÖ•Ë¶ÅÊé•Êî∂Ëøô‰∫õÂìàÂ∏åÊßΩÁöÑËäÇÁÇπIDÔºåÂ°´ÂÖ•node7ÁöÑËäÇÁÇπIDÂç≥ÂèØ„ÄÇÔºàÂ∞±ÊòØËäÇÁÇπ‰ø°ÊÅØ‰∏≠ÂæàÈïøÁöÑ‰∏Ä‰∏≤ÂçÅÂÖ≠ËøõÂà∂‰∏≤Ôºâ„ÄÇ
ÁÑ∂Âêé‰ºöÊèêÁ§∫ÔºåËØ¢ÈóÆË¶Å‰ªéÂì™‰∫õËäÇÁÇπ‰∏≠Êã®Âá∫‰∏ÄÈÉ®ÂàÜÊßΩ‰ΩçÂáëË∂≥4096‰∏™ÂàÜÁªôNode7„ÄÇ‰∏ÄËà¨ÈÄâÊã© <code>all</code>ÔºåÂç≥Â∞Ü‰πãÂâçÁöÑ3‰∏™‰∏ªËäÇÁÇπÁöÑÊßΩ‰ΩçÈÉΩÂùá‰∏Ä‰∫õÁªôNode7ÔºåËøôÊ†∑ÂèØ‰ª•‰ΩøÂæóÊØè‰∏™ËäÇÁÇπÁöÑÊßΩ‰ΩçÊï∞Áõ∏Á≠âÂùáË°°„ÄÇ
ËæìÂÖ•<code>all</code>‰πãÂêéÔºåredis‰ºöÂàóÂá∫‰∏Ä‰∏™ËÆ°ÂàíÔºåÂÜÖÂÆπÊòØËá™Âä®‰ªéÂâçÈù¢ÁöÑ3Âè∞master‰∏≠Êã®Âá∫‰∏ÄÈÉ®ÂàÜÊßΩ‰ΩçÂàÜÁªôNode7ÁöÑÊßΩ‰ΩçÔºåÈúÄË¶ÅÁ°ÆËÆ§‰∏Ä‰∏ãÂàÜÈÖçÁöÑËÆ°Âàí„ÄÇ
ËæìÂÖ•<code>yes</code>Á°ÆËÆ§ÂêéÔºåredis‰æø‰ºöËá™Âä®ÈáçÊñ∞Ê¥óÁâåÔºåÁªôNode7ÂàÜÈÖçÊßΩ‰Ωç„ÄÇ</p>
<p>ÈáçÊñ∞ÂàÜÈÖçÂÆåÊàêÂêéÔºåÂèØ‰ª•ËøõË°åÈõÜÁæ§‰ø°ÊÅØÊ£ÄÊü•ÔºåÊü•ÁúãÂàÜÈÖçÁªìÊûúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redis-cli --cluster check 192.168.xxx.xxx:6381
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•ÂèëÁé∞ÈáçÊñ∞Ê¥óÁâåÂêéÁöÑÊßΩ‰ΩçÂàÜÈÖç‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">ËäÇÁÇπ1Ôºö[1365-5460]Ôºà‰æõ4096‰∏™ÊßΩ‰ΩçÔºâÔºåÔºåÔºåÂàÜÈÖçÂâç‰∏∫[0-5460]ÔºàÂÖ±5461‰∏™ÊßΩ‰ΩçÔºâ
</span></span><span class="line"><span class="cl">ËäÇÁÇπ2Ôºö[6827-10922]ÔºàÂÖ±4096‰∏™ÊßΩ‰ΩçÔºâÔºåÔºåÔºåÂàÜÈÖçÂâç‰∏∫[5461-10922]ÔºàÂÖ±5461‰∏™ÊßΩ‰ΩçÔºâ
</span></span><span class="line"><span class="cl">ËäÇÁÇπ3Ôºö[12288-16383]ÔºàÂÖ±4096‰∏™ÊßΩ‰ΩçÔºâÔºåÔºåÔºåÂàÜÈÖçÂâç‰∏∫[10923-16383]ÔºàÂÖ±5462‰∏™ÊßΩ‰ΩçÔºâ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ËäÇÁÇπ7Ôºö[0-1364],[5461-6826],[10923-12287]ÔºàÂÖ±4096‰∏™ÊßΩ‰ΩçÔºâÔºå‰ªéÊØè‰∏™ËäÇÁÇπ‰∏≠ÂåÄÂá∫Êù•‰∫Ü‰∏ÄÈÉ®ÂàÜÁªô‰∫ÜËäÇÁÇπ7
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âõ†‰∏∫ÂèØËÉΩÊúâ‰∫õÊßΩ‰Ωç‰∏≠Â∑≤ÁªèÂ≠òÂÇ®‰∫Ü<code>key</code>ÔºåÂÆåÂÖ®ÁöÑÈáçÊñ∞Ê¥óÁâåÈáçÊñ∞ÂàÜÈÖçÁöÑÊàêÊú¨ËøáÈ´òÔºåÊâÄ‰ª•redisÈÄâÊã©‰ªéÂâç3‰∏™ËäÇÁÇπ‰∏≠ÂåÄÂá∫Êù•‰∏ÄÈÉ®ÂàÜÁªôËäÇÁÇπ7</p>
<p>‰∏∫‰∏ªËäÇÁÇπ6387ÂàÜÈÖç‰ªéËäÇÁÇπ6388Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redis-cli --cluster add-node 192.168.xxx.xxx:6388 192.168.xxx.xxx:6381 --cluster-slave --cluster-master-id node7ËäÇÁÇπÁöÑÂçÅÂÖ≠ËøõÂà∂ÁºñÂè∑Â≠óÁ¨¶‰∏≤
</span></span></code></pre></td></tr></table>
</div>
</div><p>redis‰æø‰ºöÂêë6388ÂèëÈÄÅÊ∂àÊÅØÔºå‰ΩøÂÖ∂Âä†ÂÖ•ÈõÜÁæ§Âπ∂Êàê‰∏∫6387ÁöÑ‰ªéËäÇÁÇπ„ÄÇ</p>
<p>Ê£ÄÊü•ÈõÜÁæ§ÂΩìÂâçÁä∂ÊÄÅ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redis-cli --cluster check 192.168.xxx.xxx:6381
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰∏ª‰ªéÁº©ÂÆπ">‰∏ª‰ªéÁº©ÂÆπ
</h3><p>ÂÅáÂ¶Ç‰∏öÂä°È´òÂ≥∞ÊúüËøáÂéªÔºåÈúÄË¶ÅÂ∞Ü4‰∏ª4‰ªéÈáçÊñ∞Áº©ÂÆπÂà∞3‰∏ª3‰ªé„ÄÇÂç≥‰ªéÈõÜÁæ§‰∏≠ÁßªÈô§node8Âíånode7.</p>
<p>È¶ñÂÖàÂà†Èô§‰ªéËäÇÁÇπ6388Ôºö</p>
<ol>
<li>ËøõÂÖ•ÂÆπÂô®ËäÇÁÇπ1</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it redis-node-1 /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>Ê£ÄÊü•ÂÆπÂô®Áä∂ÊÄÅÔºåËé∑Âèñ6388ÁöÑËäÇÁÇπÁºñÂè∑</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redis-cli --cluster check 192.168.xxx.xxx:6381
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>Â∞Ü6388‰ªéÈõÜÁæ§‰∏≠ÁßªÈô§</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redis-cli --cluster del-node 192.168.xxx.xxx:6388 6388ËäÇÁÇπÁºñÂè∑
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂØπnode7ÈáçÊñ∞ÂàÜÈÖçÂìàÂ∏åÊßΩÔºö</p>
<ol>
<li>ÂØπÈõÜÁæ§ÈáçÊñ∞ÂàÜÈÖçÂìàÂ∏åÊßΩ</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redis-cli --cluster reshard 192.168.xxx.xxx:6381
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>redisÁªèËøáÊßΩ‰ΩçÊ£ÄÊü•ÂêéÔºå‰ºöÊèêÁ§∫ÈúÄË¶ÅÂàÜÈÖçÁöÑÊßΩ‰ΩçÊï∞ÈáèÔºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">How many slots do you want to move (from 1 to 16384)?
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúÊàë‰ª¨ÊÉ≥Áõ¥Êé•Êäänode7ÁöÑ4096‰∏™ÂìàÂ∏åÊßΩÂÖ®ÈÉ®ÂàÜÁªôÊüê‰∏™ËäÇÁÇπÔºåÂèØ‰ª•Áõ¥Êé•ËæìÂÖ•4096„ÄÇ
ËæìÂÖ•<code>4096</code>ÂêéÔºå‰ºöËÆ©ËæìÂÖ•Ë¶ÅÊé•Êî∂Ëøô‰∫õÂìàÂ∏åÊßΩÁöÑËäÇÁÇπID„ÄÇÂÅáÂ¶ÇÊàë‰ª¨ÊÉ≥ÊääËøô4096‰∏™ÊßΩÈÉΩÂàÜÁªôNode1ÔºåÁõ¥Êé•ËæìÂÖ•node1ËäÇÁÇπÁöÑÁºñÂè∑Âç≥ÂèØ„ÄÇ
ÁÑ∂Âêé‰ºöÊèêÁ§∫ÔºåËØ¢ÈóÆË¶Å‰ªéÂì™‰∫õËäÇÁÇπ‰∏≠Êã®Âá∫‰∏ÄÈÉ®ÂàÜÊßΩ‰ΩçÂáëË∂≥4096‰∏™ÂàÜÁªôNode1„ÄÇËøôÈáåÊàë‰ª¨ËæìÂÖ•node7ÁöÑËäÇÁÇπÁºñÂè∑ÔºåÂõûËΩ¶ÂêéËæìÂÖ•<code>done</code>„ÄÇ</p>
<p>node7‰∏äÈù¢Ê≤°Êúâ‰∫ÜÂìàÂ∏åÊßΩÔºåÊ≠§Êó∂‰æøÂèØ‰ª•Â∞Ünode7‰ªéÈõÜÁæ§‰∏≠ÁßªÈô§„ÄÇÔºàÂ¶ÇÊûúnode7‰∏äÈù¢ÊúâÂìàÂ∏åÊßΩÔºåÁõ¥Êé•‰ªéÈõÜÁæ§‰∏≠ÁßªÈô§‰ºöÊä•ÈîôÔºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redis-cli --cluster del-node 192.168.xxx.xxx:6387 node7ËäÇÁÇπÁºñÂè∑
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="11-dockerfile"><strong>11-Dockerfile</strong>
</h1><h2 id="dockerfile">Dockerfile
</h2><p>DockerfileÊòØÁî®Êù•ÊûÑÂª∫DockerÈïúÂÉèÁöÑÊñáÊú¨Êñá‰ª∂ÔºåÊòØÁî±‰∏ÄÊù°Êù°ÊûÑÂª∫ÈïúÂÉèÊâÄÈúÄÁöÑÊåá‰ª§ÂíåÂèÇÊï∞ÊûÑÊàêÁöÑËÑöÊú¨„ÄÇ</p>
<p>ÊûÑÂª∫Ê≠•È™§Ôºö</p>
<ol>
<li>ÁºñÂÜôDockerfileÊñá‰ª∂</li>
<li><code>docker build</code>ÂëΩ‰ª§ÊûÑÂª∫ÈïúÂÉè</li>
<li><code>docker run</code>‰æùÊçÆÈïúÂÉèËøêË°åÂÆπÂô®ÂÆû‰æã</li>
</ol>
<h2 id="ÊûÑÂª∫ËøáÁ®ã">ÊûÑÂª∫ËøáÁ®ã
</h2><p>DockerfileÁºñÂÜôÔºö</p>
<ul>
<li>
<p>ÊØèÊù°‰øùÁïôÂ≠óÊåá‰ª§ÈÉΩÂøÖÈ°ª‰∏∫Â§ßÂÜôÂ≠óÊØçÔºå‰∏îÂêéÈù¢Ë¶ÅË∑üÈöèËá≥Â∞ë‰∏Ä‰∏™ÂèÇÊï∞</p>
</li>
<li>
<p>Êåá‰ª§ÊåâÁÖß‰ªé‰∏äÂà∞‰∏ãÈ°∫Â∫èÊâßË°å</p>
</li>
<li>
<p><code>#</code>Ë°®Á§∫Ê≥®Èáä</p>
</li>
<li>
<p>ÊØèÊù°Êåá‰ª§ÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÈïúÂÉèÂ±ÇÂπ∂ÂØπÈïúÂÉèËøõË°åÊèê‰∫§</p>
</li>
</ul>
<p>DockerÂºïÊìéÊâßË°åDockerÁöÑÂ§ßËá¥ÊµÅÁ®ãÔºö</p>
<ol>
<li>docker‰ªéÂü∫Á°ÄÈïúÂÉèËøêË°å‰∏Ä‰∏™ÂÆπÂô®</li>
<li>ÊâßË°å‰∏ÄÊù°Êåá‰ª§Âπ∂ÂØπÂÆπÂô®ÂÅöÂá∫‰øÆÊîπ</li>
<li>ÊâßË°åÁ±ª‰ºº<code>docker commit</code>ÁöÑÊìç‰ΩúÊèê‰∫§‰∏Ä‰∏™Êñ∞ÁöÑÈïúÂÉèÂ±Ç</li>
<li>dockerÂÜçÂü∫‰∫éÂàöÊèê‰∫§ÁöÑÈïúÂÉèËøêË°å‰∏Ä‰∏™Êñ∞ÂÆπÂô®</li>
<li>ÊâßË°åDockerfile‰∏≠ÁöÑ‰∏ã‰∏ÄÊù°Êåá‰ª§ÔºåÁõ¥Âà∞ÊâÄÊúâÊåá‰ª§ÈÉΩÊâßË°åÂÆåÊàê</li>
</ol>
<h2 id="dockerfile‰øùÁïôÂ≠ó">Dockerfile‰øùÁïôÂ≠ó
</h2><h3 id="from">FROM
</h3><p>Âü∫Á°ÄÈïúÂÉèÔºåÂΩìÂâçÊñ∞ÈïúÂÉèÊòØÂü∫‰∫éÂì™‰∏™ÈïúÂÉèÁöÑÔºåÊåáÂÆö‰∏Ä‰∏™Â∑≤ÁªèÂ≠òÂú®ÁöÑÈïúÂÉè‰Ωú‰∏∫Ê®°Êùø„ÄÇDockerfileÁ¨¨‰∏ÄÊù°ÂøÖÈ°ªÊòØ<code>FROM</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># FROM ÈïúÂÉèÂêç</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> hub.c.163.com/library/tomcat</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="maintainer">MAINTAINER
</h3><p>ÈïúÂÉèÁª¥Êä§ËÄÖÁöÑÂßìÂêçÂíåÈÇÆÁÆ±Âú∞ÂùÄ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># ÈùûÂøÖÈ°ª</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">MAINTAINER</span><span class="s"> ZhangSan zs@163.com</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="run">RUN
</h3><p>ÂÆπÂô®ÊûÑÂª∫Êó∂ÈúÄË¶ÅËøêË°åÁöÑÂëΩ‰ª§„ÄÇ</p>
<p>Êúâ‰∏§ÁßçÊ†ºÂºèÔºö</p>
<ul>
<li>shellÊ†ºÂºè</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># Á≠âÂêå‰∫éÂú®ÁªàÁ´ØÊìç‰ΩúÁöÑshellÂëΩ‰ª§</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Ê†ºÂºèÔºöRUN &lt;ÂëΩ‰ª§Ë°åÂëΩ‰ª§&gt;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> yum -y install vim<span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>execÊ†ºÂºè</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># Ê†ºÂºèÔºöRUN [&#34;ÂèØÊâßË°åÊñá‰ª∂&#34; , &#34;ÂèÇÊï∞1&#34;, &#34;ÂèÇÊï∞2&#34;]</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> <span class="o">[</span><span class="s2">&#34;./test.php&#34;</span>, <span class="s2">&#34;dev&#34;</span>, <span class="s2">&#34;offline&#34;</span><span class="o">]</span>  <span class="c1"># Á≠â‰ª∑‰∫é RUN ./test.php dev offline</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>RUN</code>ÊòØÂú®<code>docker build</code>Êó∂ËøêË°å</p>
<h3 id="expose">EXPOSE
</h3><p>ÂΩìÂâçÂÆπÂô®ÂØπÂ§ñÊö¥Èú≤Âá∫ÁöÑÁ´ØÂè£„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># EXPOSE Ë¶ÅÊö¥Èú≤ÁöÑÁ´ØÂè£</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># EXPOSE &lt;port&gt;[/&lt;protocol] ....</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">EXPOSE</span><span class="s"> 3306 33060</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="workdir">WORKDIR
</h3><p>ÊåáÂÆöÂú®ÂàõÂª∫ÂÆπÂô®ÂêéÔºå ÁªàÁ´ØÈªòËÆ§ÁôªÂΩïËøõÊù•ÁöÑÂ∑•‰ΩúÁõÆÂΩï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">ENV</span> CATALINA_HOME /usr/local/tomcat<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">WORKDIR</span><span class="s"> $CATALINA_HOME</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="user">USER
</h3><p>ÊåáÂÆöËØ•ÈïúÂÉè‰ª•‰ªÄ‰πàÊ†∑ÁöÑÁî®Êà∑ÂéªÊâßË°åÔºåÂ¶ÇÊûú‰∏çÊåáÂÆöÔºåÈªòËÆ§ÊòØ<code>root</code>„ÄÇÔºà‰∏ÄËà¨‰∏ç‰øÆÊîπËØ•ÈÖçÁΩÆÔºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># USER &lt;user&gt;[:&lt;group&gt;]</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">USER</span><span class="s"> patrick</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="env">ENV
</h3><p>Áî®Êù•Âú®ÊûÑÂª∫ÈïúÂÉèËøáÁ®ã‰∏≠ËÆæÁΩÆÁéØÂ¢ÉÂèòÈáè„ÄÇ</p>
<p>Ëøô‰∏™ÁéØÂ¢ÉÂèòÈáèÂèØ‰ª•Âú®ÂêéÁª≠ÁöÑ‰ªª‰Ωï<code>RUN</code>Êåá‰ª§ÊàñÂÖ∂‰ªñÊåá‰ª§‰∏≠‰ΩøÁî®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># Ê†ºÂºè ENV ÁéØÂ¢ÉÂèòÈáèÂêç ÁéØÂ¢ÉÂèòÈáèÂÄº</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># ÊàñËÄÖ ENV ÁéØÂ¢ÉÂèòÈáèÂêç=ÂÄº</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ENV</span> MY_PATH /usr/mytest<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># ‰ΩøÁî®ÁéØÂ¢ÉÂèòÈáè</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">WORKDIR</span><span class="s"> $MY_PATH</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="volume">VOLUME
</h3><p>ÂÆπÂô®Êï∞ÊçÆÂç∑ÔºåÁî®‰∫éÊï∞ÊçÆ‰øùÂ≠òÂíåÊåÅ‰πÖÂåñÂ∑•‰Ωú„ÄÇÁ±ª‰ºº‰∫é <code>docker run</code> ÁöÑ<code>-v</code>ÂèÇÊï∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># VOLUME ÊåÇËΩΩÁÇπ</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># ÊåÇËΩΩÁÇπÂèØ‰ª•ÊòØ‰∏Ä‰∏™Ë∑ØÂæÑÔºå‰πüÂèØ‰ª•ÊòØÊï∞ÁªÑÔºàÊï∞ÁªÑ‰∏≠ÁöÑÊØè‰∏ÄÈ°πÂøÖÈ°ªÁî®ÂèåÂºïÂè∑Ôºâ</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">VOLUME</span><span class="s"> /var/lib/mysql</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="add">ADD
</h3><p>Â∞ÜÂÆø‰∏ªÊú∫ÁõÆÂΩï‰∏ãÔºàÊàñËøúÁ®ãÊñá‰ª∂ÔºâÁöÑÊñá‰ª∂Êã∑Ë¥ùËøõÈïúÂÉèÔºå‰∏î‰ºöËá™Âä®Â§ÑÁêÜURLÂíåËß£ÂéãtarÂéãÁº©ÂåÖ„ÄÇ</p>
<h3 id="copy">COPY
</h3><p>Á±ª‰ºº<code>ADD</code>ÔºåÊã∑Ë¥ùÊñá‰ª∂ÂíåÁõÆÂΩïÂà∞ÈïúÂÉè‰∏≠„ÄÇ</p>
<p>Â∞Ü‰ªéÊûÑÂª∫‰∏ä‰∏ãÊñáÁõÆÂΩï‰∏≠<code>&lt;Ê∫êË∑ØÂæÑ&gt;</code>ÁöÑÊñá‰ª∂ÁõÆÂΩïÂ§çÂà∂Âà∞Êñ∞ÁöÑ‰∏ÄÂ±ÇÈïúÂÉèÂÜÖÁöÑ<code>&lt;ÁõÆÊ†áË∑ØÂæÑ&gt;</code>‰ΩçÁΩÆ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">COPY</span> src dest<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> <span class="o">[</span><span class="s2">&#34;src&#34;</span>, <span class="s2">&#34;dest&#34;</span><span class="o">]</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># &lt;srcÊ∫êË∑ØÂæÑ&gt;ÔºöÊ∫êÊñá‰ª∂ÊàñËÄÖÊ∫êÁõÆÂΩï</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># &lt;destÁõÆÊ†áË∑ØÂæÑ&gt;ÔºöÂÆπÂô®ÂÜÖÁöÑÊåáÂÆöË∑ØÂæÑÔºåËØ•Ë∑ØÂæÑ‰∏çÁî®‰∫ãÂÖàÂª∫Â•Ω„ÄÇÂ¶ÇÊûú‰∏çÂ≠òÂú®‰ºöËá™Âä®ÂàõÂª∫</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="cmd">CMD
</h3><p>ÊåáÂÆöÂÆπÂô®ÂêØÂä®ÂêéË¶ÅÂπ≤ÁöÑ‰∫ãÊÉÖ„ÄÇ</p>
<p>Êúâ‰∏§ÁßçÊ†ºÂºèÔºö</p>
<ul>
<li>shellÊ†ºÂºè</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># CMD &lt;ÂëΩ‰ª§&gt;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="nb">echo</span> <span class="s2">&#34;hello world&#34;</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>execÊ†ºÂºè</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># CMD [&#34;ÂèØÊâßË°åÊñá‰ª∂&#34;, &#34;ÂèÇÊï∞1&#34;, &#34;ÂèÇÊï∞2&#34; ...]</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;catalina.sh&#34;</span><span class="p">,</span> <span class="s2">&#34;run&#34;</span><span class="p">]</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ÂèÇÊï∞ÂàóË°®Ê†ºÂºè</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># CMD [&#34;ÂèÇÊï∞1&#34;, &#34;ÂèÇÊï∞2&#34; ....]Ôºå‰∏éENTRYPOINTÊåá‰ª§ÈÖçÂêà‰ΩøÁî®</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Dockerfile‰∏≠Â¶ÇÊûúÂá∫Áé∞Â§ö‰∏™<code>CMD</code>Êåá‰ª§ÔºåÂè™ÊúâÊúÄÂêé‰∏Ä‰∏™ÁîüÊïà„ÄÇ<code>CMD</code>‰ºöË¢´<code>docker run</code>‰πãÂêéÁöÑÂèÇÊï∞ÊõøÊç¢„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÂØπ‰∫étomcatÈïúÂÉèÔºåÊâßË°å‰ª•‰∏ãÂëΩ‰ª§‰ºöÊúâ‰∏çÂêåÁöÑÊïàÊûúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Âõ†‰∏∫tomcatÁöÑDockerfile‰∏≠ÊåáÂÆö‰∫Ü CMD [&#34;catalina.sh&#34;, &#34;run&#34;]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ÊâÄ‰ª•Áõ¥Êé•docker run Êó∂ÔºåÂÆπÂô®ÂêØÂä®Âêé‰ºöËá™Âä®ÊâßË°å catalina.sh run</span>
</span></span><span class="line"><span class="cl">docker run -it -p 8080:8080 tomcat
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÊåáÂÆöÂÆπÂô®ÂêØÂä®ÂêéÊâßË°å /bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Ê≠§Êó∂ÊåáÂÆöÁöÑ/bin/bash‰ºöË¶ÜÁõñÊéâDockerfile‰∏≠ÊåáÂÆöÁöÑ CMD [&#34;catalina.sh&#34;, &#34;run&#34;]</span>
</span></span><span class="line"><span class="cl">docker run -it -p 8080:8080 tomcat /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>CMD</code>ÊòØÂú®<code>docker run</code>Êó∂ËøêË°åÔºåËÄå <code>RUN</code>ÊòØÂú®<code>docker build</code>Êó∂ËøêË°å„ÄÇ</p>
<h3 id="entrypoint">ENTRYPOINT
</h3><p>Áî®Êù•ÊåáÂÆö‰∏Ä‰∏™ÂÆπÂô®ÂêØÂä®Êó∂Ë¶ÅËøêË°åÁöÑÂëΩ‰ª§„ÄÇ</p>
<p>Á±ª‰ºº‰∫é<code>CMD</code>ÂëΩ‰ª§Ôºå‰ΩÜÊòØ<code>ENTRYPOINT</code>‰∏ç‰ºöË¢´<code>docker run</code>ÂêéÈù¢ÁöÑÂëΩ‰ª§Ë¶ÜÁõñÔºåËøô‰∫õÂëΩ‰ª§ÂèÇÊï∞‰ºöË¢´ÂΩìÂÅöÂèÇÊï∞ÈÄÅÁªô<code>ENTRYPOINT</code>Êåá‰ª§ÊåáÂÆöÁöÑÁ®ãÂ∫è„ÄÇ</p>
<p><code>ENTRYPOINT</code>ÂèØ‰ª•Âíå<code>CMD</code>‰∏ÄËµ∑Áî®Ôºå‰∏ÄËà¨ÊòØÂèØÂèòÂèÇÊï∞Êâç‰ºö‰ΩøÁî®<code>CMD</code>ÔºåËøôÈáåÁöÑ<code>CMD</code>Á≠â‰∫éÊòØÂú®Áªô<code>ENTRYPOINT</code>‰º†ÂèÇ„ÄÇ</p>
<p>ÂΩìÊåáÂÆö‰∫Ü<code>ENTRYPOINT</code>ÂêéÔºå<code>CMD</code>ÁöÑÂê´‰πâÂ∞±ÂèëÁîü‰∫ÜÂèòÂåñÔºå‰∏çÂÜçÊòØÁõ¥Êé•ËøêË°åÊúüÂëΩ‰ª§ÔºåËÄåÊòØÂ∞Ü<code>CMD</code>ÁöÑÂÜÖÂÆπ‰Ωú‰∏∫ÂèÇÊï∞‰º†ÈÄíÁªô<code>ENTRYPOINT</code>Êåá‰ª§ÔºåÂÆÉ‰ª¨‰∏§‰∏™ÁªÑÂêà‰ºöÂèòÊàê <code>&lt;ENTRYPOINT&gt; &quot;&lt;CMD&gt;&quot;</code>„ÄÇ</p>
<p>‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> nginx</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&#34;nginx&#34;</span><span class="p">,</span> <span class="s2">&#34;-c&#34;</span><span class="p">]</span>  <span class="c1"># ÂÆöÂèÇ</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;/etc/nginx/nginx.conf&#34;</span><span class="p">]</span> <span class="c1"># ÂèòÂèÇ</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂØπ‰∫éÊ≠§DockerfileÔºåÊûÑÂª∫ÊàêÈïúÂÉè <code>nginx:test</code>ÂêéÔºåÂ¶ÇÊûúÊâßË°åÔºõ</p>
<ul>
<li>
<p><code>docker run nginx test</code>ÔºåÂàôÂÆπÂô®ÂêØÂä®ÂêéÔºå‰ºöÊâßË°å <code>nginx -c /etc/nginx/nginx.conf</code></p>
</li>
<li>
<p><code>docker run nginx:test /app/nginx/new.conf</code>ÔºåÂàôÂÆπÂô®ÂêØÂä®ÂêéÔºå‰ºöÊâßË°å <code>nginx -c /app/nginx/new.conf</code></p>
</li>
</ul>
<h2 id="ÊûÑÂª∫ÈïúÂÉè">ÊûÑÂª∫ÈïúÂÉè
</h2><p>ÂàõÂª∫ÂêçÁß∞‰∏∫<code>Dockerfile</code>ÁöÑÊñá‰ª∂ÔºåÁ§∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> ubuntu</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">MAINTAINER</span><span class="s"> lee&lt;lee@xxx.com&gt;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ENV</span> MYPATH /usr/local<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">WORKDIR</span><span class="s"> $MYPATH</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get install net-tools<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">EXPOSE</span><span class="s"> 80</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="nb">echo</span> <span class="nv">$MYPATH</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="nb">echo</span> <span class="s2">&#34;install ifconfig cmd into ubuntu success .....&#34;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> /bin/bash<span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÁºñÂÜôÂÆåÊàê‰πãÂêéÔºåÂ∞ÜÂÖ∂ÊûÑÂª∫ÊàêdockerÈïúÂÉè„ÄÇ</p>
<p>ÂëΩ‰ª§Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Ê≥®ÊÑèÔºöÂÆö‰πâÁöÑTAGÂêéÈù¢Êúâ‰∏™Á©∫Ê†ºÔºåÁ©∫Ê†ºÂêéÈù¢Êúâ‰∏™ÁÇπ</span>
</span></span><span class="line"><span class="cl"><span class="c1"># docker build -t Êñ∞ÈïúÂÉèÂêçÂ≠ó:TAG .</span>
</span></span><span class="line"><span class="cl">docker build -t ubuntu:1.0.1 .
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ËôöÊÇ¨ÈïúÂÉè">ËôöÊÇ¨ÈïúÂÉè
</h2><p>ËôöÊÇ¨ÈïúÂÉèÔºö‰ªìÂ∫ìÂêç„ÄÅÊ†áÁ≠æÂêçÈÉΩÊòØ <code>&lt;none&gt;</code>ÁöÑÈïúÂÉèÔºåÁß∞‰∏∫ dangling imagesÔºàËôöÊÇ¨ÈïúÂÉèÔºâ„ÄÇ</p>
<p>Âú®ÊûÑÂª∫ÊàñËÄÖÂà†Èô§ÈïúÂÉèÊó∂ÂèØËÉΩÁî±‰∫é‰∏Ä‰∫õÈîôËØØÂØºËá¥Âá∫Áé∞ËôöÊÇ¨ÈïúÂÉè„ÄÇ</p>
<p>‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÊûÑÂª∫Êó∂ÂÄôÊ≤°ÊúâÈïúÂÉèÂêç„ÄÅtag</span>
</span></span><span class="line"><span class="cl">docker build .
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂàóÂá∫docker‰∏≠ÁöÑËôöÊÇ¨ÈïúÂÉèÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker image ls -f <span class="nv">dangling</span><span class="o">=</span><span class="nb">true</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËôöÊÇ¨ÈïúÂÉè‰∏ÄËà¨ÊòØÂõ†‰∏∫‰∏Ä‰∫õÈîôËØØËÄåÂá∫Áé∞ÁöÑÔºåÊ≤°ÊúâÂ≠òÂú®‰ª∑ÂÄºÔºåÂèØ‰ª•Âà†Èô§Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Âà†Èô§ÊâÄÊúâÁöÑËôöÊÇ¨ÈïúÂÉè</span>
</span></span><span class="line"><span class="cl">docker image prune
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="12-dockerÂèëÂ∏ÉÂæÆÊúçÂä°"><strong>12-DockerÂèëÂ∏ÉÂæÆÊúçÂä°</strong>
</h1><h2 id="Êê≠Âª∫springbootÈ°πÁõÆ">Êê≠Âª∫SpringBootÈ°πÁõÆ
</h2><p>Êê≠Âª∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑSpringBootÈ°πÁõÆÔºö</p>
<ol>
<li>ÂàõÂª∫mavenÂ∑•Á®ãÔºåpom‰∏∫Ôºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;parent&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>2.5.6<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/parent&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>org.study<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>test-docker<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;packaging&gt;</span>pom<span class="nt">&lt;/packaging&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;modules&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;module&gt;</span>docker_boot<span class="nt">&lt;/module&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/modules&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;properties&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;maven.compiler.source&gt;</span>8<span class="nt">&lt;/maven.compiler.source&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;maven.compiler.target&gt;</span>8<span class="nt">&lt;/maven.compiler.target&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/properties&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/project&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>Êñ∞Âª∫ModuleÔºåpom‰∏∫Ôºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;parent&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>test-docker<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>org.study<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/parent&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>docker_boot<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;properties&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;maven.compiler.source&gt;</span>8<span class="nt">&lt;/maven.compiler.source&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;maven.compiler.target&gt;</span>8<span class="nt">&lt;/maven.compiler.target&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/properties&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-actuator<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependencies&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;build&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;plugins&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/plugin&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/plugins&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/build&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/project&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>ÁºñÂÜô‰∏Ä‰∏™ÈÖçÁΩÆÊñá‰ª∂</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">server</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">6001</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>ÁºñÂÜô‰∏ªÂêØÂä®Á±ª</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.study</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.SpringApplication</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @author tengyer 2022/05/06 16:34
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nd">@SpringBootApplication</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DockerBootApplication</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">DockerBootApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>ÁºñÂÜô‰∏Ä‰∏™Controller</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.study.controller</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.beans.factory.annotation.Value</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.UUID</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @author tengyer 2022/05/06 16:35
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nd">@RestController</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">OrderController</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Value</span><span class="p">(</span><span class="s">&#34;${server.port}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">port</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&#34;/order/docker&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">helloDocker</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&#34;hello world \t&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;\t&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;/order/index&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RequestMethod</span><span class="p">.</span><span class="na">GET</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">index</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&#34;ÊúçÂä°Á´ØÂè£Âè∑Ôºö&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;\t&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;\t&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Idea‰∏≠ËøêË°åÊ≤°ÊúâÈóÆÈ¢òÊó∂ÔºåÂ∞ÜÂÖ∂‰ΩøÁî®mavenÁöÑ<code>package</code>ÊâìÊàêjarÂåÖ„ÄÇ</p>
<h2 id="ÂèëÂ∏ÉÂæÆÊúçÂä°È°πÁõÆÂà∞dockerÂÆπÂô®">ÂèëÂ∏ÉÂæÆÊúçÂä°È°πÁõÆÂà∞DockerÂÆπÂô®
</h2><ol>
<li>
<p>Â∞ÜÈ°πÁõÆjarÂåÖ‰∏ä‰º†Âà∞ÊúçÂä°Âô®</p>
</li>
<li>
<p>ÁºñÂÜôDockerfile</p>
</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> openjdk:8-oracle</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">MAINTAINER</span><span class="s"> lee</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Âú®‰∏ªÊú∫ /var/lib/dockerÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™‰∏¥Êó∂Êñá‰ª∂ÔºåÂπ∂ÈìæÊé•Âà∞ÂÆπÂô®ÁöÑ /tmp</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">VOLUME</span><span class="s"> /tmp</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Â∞ÜjarÂåÖÊ∑ªÂä†Âà∞ÂÆπÂô®‰∏≠ÔºåÂπ∂ÂëΩÂêç‰∏∫ springboot_docker.jar</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ADD</span> docker_boot-1.0-SNAPSHOT.jar /springboot_docker.jar<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># ËøêË°åjarÂåÖ</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> bash -c <span class="s1">&#39;touch /springboot_docker.jar&#39;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&#34;java&#34;</span><span class="p">,</span> <span class="s2">&#34;-jar&#34;</span><span class="p">,</span> <span class="s2">&#34;/springboot_docker.jar&#34;</span><span class="p">]</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># SpringBootÈ°πÁõÆÈÖçÁΩÆÁöÑÁ´ØÂè£Âè∑‰∏∫6001ÔºåÈúÄË¶ÅÂ∞Ü6001Êö¥Èú≤Âá∫Âéª</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">EXPOSE</span><span class="s"> 6001</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>ÊûÑÂª∫ÈïúÂÉè</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker build -t springboot_docker:1.0 .
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>ÂêØÂä®ÂÆπÂô®Ôºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -d -p 6001:6001 --name springboot springboot_docker:1.0
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="13-dockerÁΩëÁªú"><strong>13-DockerÁΩëÁªú</strong>
</h1><h2 id="docker-ÁΩëÁªú">Docker ÁΩëÁªú
</h2><p>dockerÂÆâË£ÖÂπ∂ÂêØÂä®ÊúçÂä°ÂêéÔºå‰ºöÂú®ÂÆø‰∏ªÊú∫‰∏≠Ê∑ªÂä†‰∏Ä‰∏™ËôöÊãüÁΩëÂç°„ÄÇ</p>
<p>Âú®DockerÊúçÂä°ÂêØÂä®ÂâçÔºå‰ΩøÁî® <code>ifconfig</code> Êàñ <code>ip addr</code> Êü•ÁúãÁΩëÂç°‰ø°ÊÅØÔºö</p>
<ul>
<li>
<p><code>ens33</code>Êàñ<code>eth0</code>ÔºöÊú¨Êú∫ÁΩëÂç°</p>
</li>
<li>
<p><code>lo</code>ÔºöÊú¨Êú∫ÂõûÁéØÁΩëÁªúÁΩëÂç°</p>
</li>
<li>
<p>ÂèØËÉΩÊúâ<code>virbr0</code>ÔºàCentOSÂÆâË£ÖÊó∂Â¶ÇÊûúÈÄâÊã©ÁöÑÊúâÁõ∏ÂÖ≥ËôöÊãüÂåñÊúçÂä°ÔºåÂ∞±‰ºöÂ§ö‰∏Ä‰∏™‰ª•ÁΩëÊ°•ËøûÊé•ÁöÑÁßÅÁΩëÂú∞ÂùÄÁöÑ<code>virbr0</code>ÁΩëÂç°Ôºå‰ΩúÁî®ÊòØ‰∏∫ËøûÊé•ËôöÊãüÁΩëÂç°Êèê‰æõNATËÆøÈóÆÂ§ñÁΩëÁöÑÂäüËÉΩ„ÄÇÂ¶ÇÊûúË¶ÅÁßªÈô§ËØ•ÊúçÂä°ÔºåÂèØ‰ª•‰ΩøÁî® <code>yum remove libvirt-libs.x86_64</code>Ôºâ</p>
</li>
</ul>
<p>‰ΩøÁî® <code>systemctl start docker</code>ÂêØÂä®DockerÊúçÂä°ÂêéÔºå‰ºöÂ§öÂá∫‰∏Ä‰∏™ <code>docker0</code> ÁΩëÂç°„ÄÇ</p>
<p>‰ΩúÁî®Ôºö</p>
<ul>
<li>
<p>ÂÆπÂô®Èó¥ÁöÑ‰∫íËÅîÂíåÈÄö‰ø°‰ª•ÂèäÁ´ØÂè£Êò†Â∞Ñ</p>
</li>
<li>
<p>ÂÆπÂô®IPÂèòÂä®Êó∂ÂÄôÂèØ‰ª•ÈÄöËøáÊúçÂä°ÂêçÁõ¥Êé•ÁΩëÁªúÈÄö‰ø°ËÄå‰∏çÂèóÂà∞ÂΩ±Âìç</p>
</li>
</ul>
<p>DockerÂÆπÂô®ÁöÑÁΩëÁªúÈöîÁ¶ªÔºåÊòØÈÄöËøáLinuxÂÜÖÊ†∏ÁâπÊÄß <code>namespace</code>Âíå <code>cgroup</code> ÂÆûÁé∞ÁöÑ„ÄÇ</p>
<h2 id="dockerÁΩëÁªúÂëΩ‰ª§">dockerÁΩëÁªúÂëΩ‰ª§
</h2><p>Êü•ÁúãDockerÁΩëÁªúÊ®°ÂºèÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker network ls
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúÊ≤°Êúâ‰øÆÊîπËøádocker networkÔºåÂàôÈªòËÆ§Êúâ3‰∏™ÁΩëÁªúÊ®°ÂºèÔºö</p>
<ul>
<li>
<p><code>bridge</code></p>
</li>
<li>
<p><code>host</code></p>
</li>
<li>
<p><code>none</code></p>
</li>
</ul>
<p>Ê∑ªÂä†DockerÁΩëÁªúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker network add xxx
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âà†Èô§DockerÁΩëÁªúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker network rm xxx
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êü•ÁúãÁΩëÁªúÂÖÉÊï∞ÊçÆÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker network inspect xxx
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âà†Èô§ÊâÄÊúâÊó†ÊïàÁöÑÁΩëÁªúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker network prune
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="docker-ÁΩëÁªúÊ®°Âºè">Docker ÁΩëÁªúÊ®°Âºè
</h2><p>Docker ÁöÑÁΩëÁªúÊ®°ÂºèÔºö</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ÁΩëÁªúÊ®°Âºè</th>
<th>ÁÆÄ‰ªã</th>
<th>‰ΩøÁî®ÊñπÂºè</th>
</tr>
</thead>
<tbody>
<tr>
<td>bridge</td>
<td>‰∏∫ÊØè‰∏Ä‰∏™ÂÆπÂô®ÂàÜÈÖç„ÄÅËÆæÁΩÆIPÁ≠âÔºåÂπ∂Â∞ÜÂÆπÂô®ËøûÊé•Âà∞‰∏Ä‰∏™<code>docker0</code>ËôöÊãüÁΩëÊ°•ÔºåÈªòËÆ§‰∏∫ËØ•Ê®°Âºè</td>
<td><code>--network bridge</code></td>
</tr>
<tr>
<td>host</td>
<td>ÂÆπÂô®Â∞Ü‰∏ç‰ºöËôöÊãüÂá∫Ëá™Â∑±ÁöÑÁΩëÂç°„ÄÅÈÖçÁΩÆËá™Â∑±ÁöÑIPÁ≠âÔºåËÄåÊòØ‰ΩøÁî®ÂÆø‰∏ªÊú∫ÁöÑIPÂíåÁ´ØÂè£</td>
<td><code>--network host</code></td>
</tr>
<tr>
<td>none</td>
<td>ÂÆπÂô®ÊúâÁã¨Á´ãÁöÑ Network namespaceÔºå‰ΩÜÂπ∂Ê≤°ÊúâÂØπÈΩêËøõË°å‰ªª‰ΩïÁΩëÁªúËÆæÁΩÆÔºåÂ¶ÇÂàÜÈÖç <code>veth pari</code> Âíå ÁΩëÊ°•ËøûÊé•„ÄÅIPÁ≠â</td>
<td><code>--network none</code></td>
</tr>
<tr>
<td>container</td>
<td>Êñ∞ÂàõÂª∫ÁöÑÂÆπÂô®‰∏ç‰ºöÂàõÂª∫Ëá™Â∑±ÁöÑÁΩëÂç°ÂíåÈÖçÁΩÆËá™Â∑±ÁöÑIPÔºåËÄåÊòØÂíå‰∏Ä‰∏™ÊåáÂÆöÁöÑÂÆπÂô®ÂÖ±‰∫´IP„ÄÅÁ´ØÂè£ËåÉÂõ¥Á≠â</td>
<td><code>--network container:NAMEÊàñËÄÖÂÆπÂô®ID</code></td>
</tr>
</tbody>
</table></div>
<p>Êü•ÁúãÊüê‰∏™ÂÆπÂô®ÁöÑÁΩëÁªúÊ®°ÂºèÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÈÄöËøáinspectËé∑ÂèñÂÆπÂô®‰ø°ÊÅØÔºåÊúÄÂêé20Ë°åÂç≥‰∏∫ÂÆπÂô®ÁöÑÁΩëÁªúÊ®°Âºè‰ø°ÊÅØ</span>
</span></span><span class="line"><span class="cl">docker inspect ÂÆπÂô®ID <span class="p">|</span> tail -n <span class="m">20</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="docker0">docker0
</h2><p>Docker ÊúçÂä°ÈªòËÆ§‰ºöÂàõÂª∫‰∏Ä‰∏™<code>docker0</code>ÁΩëÊ°•ÔºàÂÖ∂‰∏äÊúâ‰∏Ä‰∏™<code>docker0</code>ÂÜÖÈÉ®Êé•Âè£ÔºâÔºåËØ•Ê°•Êé•ÁΩëÁªúÁöÑÂêçÁß∞‰∏∫ <code>docker0</code>ÔºåÂÆÉÂú®ÂÜÖÊ†∏Â±ÇËøûÈÄö‰∫ÜÂÖ∂‰ªñÁöÑÁâ©ÁêÜÊàñËôöÊãüÁΩëÂç°ÔºåËøôÂ∞±Â∞ÜÊâÄÊúâÂÆπÂô®ÂíåÊú¨Âú∞‰∏ªÊú∫ÈÉΩÊîæÂà∞Âêå‰∏Ä‰∏™Áâ©ÁêÜÁΩëÁªú„ÄÇ</p>
<p>DockerÈªòËÆ§ÊåáÂÆö‰∫Ü<code>docker0</code>Êé•Âè£ÁöÑIPÂú∞ÂùÄÂíåÂ≠êÁΩëÊé©Á†ÅÔºåËÆ©‰∏ªÊú∫ÂíåÂÆπÂô®‰πãÈó¥ÂèØ‰ª•ÈÄöËøáÁΩëÊ°•‰∫íÁõ∏ÈÄö‰ø°„ÄÇ</p>
<p>Êü•Áúã<code>bridge</code>ÁΩëÁªúÁöÑËØ¶ÁªÜ‰ø°ÊÅØÔºåÂπ∂ÈÄöËøá<code>grep</code>Ëé∑ÂèñÂêçÁß∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker network inspect bridge <span class="p">|</span> grep name
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•ÁúãÂà∞ÂÖ∂ÂêçÁß∞‰∏∫<code>docker0</code>„ÄÇ</p>
<h2 id="bridgeÊ®°Âºè">bridgeÊ®°Âºè
</h2><p>Docker‰ΩøÁî®LinuxÊ°•Êé•ÔºåÂú®ÂÆø‰∏ªÊú∫ËôöÊãü‰∏Ä‰∏™<code>Docker</code>ÂÆπÂô®ÁΩëÊ°•Ôºà<code>docker0</code>ÔºâÔºåDockerÂêØÂä®‰∏Ä‰∏™ÂÆπÂô®Êó∂‰ºöÊ†πÊçÆ<code>Docker</code>ÁΩëÊ°•ÁöÑÁΩëÊÆµÂàÜÈÖçÁªôÂÆπÂô®‰∏Ä‰∏™IPÂú∞ÂùÄÔºåÁß∞‰∏∫<code>Container-IP</code>ÔºåÂêåÊó∂DockerÁΩëÊ°•ÊòØÊØè‰∏™ÂÆπÂô®ÁöÑÈªòËÆ§ÁΩëÂÖ≥„ÄÇÂõ†‰∏∫Âú®Âêå‰∏Ä‰∏™ÂÆø‰∏ªÊú∫ÂÜÖÁöÑÂÆπÂô®Êé•ÂÖ•Âêå‰∏Ä‰∏™ÁΩëÊ°•ÔºåËøôÊ†∑ÂÆπÂô®‰πãÈó¥Â∞±ËÉΩÂ§üÈÄöËøáÂÆπÂô®ÁöÑ<code>Container-IP</code>Áõ¥Êé•ÈÄö‰ø°„ÄÇ</p>
<p><code>docker run</code>ÁöÑÊó∂ÂÄôÔºåÊ≤°ÊúâÊåáÂÆö<code>--network</code>ÁöÑËØùÔºåÈªòËÆ§‰ΩøÁî®ÁöÑÁΩëÊ°•Ê®°ÂºèÂ∞±ÊòØ<code>bridge</code>Ôºå‰ΩøÁî®ÁöÑÂ∞±ÊòØ<code>docker0</code>„ÄÇÂú®ÂÆø‰∏ªÊú∫<code>ifconfig</code>Â∞±Ëã¶ÂΩπÁúãÂà∞<code>docker0</code>ÂíåËá™Â∑±<code>create</code>ÁöÑ<code>network</code>„ÄÇ</p>
<p>ÁΩëÊ°•<code>docker0</code>ÂàõÂª∫‰∏ÄÂØπÂØπÁ≠âËôöÊãüËÆæÂ§áÊé•Âè£Ôºå‰∏Ä‰∏™Âè´<code>veth</code>ÔºåÂè¶‰∏Ä‰∏™Âè´<code>eth0</code>ÔºåÊàêÂØπÂåπÈÖçÔºö</p>
<p>Êï¥‰∏™ÂÆø‰∏ªÊú∫ÁöÑÁΩëÊ°•Ê®°ÂºèÈÉΩÊòØ<code>docker0</code>ÔºåÁ±ª‰ºº‰∏Ä‰∏™‰∫§Êç¢Êú∫Êúâ‰∏ÄÂ†ÜÊé•Âè£ÔºåÊØè‰∏™Êé•Âè£Âè´ <code>veth</code>ÔºåÂú®Êú¨Âú∞‰∏ªÊú∫ÂíåÂÆπÂô®ÂÜÖÂàÜÂà´ÂàõÂª∫‰∏Ä‰∏™ËôöÊãüÊé•Âè£ÔºåÂπ∂ËÆ©‰ªñ‰ª¨ÂΩºÊ≠§ËÅîÈÄöÔºàËøôÊ†∑‰∏ÄÂØπÊé•Âè£Âè´ÂÅö <code>veth pair</code>Ôºâ„ÄÇ</p>
<p>ÊØè‰∏™ÂÆπÂô®ÂÆû‰æãÂÜÖÈÉ®‰πüÊúâ‰∏ÄÂùóÁΩëÂç°ÔºåÂÆπÂô®ÂÜÖÁöÑÁΩëÂç°Êé•Âè£Âè´ÂÅö<code>eth0</code>„ÄÇ</p>
<p><code>docker0</code>‰∏äÈù¢ÁöÑÊØè‰∏™<code>veth</code>ÂåπÈÖçÊüê‰∏™ÂÆπÂô®ÂÆû‰æãÂÜÖÈÉ®ÁöÑ<code>eth0</code>Ôºå‰∏§‰∏§ÈÖçÂØπÔºå‰∏Ä‰∏ÄÂåπÈÖç„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/bridge.webp"
	width="1087"
	height="540"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/bridge_hu8736915611734597603.webp 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/bridge_hu7485193624844484849.webp 1024w"
	loading="lazy"
	
		alt="bridge"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="483px"
	
></p>
<p>‰æãÂ¶ÇÔºö</p>
<p>ÂêØÂä®tomcatÂÆπÂô®ÔºåËøõÂÖ•tomcatÂÆπÂô®ÂêéÔºåÊâßË°å <code>ip addr</code>ÔºåÂèØ‰ª•ÁúãÂà∞ÂÖ∂ÁΩëÂç°‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">1: lo ..................
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ÂÆπÂô®ÂÜÖÁöÑÁΩëÂç°‰∏∫ eth0
</span></span><span class="line"><span class="cl">@Á¨¶Âè∑ÂêéÈù¢Â∞±ÊòØÂÆø‰∏ªÊú∫‰∏äÂØπÂ∫îÁöÑvethÁΩëÂç°ÁöÑÁºñÂè∑28
</span></span><span class="line"><span class="cl">27: eth0@if28 ...............................
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ÂÆø‰∏ªÊú∫ÊâßË°å <code>ip addr</code> Êü•ÁúãÂÆø‰∏ªÊú∫ÁΩëÂç°‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">ÊØè‰∏™vethÈÉΩÊúâ‰∏™ÁºñÂè∑ÔºövethXXXXXX
</span></span><span class="line"><span class="cl">@Á¨¶Âè∑ÂêéÈù¢ÂØπÂ∫îÂ∞±ÊòØÂÆπÂô®ÂÜÖÁöÑeth0ÁΩëÂç°ÁºñÂè∑27
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">28: vethXXXXXX@if27  ................
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="hostÊ®°Âºè">hostÊ®°Âºè
</h2><p>Áõ¥Êé•‰ΩøÁî®ÂÆø‰∏ªÊú∫ÁöÑ IP Âú∞ÂùÄ‰∏éÂ§ñÁïåËøõË°åÈÄö‰ø°Ôºå‰∏çÂÜçÈúÄË¶ÅÈ¢ùÂ§ñËøõË°å NAT ËΩ¨Êç¢„ÄÇ</p>
<p>ÂÆπÂô®Â∞Ü‰∏ç‰ºöËé∑Âæó‰∏Ä‰∏™Áã¨Á´ãÁöÑ Network NamespaceÔºåËÄåÊòØÂíåÂÆø‰∏ªÊú∫ÂÖ±Áî®‰∏Ä‰∏™ Network space„ÄÇ</p>
<p>ÂÆπÂô®Â∞Ü‰∏ç‰ºöËôöÊãüÂá∫Ëá™Â∑±ÁöÑÁΩëÂç°ÔºåËÄåÊòØÁõ¥Êé•‰ΩøÁî®ÂÆø‰∏ªÊú∫ÁöÑ IP ÂíåÁ´ØÂè£„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/host.webp"
	width="1087"
	height="540"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/host_hu8030781564049851391.webp 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/host_hu10491428708074790883.webp 1024w"
	loading="lazy"
	
		alt="host"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="483px"
	
></p>
<p>Â¶ÇÊûúÂú® <code>docker run</code> ÂëΩ‰ª§‰∏≠ÂêåÊó∂‰ΩøÁî®‰∫Ü <code>--network host</code> Âíå <code>-p</code>Á´ØÂè£Êò†Â∞ÑÔºå‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -p 8082:8080 --network host tomcat
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÇ£‰πà‰ºöÂá∫Áé∞‰∏Ä‰∏™Ë≠¶ÂëäÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">WARNING: Published ports are discarded when using host network mode
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âõ†‰∏∫Ê≠§Êó∂Â∑≤Áªè‰ΩøÁî®‰∫Ü<code>host</code>Ê®°ÂºèÔºåÊú¨Ë∫´Â∞±ÊòØÁõ¥Êé•‰ΩøÁî®ÁöÑÂÆø‰∏ªÊú∫ÁöÑIPÂíåÁ´ØÂè£ÔºåÊ≠§Êó∂ÁöÑ<code>-p</code>Á´ØÂè£Êò†Â∞ÑÂ∞±Ê≤°Êúâ‰∫ÜÊÑè‰πâÔºå‰πü‰∏ç‰ºöÁîüÊïàÔºåÁ´ØÂè£Âè∑ËøòÊòØ‰ºö‰ª•‰∏ªÊú∫Á´ØÂè£Âè∑‰∏∫‰∏ª„ÄÇ</p>
<p>Ê≠£Á°ÆÂÅöÊ≥ïÊòØÔºö‰∏çÂÜçËøõË°å<code>-p</code>Á´ØÂè£Êò†Â∞ÑÔºåÊàñËÄÖÊîπÁî®<code>bridge</code>Ê®°Âºè</p>
<h2 id="noneÊ®°Âºè">noneÊ®°Âºè
</h2><p>Á¶ÅÁî®ÁΩëÁªúÂäüËÉΩ„ÄÇ</p>
<p>Âú®<code>none</code>Ê®°Âºè‰∏ãÔºåÂπ∂‰∏ç‰∏∫dockerÂÆπÂô®ËøõË°å‰ªª‰ΩïÁΩëÁªúÈÖçÁΩÆ„ÄÇËøõÂÖ•ÂÆπÂô®ÂÜÖÔºå‰ΩøÁî® <code>ip addr</code>Êü•ÁúãÁΩëÂç°‰ø°ÊÅØÔºåÂè™ËÉΩÁúãÂà∞ <code>lo</code>ÔºàÊú¨Âú∞ÂõûÁéØÁΩëÁªú<code>127.0.0.1</code>ÁΩëÂç°Ôºâ„ÄÇ</p>
<h2 id="containerÊ®°Âºè">containerÊ®°Âºè
</h2><p>Êñ∞Âª∫ÁöÑÂÆπÂô®ÂíåÂ∑≤ÁªèÂ≠òÂú®ÁöÑ‰∏Ä‰∏™ÂÆπÂô®ÂÖ±‰∫´ÁΩëÁªúIPÈÖçÁΩÆÔºåËÄå‰∏çÊòØÂíåÂÆø‰∏ªÊú∫ÂÖ±‰∫´„ÄÇ</p>
<p>Êñ∞ÂàõÂª∫ÁöÑÂÆπÂô®‰∏ç‰ºöÂàõÂª∫Ëá™Â∑±ÁöÑÁΩëÂç°„ÄÅIPÔºåËÄåÊòØÂíå‰∏Ä‰∏™ÊåáÂÆöÁöÑÂÆπÂô®ÂÖ±‰∫´IP„ÄÅÁ´ØÂè£ËåÉÂõ¥„ÄÇ‰∏§‰∏™ÂÆπÂô®Èô§‰∫ÜÁΩëÁªúÂÖ±‰∫´ÔºåÂÖ∂‰ªñÁöÑÂ¶ÇÊñá‰ª∂Á≥ªÁªü„ÄÅËøõÁ®ãÂàóË°®‰æùÁÑ∂ÊòØÈöîÁ¶ªÁöÑ„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/container.webp"
	width="961"
	height="579"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/container_hu2014552806763730183.webp 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/container_hu13214479242447087862.webp 1024w"
	loading="lazy"
	
		alt="container"
	
	
		class="gallery-image" 
		data-flex-grow="165"
		data-flex-basis="398px"
	
></p>
<p>Á§∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -it --name alpine1 alpine /bin/sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÊåáÂÆöÂíå alpine1 ÂÆπÂô®ÂÖ±‰∫´ÁΩëÁªú</span>
</span></span><span class="line"><span class="cl">docker run -it --network container:alpine1 --name alpine2 alpine /bin/sh
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≠§Êó∂‰ΩøÁî® <code>ip addr</code>Êü•Áúã‰∏§Âè∞ÂÆπÂô®ÁöÑÁΩëÁªúÔºå‰ºöÂèëÁé∞‰∏§Âè∞ÂÆπÂô®ÁöÑ<code>eth0</code>ÁΩëÂç°ÂÜÖÁöÑIPÁ≠â‰ø°ÊÅØÂÆåÂÖ®Áõ∏Âêå„ÄÇ</p>
<p>Â¶ÇÊûúÂÖ≥Êéâ‰∫Ü<code>alpine1</code>ÂÆπÂô®ÔºåÂõ†‰∏∫<code>alpine2</code>ÁöÑÁΩëÁªú‰ΩøÁî®ÁöÑ<code>alpine1</code>ÂÖ±‰∫´ÁΩëÁªúÔºåÊâÄ‰ª•ÂÖ≥Êéâ<code>alpin1</code>ÂêéÔºå<code>alpine2</code>ÁöÑ<code>eth0</code>ÁΩëÂç°‰πüÈöè‰πãÊ∂àÂ§±‰∫Ü„ÄÇ</p>
<h2 id="Ëá™ÂÆö‰πâÁΩëÁªú">Ëá™ÂÆö‰πâÁΩëÁªú
</h2><p>ÂÆπÂô®Èó¥ÁöÑ‰∫íËÅîÂíåÈÄö‰ø°‰ª•ÂèäÁ´ØÂè£Êò†Â∞Ñ„ÄÇ</p>
<p>ÂÆπÂô® IP ÂèòÂä®Êó∂ÂÄôÂèØ‰ª•ÈÄöËøáÊúçÂä°ÂêçÁõ¥Êé•ÁΩëÁªúÈÄö‰ø°ËÄå‰∏çÂèóÂΩ±Âìç„ÄÇÔºàÁ±ª‰ººEurekaÔºåÈÄöËøáÊúçÂä°ÂêçÁõ¥Êé•‰∫íÁõ∏ÈÄö‰ø°ÔºåËÄå‰∏çÊòØÂÜôÊ≠ªIPÂú∞ÂùÄÔºâ„ÄÇ</p>
<p>docker‰∏≠ËøòÊúâ‰∏Ä‰∏™ <code>--link</code> ËøõË°åÂÆπÂô®ÁΩëÁªú‰∫íËÅîÔºå‰ΩÜÊòØÂ∑≤ÁªèË¢´Ê†áËÆ∞‰∏∫ËøáÊó∂ÁöÑÔºåÂèØËÉΩ‰ºöÂú®Â∞ÜÊù•ÁöÑÁâàÊú¨‰∏≠ÁßªÈô§Ëøô‰∏™ÂäüËÉΩ„ÄÇÊé®Ëçê‰ΩøÁî®Ëá™ÂÆö‰πâÁΩëÁªúÊõøÊç¢link„ÄÇ</p>
<p>Ëá™ÂÆö‰πâÊ°•Êé•ÁΩëÁªúÔºàËá™ÂÆö‰πâÁΩëÁªúÈªòËÆ§‰ΩøÁî®ÁöÑÊòØÊ°•Êé•ÁΩëÁªú <code>bridge</code>ÔºâÔºö</p>
<ol>
<li>Êñ∞Âª∫Ëá™ÂÆö‰πâÁΩëÁªú</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker network create tomcat_network
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>Êü•ÁúãÁΩëÁªúÂàóË°®</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker network ls
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>ÂàõÂª∫ÂÆπÂô®Êó∂ÔºåÊåáÂÆöÂä†ÂÖ•Êàë‰ª¨Ëá™ÂÆö‰πâÁöÑÁΩëÁªú‰∏≠</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -d -p 8081:8080 --network tomcat_network --name tomcat1 tomcat:8.5-jdk8-corretto
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker run -d -p 8082:8080 --network tomcat_network --name tomcat2 tomcat:8.5-jdk8-corretto
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>Ê≠§Êó∂ËøõÂÖ•<code>tomcat1</code>‰∏≠Ôºå‰ΩøÁî®<code>ping</code>ÂëΩ‰ª§ÊµãËØïËøûÊé•<code>tomcat2</code>ÂÆπÂô®ÂêçÔºåÂèëÁé∞ÂèØ‰ª•Ê≠£Â∏∏ËøûÈÄö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÂÆâË£ÖifconfigÂëΩ‰ª§</span>
</span></span><span class="line"><span class="cl">yum install -y net-tools
</span></span><span class="line"><span class="cl"><span class="c1"># ÂÆâË£Öip addrÂëΩ‰ª§</span>
</span></span><span class="line"><span class="cl">yum install -y iproute
</span></span><span class="line"><span class="cl"><span class="c1"># ÂÆâË£ÖpingÂëΩ‰ª§</span>
</span></span><span class="line"><span class="cl">yum install -y iputils
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Áõ¥Êé•pingÂÆπÂô®ÂêçÔºå‰∏çÈúÄË¶Åping IPÂú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl">ping tomcat2
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="linkËøûÊé•">linkËøûÊé•
</h2><p>Á§∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÂêØÂä®‰∏ÄÂè∞mysqlÂÆπÂô®</span>
</span></span><span class="line"><span class="cl"><span class="c1"># --name ‰∏∫ÂÆπÂô®ÊåáÂÆö‰∏Ä‰∏™Âà´Âêç</span>
</span></span><span class="line"><span class="cl">docker run --name mysql-matomo -p 3308:3306 -e <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>root -d mysql:8.0.28
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂêØÂä®Âè¶‰∏Ä‰∏™ÂÆπÂô®ÔºåÈÄöËøá--linkËøûÊé•Âà∞mysqlÂÆπÂô®</span>
</span></span><span class="line"><span class="cl"><span class="c1"># --link ÂÆπÂô®ÂêçÁß∞:Êú¨ÂÆπÂô®ËøûÊé•ÂØπÊñπÊó∂ÁöÑÂà´Âêç</span>
</span></span><span class="line"><span class="cl">docker run -d -p 8888:80 --link mysql-matomo:db --name matomo matomo:4.9.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Ê≠§Êó∂ÔºåÂú®matomoÂÆπÂô®‰∏≠Ôºå‰æøÂèØ‰ª•ÈÄöËøá db Ëøô‰∏™hostnameËøûÊé•Âà∞mysql-matomoÂÆπÂô®ÔºåËÄåÊó†È°ªÂÜçÈÄöËøáip</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ËøûÊé•Âú∞ÂùÄÔºödb:3306</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="14-docker-composeÂÆπÂô®ÁºñÊéí"><strong>14-Docker-composeÂÆπÂô®ÁºñÊéí</strong>
</h1><h2 id="docker-compose">Docker-compose
</h2><p><code>Docker-Compose</code> ÊòØ Docker ÂÆòÊñπÁöÑÂºÄÊ∫êÈ°πÁõÆÔºåË¥üË¥£ÂÆûÁé∞ÂØπDockerÂÆπÂô®ÈõÜÁæ§ÁöÑÂø´ÈÄüÁºñÊéí„ÄÇ</p>
<p><code>Docker-Compose</code>ÂèØ‰ª•ÁÆ°ÁêÜÂ§ö‰∏™DockerÂÆπÂô®ÁªÑÊàê‰∏Ä‰∏™Â∫îÁî®„ÄÇÈúÄË¶ÅÂÆö‰πâ‰∏Ä‰∏™yamlÊ†ºÂºèÁöÑÈÖçÁΩÆÊñá‰ª∂ <code>docker-compose.yml</code>ÔºåÈÖçÁΩÆÂ•ΩÂ§ö‰∏™ÂÆπÂô®‰πãÈó¥ÁöÑË∞ÉÁî®ÂÖ≥Á≥ªÔºåÁÑ∂ÂêéÂè™ÈúÄË¶Å‰∏Ä‰∏™ÂëΩ‰ª§Â∞±ËÉΩÂêåÊó∂ÂêØÂä®/ÂÖ≥Èó≠Ëøô‰∫õÂÆπÂô®„ÄÇ</p>
<p>DockerÂª∫ËÆÆÊàë‰ª¨ÊØè‰∏™ÂÆπÂô®‰∏≠Âè™ËøêË°å‰∏Ä‰∏™ÊúçÂä°ÔºåÂõ†‰∏∫DockerÂÆπÂô®Êú¨Ë∫´Âç†Áî®ËµÑÊ∫êÊûÅÂ∞ëÔºåÊâÄ‰ª•ÊúÄÂ•ΩÊòØÂ∞ÜÊØè‰∏™ÊúçÂä°ÂçïÁã¨ÁöÑÂàÜÂâ≤ÂºÄÊù•„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÊàë‰ª¨ÈúÄË¶ÅÂêåÊó∂ÈÉ®ÁΩ≤Â§ö‰∏™ÊúçÂä°ÔºåÊØè‰∏™ÊúçÂä°ÂçïÁã¨ÊûÑÂª∫ÈïúÂÉèÊûÑÂª∫ÂÆπÂô®Â∞±‰ºöÊØîËæÉÈ∫ªÁÉ¶„ÄÇÊâÄ‰ª• Docker ÂÆòÊñπÊé®Âá∫‰∫Ü <code>docker-compose</code> Â§öÊúçÂä°ÈÉ®ÁΩ≤ÁöÑÂ∑•ÂÖ∑„ÄÇ</p>
<p>ComposeÂÖÅËÆ∏Áî®Êà∑ÈÄöËøá‰∏Ä‰∏™ÂçïÁã¨ÁöÑ <code>docker-compose.yml</code> Ê®°ÊùøÊñá‰ª∂Êù•ÂÆö‰πâ‰∏ÄÁªÑÁõ∏ÂÖ≥ËÅîÁöÑÂ∫îÁî®ÂÆπÂô®‰∏∫‰∏Ä‰∏™È°πÁõÆÔºà<code>project</code>Ôºâ„ÄÇÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÁî®‰∏Ä‰∏™ÈÖçÁΩÆÊñá‰ª∂ÂÆö‰πâ‰∏Ä‰∏™Â§öÂÆπÂô®ÁöÑÂ∫îÁî®ÔºåÁÑ∂Âêé‰ΩøÁî®‰∏ÄÊù°Êåá‰ª§ÂÆâË£ÖËøô‰∏™Â∫îÁî®ÁöÑÊâÄÊúâ‰æùËµñÔºåÂÆåÊàêÊûÑÂª∫„ÄÇ</p>
<p>Ê†∏ÂøÉÊ¶ÇÂøµÔºö</p>
<ul>
<li>
<p>ÊúçÂä°Ôºà<code>service</code>ÔºâÔºö‰∏Ä‰∏™‰∏™Â∫îÁî®ÂÆπÂô®ÂÆû‰æã</p>
</li>
<li>
<p>Â∑•Á®ãÔºà<code>project</code>ÔºâÔºöÁî±‰∏ÄÁªÑÂÖ≥ËÅîÁöÑÂ∫îÁî®ÂÆπÂô®ÁªÑÊàêÁöÑ‰∏Ä‰∏™ÂÆåÊï¥‰∏öÂä°ÂçïÂÖÉÔºåÂú®<code>docker-compose.yml</code>‰∏≠ÂÆö‰πâ</p>
</li>
</ul>
<p>Compose‰ΩøÁî®ÁöÑ‰∏â‰∏™Ê≠•È™§Ôºö</p>
<ol>
<li>ÁºñÂÜô Dockerfile ÂÆö‰πâÂêÑ‰∏™Â∫îÁî®ÂÆπÂô®ÔºåÂπ∂ÊûÑÂª∫Âá∫ÂØπÂ∫îÁöÑÈïúÂÉèÊñá‰ª∂</li>
<li>ÁºñÂÜô <code>docker-compose.yml</code>ÔºåÂÆö‰πâ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ‰∏öÂä°ÂçïÂÖÉÔºåÂÆâÊéíÂ•ΩÊï¥‰ΩìÂ∫îÁî®‰∏≠ÁöÑÂêÑ‰∏™ÂÆπÂô®ÊúçÂä°</li>
<li>ÊâßË°å <code>docker-compose up</code> ÂëΩ‰ª§ÔºåÂÖ∂ÂàõÂª∫Âπ∂ËøêË°åÊï¥‰∏™Â∫îÁî®Á®ãÂ∫èÔºåÂÆåÊàê‰∏ÄÈîÆÈÉ®ÁΩ≤‰∏äÁ∫ø</li>
</ol>
<h2 id="ÂÆâË£Ödocker-compose">ÂÆâË£ÖDocker-Compose
</h2><p><code>Docker-Compose</code>ÁöÑÁâàÊú¨ÈúÄË¶ÅÂíåDockerÂºïÊìéÁâàÊú¨ÂØπÂ∫îÔºåÂèØ‰ª•ÂèÇÁÖßÂÆòÁΩë‰∏äÁöÑ<a class="link" href="https://docs.docker.com/compose/compose-file/compose-file-v3/"  target="_blank" rel="noopener"
    >ÂØπÂ∫îÂÖ≥Á≥ª</a>„ÄÇ</p>
<p>ÂÆâË£ÖComposeÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ‰æãÂ¶Ç‰ªégithub‰∏ãËΩΩ 2.5.0ÁâàÊú¨ÁöÑdocker-compose</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ‰∏ãËΩΩ‰∏ãÊù•ÁöÑÊñá‰ª∂ÊîæÂà∞ /usr/local/binÁõÆÂΩï‰∏ãÔºåÂëΩÂêç‰∏∫ docker-compose</span>
</span></span><span class="line"><span class="cl">curl -L https://github.com/docker/compose/releases/download/v2.5.0/docker-compose-<span class="k">$(</span>uname -s<span class="k">)</span>-<span class="k">$(</span>uname -m<span class="k">)</span> -o /usr/local/bin/docker-compose
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Ê∑ªÂä†ÊùÉÈôê</span>
</span></span><span class="line"><span class="cl">chmod +x /usr/local/bin/docker-compose
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># È™åËØÅ</span>
</span></span><span class="line"><span class="cl">docker-compose version
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âç∏ËΩΩComposeÔºöÁõ¥Êé•Âà†Èô§ <code>usr/local/bin/docker-compose</code>Êñá‰ª∂Âç≥ÂèØ</p>
<h2 id="Â∏∏Áî®ÂëΩ‰ª§">Â∏∏Áî®ÂëΩ‰ª§
</h2><p>ÊâßË°åÂëΩ‰ª§Êó∂ÔºåÈúÄË¶ÅÂú®ÂØπÂ∫îÁöÑ<code>docker-compose.yml</code>Êñá‰ª∂ÊâÄÂú®ÁõÆÂΩï‰∏ãÊâßË°å„ÄÇ</p>
<p>Êü•ÁúãÂ∏ÆÂä©Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose -h
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂàõÂª∫Âπ∂ÂêØÂä®<code>docker-compose</code>ÊúçÂä°ÔºöÔºàÁ±ª‰ºº <code>docker run</code>Ôºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose up
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÂêéÂè∞ËøêË°å</span>
</span></span><span class="line"><span class="cl">docker-compose up -d
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÅúÊ≠¢Âπ∂Âà†Èô§ÂÆπÂô®„ÄÅÁΩëÁªú„ÄÅÂç∑„ÄÅÈïúÂÉèÔºöÔºàÁ±ª‰ºº <code>docker stop</code> +  <code>docker rm</code>Ôºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose down
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøõÂÖ•ÂÆπÂô®ÂÆû‰æãÂÜÖÈÉ®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose <span class="nb">exec</span> &lt;ymlÈáåÈù¢ÁöÑÊúçÂä°id&gt; /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â±ïÁ§∫ÂΩìÂâç<code>docker-compose</code>ÁºñÊéíËøáÁöÑËøêË°åÁöÑÊâÄÊúâÂÆπÂô®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose ps
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â±ïÁ§∫ÂΩìÂâç<code>docker-compose</code>ÁºñÊéíËøáÁöÑÂÆπÂô®ËøõÁ®ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose top
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êü•ÁúãÂÆπÂô®ËæìÂá∫Êó•ÂøóÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose log &lt;ymlÈáåÈù¢ÁöÑÊúçÂä°id&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê£ÄÊü•ÈÖçÁΩÆÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose config
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ÊúâÈóÆÈ¢òÊâçËæìÂá∫</span>
</span></span><span class="line"><span class="cl">docker-compose config -q
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈáçÂêØÊúçÂä°Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose restart
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂêØÂä®ÊúçÂä°ÔºöÔºàÁ±ª‰ºº <code>docker start</code>Ôºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose start
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÅúÊ≠¢ÊúçÂä°Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose stop
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="composeÁºñÊéíÂÆû‰æã">composeÁºñÊéíÂÆû‰æã
</h2><p>Á§∫‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># docker-composeÊñá‰ª∂ÁâàÊú¨Âè∑</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;3&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># ÈÖçÁΩÆÂêÑ‰∏™ÂÆπÂô®ÊúçÂä°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">microService</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">springboot_docker:1.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">ms01 </span><span class="w"> </span><span class="c"># ÂÆπÂô®ÂêçÁß∞ÔºåÂ¶ÇÊûú‰∏çÊåáÂÆöÔºå‰ºöÁîüÊàê‰∏Ä‰∏™ÊúçÂä°ÂêçÂä†‰∏äÂâçÁºÄÁöÑÂÆπÂô®Âêç</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;6001:6001&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/app/microService:/data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">springboot_network</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span><span class="w">  </span><span class="c"># ÈÖçÁΩÆËØ•ÂÆπÂô®ÊúçÂä°ÊâÄ‰æùËµñÁöÑÂÆπÂô®ÊúçÂä°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">redis</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">mysql</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">redis</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">redis:6.0.8</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;6379:6379&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/app/redis/redis.conf:/etc/redis/redis.conf</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/app/redis/data:data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">springboot_network</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l">redis-server /etc/redis/redis.conf</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">mysql</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">mysql:5.7</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">MYSQL_ROOT_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;123456&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">MYSQL_ALLOW_EMPTY_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;no&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">MYSQL_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;db_springboot&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">MYSQL_USER</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;springboot&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">MYSQL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;springboot&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;3306:3306&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/app/mysql/db:/var/lib/mysql</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/app/mysql/conf/my.cnf:/etc/my.cnf</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/app/mysql/init:/docker-entrypoint-initdb.d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">springboot_network</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span>--<span class="l">default-authentication-plugin=mysql_native_password</span><span class="w"> </span><span class="c"># Ëß£ÂÜ≥Â§ñÈÉ®Êó†Ê≥ïËÆøÈóÆ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># ÂàõÂª∫ springboot_network ÁΩëÊ°•ÁΩëÁªú</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">springboot_network</span><span class="p">:</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÁºñÂÜôÂÆåÊàê<code>docker-compose.yml</code>ÂêéÔºåËøõË°åËØ≠Ê≥ïÊ£ÄÊü•Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ËøõË°åËØ≠Ê≥ïÊ£ÄÊü•</span>
</span></span><span class="line"><span class="cl">docker-compose config -q
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúËØ≠Ê≥ïÊ£ÄÊü•Ê≤°Êúâ‰ªª‰ΩïÈóÆÈ¢òÔºåËøõË°åÂàõÂª∫„ÄÅÂêØÂä®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose up -d
</span></span></code></pre></td></tr></table>
</div>
</div><h1 id="15-portainerËΩªÈáèÁ∫ßÂõæÂΩ¢ÂåñÁõëÊéß"><strong>15-PortainerËΩªÈáèÁ∫ßÂõæÂΩ¢ÂåñÁõëÊéß</strong>
</h1><h2 id="portainerdockerËΩªÈáèÁ∫ßÂèØËßÜÂåñÂ∑•ÂÖ∑">PortainerÔºöDockerËΩªÈáèÁ∫ßÂèØËßÜÂåñÂ∑•ÂÖ∑
</h2><p>PortainerÊòØ‰∏ÄÊ¨æËΩªÈáèÁ∫ßÁöÑÂ∫îÁî®ÔºåÂÆÉÊèê‰æõ‰∫ÜÂõæÂΩ¢ÂåñÁïåÈù¢ÔºåÁî®‰∫éÊñπ‰æøÂú∞ÁÆ°ÁêÜDockerÁéØÂ¢ÉÔºåÂåÖÊã¨ÂçïÊú∫ÁéØÂ¢ÉÂíåÈõÜÁæ§ÁéØÂ¢É„ÄÇ</p>
<p>PortainerÂàÜ‰∏∫ÂºÄÊ∫êÁ§æÂå∫ÁâàÔºàCEÁâàÔºâÂíåÂïÜÁî®ÁâàÔºàBEÁâà/EEÁâàÔºâ„ÄÇ</p>
<h2 id="ÂÆâË£Ö">ÂÆâË£Ö
</h2><p>Portainer‰πüÊòØ‰∏Ä‰∏™DockerÈïúÂÉèÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®DockerËøêË°å„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ÊóßÁâàÈïúÂÉèÂú∞ÂùÄ‰∏∫portainer/portainerÔºå‰ªé2022Âπ¥1ÊúàÊ†áËÆ∞‰∏∫ËøáÊúü</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Êñ∞ÁâàÈïúÂÉèÂú∞ÂùÄ‰∏∫portainer/portainer-ce</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># --restart=always Â¶ÇÊûúDockerÂºïÊìéÈáçÂêØ‰∫ÜÔºåÈÇ£‰πàËøô‰∏™ÂÆπÂô®ÂÆû‰æã‰πü‰ºöÂú®DockerÂºïÊìéÈáçÂêØÂêéÈáçÂêØÔºåÁ±ª‰ººÂºÄÊú∫Ëá™ÂêØ</span>
</span></span><span class="line"><span class="cl">docker run -d -p 8000:8000 -p 9000:9000 --name portainer --restart<span class="o">=</span>always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:2.13.0-alpine
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂêØÂä®‰πãÂêéÔºå‰æøÂèØ‰ª•Âú®ÊµèËßàÂô®‰∏≠ËøõË°åËÆøÈóÆÔºöhttp://xxx.xxx.xxx.xxx:9000</p>
<p>È¶ñÊ¨°ËøõÊù•Êó∂ÔºåÈúÄË¶ÅÂàõÂª∫ admin ÁöÑÁî®Êà∑ÂêçÔºàÈªòËÆ§<code>admin</code>Ôºâ„ÄÅÂØÜÁ†ÅÔºàÂøÖÈ°ªÊª°Ë∂≥Ê†°È™åËßÑÂàôÔºå‰æãÂ¶Ç<code>portainer.io123</code>Ôºâ„ÄÇ</p>
<p>ÈÄâÊã© <code>local</code>ÁÆ°ÁêÜÊú¨Âú∞dockerÔºåÂç≥ÂèØÁúãÂà∞Êú¨Âú∞DockerÁöÑËØ¶ÁªÜ‰ø°ÊÅØÔºåÂåÖÊã¨ÂÖ∂‰∏≠ÁöÑÈïúÂÉèÔºàimagesÔºâ„ÄÅÂÆπÂô®ÔºàcontainersÔºâ„ÄÅÁΩëÁªúÔºànetworksÔºâ„ÄÅÂÆπÂô®Âç∑ÔºàvolumesÔºâ„ÄÅcomposeÁºñÊéíÔºàstacksÔºâÁ≠âÁ≠â„ÄÇ</p>
<h1 id="16-cigÈáçÈáèÁ∫ßÁõëÊéß"><strong>16-CIGÈáçÈáèÁ∫ßÁõëÊéß</strong>
</h1><h2 id="cig">CIG
</h2><p>ÈÄöËøá<code>docker stats</code> ÂëΩ‰ª§ÂèØ‰ª•ÂæàÊñπ‰æøÁöÑÊü•ÁúãÂΩìÂâçÂÆø‰∏ªÊú∫‰∏äÊâÄÊúâÂÆπÂô®ÁöÑCPU„ÄÅÂÜÖÂ≠ò„ÄÅÁΩëÁªúÊµÅÈáèÁ≠âÊï∞ÊçÆÔºåÂèØ‰ª•Êª°Ë∂≥‰∏Ä‰∫õÂ∞èÂûãÂ∫îÁî®„ÄÇ</p>
<p>‰ΩÜÊòØ <code>docker stats</code> ÁªüËÆ°ÁªìÊûúÂè™ËÉΩÊòØÂΩìÂâçÂÆø‰∏ªÊú∫ÁöÑÂÖ®ÈÉ®ÂÆπÂô®ÔºåÊï∞ÊçÆËµÑÊñôÊòØÂÆûÊó∂ÁöÑÔºåÊ≤°ÊúâÂú∞ÊñπÂ≠òÂÇ®„ÄÅÊ≤°ÊúâÂÅ•Â∫∑ÊåáÊ†áËøáÁ∫øÈ¢ÑË≠¶Á≠âÂäüËÉΩ„ÄÇ</p>
<p>CAdvisorÔºàÁõëÊéßÊî∂ÈõÜÔºâ + InfluxDBÔºàÂ≠òÂÇ®Êï∞ÊçÆÔºâ + GranfanaÔºàÂ±ïÁ§∫ÂõæË°®ÔºâÔºåÂêàÁß∞ <code>CIG</code>„ÄÇ</p>
<p><img src="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/CIG-1719926984502-43.png"
	width="916"
	height="601"
	srcset="/xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/CIG-1719926984502-43_hu18170342884047245813.png 480w, /xiaoshi/p/docker%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/assets/CIG-1719926984502-43_hu3349418829015073153.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="152"
		data-flex-basis="365px"
	
></p>
<h3 id="cadvisor">CAdvisor
</h3><p>CAdvisorÊòØ‰∏Ä‰∏™ÂÆπÂô®ËµÑÊ∫êÁõëÊéßÂ∑•ÂÖ∑ÔºåÂåÖÊã¨ÂÆπÂô®ÁöÑÂÜÖÂ≠ò„ÄÅCPU„ÄÅÁΩëÁªúIO„ÄÅÁ£ÅÁõòIOÁ≠âÁõëÊéßÔºåÂêåÊó∂Êèê‰æõ‰∫Ü‰∏Ä‰∏™WebÈ°µÈù¢Áî®‰∫éÊü•ÁúãÂÆπÂô®ÁöÑÂÆûÊó∂ËøêË°åÁä∂ÊÄÅ„ÄÇ</p>
<p>CAdvisorÈªòËÆ§Â≠òÂÇ®2ÂàÜÈíüÁöÑÊï∞ÊçÆÔºåËÄå‰∏îÂè™ÊòØÈíàÂØπÂçïÁâ©ÁêÜÊú∫„ÄÇ‰∏çËøáCAdvisorÊèê‰æõ‰∫ÜÂæàÂ§öÊï∞ÊçÆÈõÜÊàêÊé•Âè£ÔºåÊîØÊåÅ InfluxDB„ÄÅRedis„ÄÅKafka„ÄÅElasticsearchÁ≠âÈõÜÊàêÔºåÂèØ‰ª•Âä†‰∏äÂØπÂ∫îÈÖçÁΩÆÂ∞ÜÁõëÊéßÊï∞ÊçÆÂèëÂæÄËøô‰∫õÊï∞ÊçÆÂ∫ìÂ≠òÂÇ®Ëµ∑Êù•„ÄÇ</p>
<p>CAdvisor‰∏ªË¶ÅÂäüËÉΩÔºö</p>
<ul>
<li>
<p>Â±ïÁ§∫HostÂíåÂÆπÂô®‰∏§‰∏™Â±ÇÊ¨°ÁöÑÁõëÊéßÊï∞ÊçÆ</p>
</li>
<li>
<p>Â±ïÁ§∫ÂéÜÂè≤ÂèòÂåñÊï∞ÊçÆ</p>
</li>
</ul>
<h3 id="influxdb">InfluxDB
</h3><p>InfluxDBÊòØÁî®GoËØ≠Ë®ÄÁºñÂÜôÁöÑ‰∏Ä‰∏™ÂºÄÊ∫êÂàÜÂ∏ÉÂºèÊó∂Â∫è„ÄÅ‰∫ã‰ª∂ÂíåÊåáÊ†áÊï∞ÊçÆÂ∫ìÔºåÊó†ÈúÄÂ§ñÈÉ®‰æùËµñ„ÄÇ</p>
<p>CAdvisorÈªòËÆ§Âè™Âú®Êú¨Êú∫‰øùÂ≠ò2ÂàÜÈíüÁöÑÊï∞ÊçÆÔºå‰∏∫‰∫ÜÊåÅ‰πÖÂåñÂ≠òÂÇ®Êï∞ÊçÆÂíåÁªü‰∏ÄÊî∂ÈõÜÂ±ïÁ§∫ÁõëÊéßÊï∞ÊçÆÔºåÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÂ≠òÂÇ®Âà∞InfluxDB‰∏≠„ÄÇInfluxDBÊòØ‰∏Ä‰∏™Êó∂Â∫èÊï∞ÊçÆÂ∫ìÔºå‰∏ìÈó®Áî®‰∫éÂ≠òÂÇ®Êó∂Â∫èÁõ∏ÂÖ≥Êï∞ÊçÆÔºåÂæàÈÄÇÂêàÂ≠òÂÇ® CAdvisor ÁöÑÊï∞ÊçÆ„ÄÇËÄå‰∏î CAdvisorÊú¨Ë∫´Â∑≤ÁªèÊèê‰æõ‰∫ÜInfluxDBÁöÑÈõÜÊàêÊñπÊ≥ïÔºåÂú®ÂêØÂä®ÂÆπÂô®Êó∂ÊåáÂÆöÈÖçÁΩÆÂç≥ÂèØ„ÄÇ</p>
<p>InfluxDB‰∏ªË¶ÅÂäüËÉΩÔºö</p>
<ul>
<li>
<p>Âü∫‰∫éÊó∂Èó¥Â∫èÂàóÔºåÊîØÊåÅ‰∏éÊó∂Èó¥ÊúâÂÖ≥ÁöÑÁõ∏ÂÖ≥ÂáΩÊï∞ÔºàÂ¶ÇÊúÄÂ§ß„ÄÅÊúÄÂ∞è„ÄÅÊ±ÇÂíåÁ≠âÔºâ</p>
</li>
<li>
<p>ÂèØÂ∫¶ÈáèÊÄßÔºåÂèØ‰ª•ÂÆûÊó∂ÂØπÂ§ßÈáèÊï∞ÊçÆËøõË°åËÆ°ÁÆó</p>
</li>
<li>
<p>Âü∫‰∫é‰∫ã‰ª∂ÔºåÊîØÊåÅ‰ªªÊÑèÁöÑ‰∫ã‰ª∂Êï∞ÊçÆ</p>
</li>
</ul>
<h3 id="granfana">Granfana
</h3><p>GrafanaÊòØ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑÊï∞ÊçÆÁõëÊéßÂàÜÊûêÂèØËßÜÂåñÂπ≥Âè∞ÔºåÊîØÊåÅÂ§öÁßçÊï∞ÊçÆÊ∫êÈÖçÁΩÆÔºàÊîØÊåÅÁöÑÊï∞ÊçÆÊ∫êÂåÖÊã¨InfluxDB„ÄÅMySQL„ÄÅElasticsearch„ÄÅOpenTSDB„ÄÅGraphiteÁ≠âÔºâÂíå‰∏∞ÂØåÁöÑÊèí‰ª∂ÂèäÊ®°ÊùøÂäüËÉΩÔºåÊîØÊåÅÂõæË°®ÊùÉÈôêÊéßÂà∂ÂíåÊä•Ë≠¶„ÄÇ</p>
<p>Granfana‰∏ªË¶ÅÂäüËÉΩÔºö</p>
<ul>
<li>
<p>ÁÅµÊ¥ª‰∏∞ÂØåÁöÑÂõæÂΩ¢ÂåñÈÄâÈ°π</p>
</li>
<li>
<p>ÂèØ‰ª•Ê∑∑ÂêàÂ§öÁßçÈ£éÊ†º</p>
</li>
<li>
<p>ÊîØÊåÅÁôΩÂ§©ÂíåÂ§úÈó¥Ê®°Âºè</p>
</li>
<li>
<p>Â§ö‰∏™Êï∞ÊçÆÊ∫ê</p>
</li>
</ul>
<h2 id="ÂÆâË£ÖÈÉ®ÁΩ≤">ÂÆâË£ÖÈÉ®ÁΩ≤
</h2><ol>
<li>ÁºñÂÜô<code>docker-compose.yml</code>ÊúçÂä°ÁºñÊéíÊñá‰ª∂</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3.1&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">grafana_data</span><span class="p">:</span><span class="w"> </span>{}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">influxdb</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="c"># tutum/influxdb Áõ∏ÊØîinfluxdbÂ§ö‰∫ÜwebÂèØËßÜÂåñËßÜÂõæ„ÄÇ‰ΩÜÊòØËØ•ÈïúÂÉèÂ∑≤Ë¢´Ê†áËÆ∞‰∏∫Â∑≤ËøáÊó∂</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">tutum/influxdb:0.9</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">PRE_CREATE_DB=cadvisor</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;8083:8083&#34;</span><span class="w">         </span><span class="c"># Êï∞ÊçÆÂ∫ìwebÂèØËßÜÂåñÈ°µÈù¢Á´ØÂè£</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;8086:8086&#34;</span><span class="w">         </span><span class="c"># Êï∞ÊçÆÂ∫ìÁ´ØÂè£</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">./data/influxdb:/data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">cadvisor</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">google/cadvisor:v0.32.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">links</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">influxdb:influxsrv</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- -<span class="l">storage_driver=influxdb</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- -<span class="l">storage_driver_db=cadvisor</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- -<span class="l">storage_driver_host=influxsrv:8086</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;8080:8080&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/:/rootfs:ro</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/var/run:/var/run:rw</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/sys:/sys:ro</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/var/lib/docker/:/var/lib/docker:ro</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">grafana</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">grafana/grafana:8.5.2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;104&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">links</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">influxdb:influxsrv</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;3000:3000&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">grafana_data:/var/lib/grafana</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">HTTP_USER=admin</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">HTTP_PASS=admin</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">INFLUXDB_HOST=influxsrv</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">INFLUXDB_PORT=8086</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>Ê£ÄÊü•ËØ≠Ê≥ï</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose config -q
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>ÂàõÂª∫Âπ∂ÂêØÂä®ÂÆπÂô®</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker-compose up -d
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÆπÂô®ÂêØÂä®‰πãÂêéÔºö</p>
<ol>
<li>Âú®ÊµèËßàÂô®ÊâìÂºÄInfluxDBÊï∞ÊçÆÂ∫ìÁöÑÈ°µÈù¢Ôºö <a class="link" href="http://xxx.xxx.xxx.xxx:8083"  target="_blank" rel="noopener"
    >http://xxx.xxx.xxx.xxx:8083</a>Ôºå‰ΩøÁî®ÂëΩ‰ª§Êü•ÁúãÂΩìÂâçÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊï∞ÊçÆÂ∫ìÂÆû‰æãÔºö</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">SHOW DATABASES
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êü•ÁúãÂÖ∂‰∏≠ÊòØÂê¶Ëá™Âä®ÂàõÂª∫‰∫ÜÊàë‰ª¨Âú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆÁöÑ <code>cadvisor</code> Êï∞ÊçÆÂ∫ìÂÆû‰æã</p>
<ol start="2">
<li>
<p>Âú®ÊµèËßàÂô®ÊâìÂºÄCAdvisorÈ°µÈù¢Ôºöhttp://xxx.xxx.xxx.xxx8080/ÔºåÊü•ÁúãÂΩìÂâçdocker‰∏≠ÁöÑcpu„ÄÅÂÜÖÂ≠ò„ÄÅÁΩëÁªúIOÁ≠âÁªüËÆ°‰ø°ÊÅØ</p>
</li>
<li>
<p>Âú®ÊµèËßàÂô®ÊâìÂºÄGrafanaÈ°µÈù¢Ôºöhttp://xxx.xxx.xxx.xxx:3000/ÔºåÈªòËÆ§Áî®Êà∑ÂêçÂØÜÁ†ÅÊòØÔºö<code>admin</code>/<code>admin</code>„ÄÇ</p>
</li>
</ol>
<h2 id="grafanaÈÖçÁΩÆ">GrafanaÈÖçÁΩÆ
</h2><h3 id="Ê∑ªÂä†Êï∞ÊçÆÊ∫ê">Ê∑ªÂä†Êï∞ÊçÆÊ∫ê
</h3><p>Âú®<code>Configuration</code>ÔºàÂ∞èÈΩøËΩÆÔºâÈÄâÈ°πÂç°‰∏≠ÔºåÈÄâÊã©<code>Data Sources</code>ÔºåÊ∑ªÂä†‰∏Ä‰∏™InfluxDBÊï∞ÊçÆÊ∫êÔºö</p>
<ul>
<li>
<p>nameÔºöËá™ÂÆö‰πâ‰∏Ä‰∏™Êï∞ÊçÆÊ∫êÂêçÁß∞Ôºå‰æãÂ¶Ç<code>InfluxDB</code></p>
</li>
<li>
<p>Query LanguageÔºöÊü•ËØ¢ËØ≠Ë®ÄÔºåÈªòËÆ§<code>InfluxQL</code>Âç≥ÂèØ</p>
</li>
<li>
<p>URLÔºöÊ†πÊçÆcompose‰∏≠ÁöÑÂÆπÂô®ÊúçÂä°ÂêçËøûÊé•Ôºå<code>http://influxdb:8086</code></p>
</li>
<li>
<p>databaseÔºöÊàë‰ª¨Âú®InfluxDB‰∏≠ÂàõÂª∫ÁöÑÊï∞ÊçÆÂ∫ìÂÆû‰æãÔºå<code>cadvisor</code></p>
</li>
<li>
<p>UserÔºöInfluxDBÁöÑÈªòËÆ§Áî®Êà∑Ôºå<code>root</code></p>
</li>
<li>
<p>PasswordÔºö<code>root</code></p>
</li>
</ul>
<p>‰øùÂ≠òÂπ∂ÊµãËØïÔºåÂèØ‰ª•ËøûÈÄöÂç≥ÂèØ</p>
<h3 id="Ê∑ªÂä†Â∑•‰ΩúÂè∞">Ê∑ªÂä†Â∑•‰ΩúÂè∞
</h3><ol>
<li>Âú®<code>Create</code>ÔºàÂä†Âè∑ÔºâÈÄâÈ°πÂç°‰∏≠ÔºåÈÄâÊã©ÂàõÂª∫ <code>Dash Board</code>Â∑•‰ΩúÂè∞„ÄÇÂè≥‰∏äËßíÈÖçÁΩÆ‰∏≠ÂèØ‰ª•ÈÖçÁΩÆÂàõÂª∫Âá∫Êù•ÁöÑÂ∑•‰ΩúÂè∞ÁöÑÊ†áÈ¢ò„ÄÅÊñá‰ª∂Â§πÁ≠â‰ø°ÊÅØ„ÄÇ</li>
<li>Âú®ÂàõÂª∫Âá∫Êù•ÁöÑÂ∑•‰ΩúÂè∞‰∏≠ÔºåÈÄâÊã©<code>Add panel</code>‰∏≠ÁöÑ<code>Add a new panel</code>Ê∑ªÂä†‰∏Ä‰∏™Êñ∞ÁöÑÈù¢Êùø„ÄÇ
<ol>
<li>Âú®Âè≥‰∏äËßí<code>Time series</code>ÔºàÊó∂Â∫èÂõæÔºâ‰ΩçÁΩÆÂèØ‰ª•ÂàáÊç¢Â±ïÁ§∫ÁöÑÂõæË°®Ê†∑ÂºèÔºàÊü±Áä∂Âõæ„ÄÅ‰ª™Ë°®Áõò„ÄÅË°®Ê†º„ÄÅÈ•ºÂõæÁ≠âÁ≠âÔºâ</li>
<li>Âè≥‰æßËæπÊ†è‰∏∫ËØ•ÂõæË°®ÈÖçÁΩÆÁõ∏ÂÖ≥‰ø°ÊÅØÔºöÊ†áÈ¢ò„ÄÅÊèèËø∞</li>
<li>ÂõæË°®‰∏ãÊñπÂèØ‰ª•ÈÖçÁΩÆËØ•ÂõæË°®Â±ïÁ§∫ÁöÑÊï∞ÊçÆÁöÑÊü•ËØ¢ËØ≠Âè•Ôºå‰æãÂ¶Ç
<ol>
<li>FROMÔºö<code>cpu_usage_total</code>ÔºàGrafana‰ºöËá™Âä®Ëé∑ÂèñInfluxDBÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂÖÉÊï∞ÊçÆÔºåÂèØ‰ª•Áõ¥Êé•ÈÄâÊã©ÂØπÂ∫îË°®ÂêçÔºâ</li>
<li>WHEREÔºöÊ∑ªÂä†‰∏Ä‰∏™Êù°‰ª∂Ôºå<code>container_name=cig-cadvisor-1</code></li>
<li>ALIASÔºöÈÖçÁΩÆ‰∏Ä‰∏™Âà´ÂêçÔºå<code>CPU‰ΩøÁî®ÊÉÖÂÜµÊ±áÊÄª</code></li>
</ol>
</li>
</ol>
</li>
</ol>

</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 Â∞èËØó
    </section>
    
    <section class="powerby">
        ‰ΩøÁî® <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> ÊûÑÂª∫ <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/xiaoshi/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
